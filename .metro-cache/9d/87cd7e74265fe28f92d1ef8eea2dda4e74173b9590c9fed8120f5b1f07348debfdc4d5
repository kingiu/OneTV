{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useReleasingSharedObject = useReleasingSharedObject;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Returns a shared object, which is automatically cleaned up when the component is unmounted.\n   */\n  function useReleasingSharedObject(factory, dependencies) {\n    var objectRef = (0, _react.useRef)(null);\n    var isFastRefresh = (0, _react.useRef)(false);\n    var previousDependencies = (0, _react.useRef)(dependencies);\n    if (objectRef.current == null) {\n      objectRef.current = factory();\n    }\n    var object = (0, _react.useMemo)(function () {\n      var newObject = objectRef.current;\n      var dependenciesAreEqual = previousDependencies.current?.length === dependencies.length && dependencies.every(function (value, index) {\n        return value === previousDependencies.current[index];\n      });\n      // If the dependencies have changed, release the previous object and create a new one, otherwise this has been called\n      // because of a fast refresh, and we don't want to release the object.\n      if (!newObject || !dependenciesAreEqual) {\n        objectRef.current?.release();\n        newObject = factory();\n        objectRef.current = newObject;\n        previousDependencies.current = dependencies;\n      } else {\n        isFastRefresh.current = true;\n      }\n      return newObject;\n    }, dependencies);\n    (0, _react.useEffect)(function () {\n      isFastRefresh.current = false;\n      return function () {\n        // This will be called on every fast refresh and on unmount, but we only want to release the object on unmount.\n        if (!isFastRefresh.current && objectRef.current) {\n          objectRef.current.release();\n        }\n      };\n    }, []);\n    return object;\n  }\n});","lineCount":45,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,2,0],[8,0,3,0],[9,0,4,0],[10,2,5,7],[10,11,5,16,"useReleasingSharedObject"],[10,35,5,40,"useReleasingSharedObject"],[10,36,5,41,"factory"],[10,43,5,48],[10,45,5,50,"dependencies"],[10,57,5,62],[10,59,5,64],[11,4,6,4],[11,8,6,10,"objectRef"],[11,17,6,19],[11,20,6,22],[11,24,6,22,"useRef"],[11,37,6,28],[11,39,6,29],[11,43,6,33],[11,44,6,34],[12,4,7,4],[12,8,7,10,"isFastRefresh"],[12,21,7,23],[12,24,7,26],[12,28,7,26,"useRef"],[12,41,7,32],[12,43,7,33],[12,48,7,38],[12,49,7,39],[13,4,8,4],[13,8,8,10,"previousDependencies"],[13,28,8,30],[13,31,8,33],[13,35,8,33,"useRef"],[13,48,8,39],[13,50,8,40,"dependencies"],[13,62,8,52],[13,63,8,53],[14,4,9,4],[14,8,9,8,"objectRef"],[14,17,9,17],[14,18,9,18,"current"],[14,25,9,25],[14,29,9,29],[14,33,9,33],[14,35,9,35],[15,6,10,8,"objectRef"],[15,15,10,17],[15,16,10,18,"current"],[15,23,10,25],[15,26,10,28,"factory"],[15,33,10,35],[15,34,10,36],[15,35,10,37],[16,4,11,4],[17,4,12,4],[17,8,12,10,"object"],[17,14,12,16],[17,17,12,19],[17,21,12,19,"useMemo"],[17,35,12,26],[17,37,12,27],[17,49,12,33],[18,6,13,8],[18,10,13,12,"newObject"],[18,19,13,21],[18,22,13,24,"objectRef"],[18,31,13,33],[18,32,13,34,"current"],[18,39,13,41],[19,6,14,8],[19,10,14,14,"dependenciesAreEqual"],[19,30,14,34],[19,33,14,37,"previousDependencies"],[19,53,14,57],[19,54,14,58,"current"],[19,61,14,65],[19,63,14,67,"length"],[19,69,14,73],[19,74,14,78,"dependencies"],[19,86,14,90],[19,87,14,91,"length"],[19,93,14,97],[19,97,15,12,"dependencies"],[19,109,15,24],[19,110,15,25,"every"],[19,115,15,30],[19,116,15,31],[19,126,15,32,"value"],[19,131,15,37],[19,133,15,39,"index"],[19,138,15,44],[20,8,15,44],[20,15,15,49,"value"],[20,20,15,54],[20,25,15,59,"previousDependencies"],[20,45,15,79],[20,46,15,80,"current"],[20,53,15,87],[20,54,15,88,"index"],[20,59,15,93],[20,60,15,94],[21,6,15,94],[21,8,15,95],[22,6,16,8],[23,6,17,8],[24,6,18,8],[24,10,18,12],[24,11,18,13,"newObject"],[24,20,18,22],[24,24,18,26],[24,25,18,27,"dependenciesAreEqual"],[24,45,18,47],[24,47,18,49],[25,8,19,12,"objectRef"],[25,17,19,21],[25,18,19,22,"current"],[25,25,19,29],[25,27,19,31,"release"],[25,34,19,38],[25,35,19,39],[25,36,19,40],[26,8,20,12,"newObject"],[26,17,20,21],[26,20,20,24,"factory"],[26,27,20,31],[26,28,20,32],[26,29,20,33],[27,8,21,12,"objectRef"],[27,17,21,21],[27,18,21,22,"current"],[27,25,21,29],[27,28,21,32,"newObject"],[27,37,21,41],[28,8,22,12,"previousDependencies"],[28,28,22,32],[28,29,22,33,"current"],[28,36,22,40],[28,39,22,43,"dependencies"],[28,51,22,55],[29,6,23,8],[29,7,23,9],[29,13,24,13],[30,8,25,12,"isFastRefresh"],[30,21,25,25],[30,22,25,26,"current"],[30,29,25,33],[30,32,25,36],[30,36,25,40],[31,6,26,8],[32,6,27,8],[32,13,27,15,"newObject"],[32,22,27,24],[33,4,28,4],[33,5,28,5],[33,7,28,7,"dependencies"],[33,19,28,19],[33,20,28,20],[34,4,29,4],[34,8,29,4,"useEffect"],[34,24,29,13],[34,26,29,14],[34,38,29,20],[35,6,30,8,"isFastRefresh"],[35,19,30,21],[35,20,30,22,"current"],[35,27,30,29],[35,30,30,32],[35,35,30,37],[36,6,31,8],[36,13,31,15],[36,25,31,21],[37,8,32,12],[38,8,33,12],[38,12,33,16],[38,13,33,17,"isFastRefresh"],[38,26,33,30],[38,27,33,31,"current"],[38,34,33,38],[38,38,33,42,"objectRef"],[38,47,33,51],[38,48,33,52,"current"],[38,55,33,59],[38,57,33,61],[39,10,34,16,"objectRef"],[39,19,34,25],[39,20,34,26,"current"],[39,27,34,33],[39,28,34,34,"release"],[39,35,34,41],[39,36,34,42],[39,37,34,43],[40,8,35,12],[41,6,36,8],[41,7,36,9],[42,4,37,4],[42,5,37,5],[42,7,37,7],[42,9,37,9],[42,10,37,10],[43,4,38,4],[43,11,38,11,"object"],[43,17,38,17],[44,2,39,0],[45,0,39,1]],"functionMap":{"names":["<global>","useReleasingSharedObject","useMemo$argument_0","dependencies.every$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;2BCO;+BCG,+DD;KDa;cGC;eCE;SDK;KHC;CDE"}},"type":"js/module"}]}