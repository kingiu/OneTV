{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":141,"column":0,"index":3498}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":55,"index":55}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"react-native-web/dist/index","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":141,"column":0,"index":3498}}],"key":"HQdXwi+TEOkJBaUghAUOm/UKuzw="}},{"name":"../stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":50,"index":156}}],"key":"IqIRCjYc+BYOz73vlGmXzcU79vg="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTVRemoteHandler = void 0;\n  var _react = require(_dependencyMap[1], \"react\");\n  var _index = require(_dependencyMap[2], \"react-native-web/dist/index\");\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[3], \"../stores/playerStore\"));\n  var _s = $RefreshSig$();\n  const SEEK_STEP = 20 * 1000; // 快进/快退的时间步长（毫秒）\n\n  // 定时器延迟时间（毫秒）\n  const CONTROLS_TIMEOUT = 5000;\n\n  // 定义遥控器事件类型\n\n  /**\n   * 管理播放器控件的显示/隐藏、遥控器事件和自动隐藏定时器。\n   * @returns onScreenPress - 一个函数，用于处理屏幕点击事件，以显示控件并重置定时器。\n   */\n  const useTVRemoteHandler = () => {\n    _s();\n    const {\n      showControls,\n      setShowControls,\n      showEpisodeModal,\n      togglePlayPause,\n      seek\n    } = (0, _playerStore.default)();\n    const controlsTimer = (0, _react.useRef)(null);\n    const fastForwardIntervalRef = (0, _react.useRef)(null);\n\n    // 重置或启动隐藏控件的定时器\n    const resetTimer = (0, _react.useCallback)(() => {\n      // 清除之前的定时器\n      if (controlsTimer.current) {\n        clearTimeout(controlsTimer.current);\n      }\n      // 设置新的定时器\n      controlsTimer.current = setTimeout(() => {\n        setShowControls(false);\n      }, CONTROLS_TIMEOUT);\n    }, [setShowControls]);\n\n    // 当控件显示时，启动定时器\n    (0, _react.useEffect)(() => {\n      if (showControls) {\n        resetTimer();\n      } else {\n        // 如果控件被隐藏，清除定时器\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      }\n\n      // 组件卸载时清除定时器\n      return () => {\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      };\n    }, [showControls, resetTimer]);\n\n    // 组件卸载时清除快进定时器\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (fastForwardIntervalRef.current) {\n          clearInterval(fastForwardIntervalRef.current);\n        }\n      };\n    }, []);\n\n    // 处理遥控器事件\n    const handleTVEvent = (0, _react.useCallback)(event => {\n      if (showEpisodeModal) {\n        return;\n      }\n      if (event.eventType === \"longRight\" || event.eventType === \"longLeft\") {\n        if (event.eventKeyAction === 1) {\n          if (fastForwardIntervalRef.current) {\n            clearInterval(fastForwardIntervalRef.current);\n            fastForwardIntervalRef.current = null;\n          }\n        }\n      }\n      resetTimer();\n      if (showControls) {\n        // 如果控制条已显示，则不处理后台的快进/快退等操作\n        // 避免与控制条上的按钮焦点冲突\n        return;\n      }\n      switch (event.eventType) {\n        case \"select\":\n          togglePlayPause();\n          setShowControls(true);\n          break;\n        case \"left\":\n          seek(-SEEK_STEP); // 快退15秒\n          break;\n        case \"longLeft\":\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(() => {\n              seek(-SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"right\":\n          seek(SEEK_STEP);\n          break;\n        case \"longRight\":\n          // 长按开始: 启动连续快进\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(() => {\n              seek(SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"down\":\n          setShowControls(true);\n          break;\n      }\n    }, [showControls, showEpisodeModal, setShowControls, resetTimer, togglePlayPause, seek]);\n\n    // 使用类型断言确保兼容性\n    (0, _index.useTVEventHandler)(handleTVEvent);\n\n    // 处理屏幕点击事件\n    const onScreenPress = () => {\n      // 切换控件的显示状态\n      const newShowControls = !showControls;\n      setShowControls(newShowControls);\n\n      // 如果控件变为显示状态，则重置定时器\n      if (newShowControls) {\n        resetTimer();\n      }\n    };\n    return {\n      onScreenPress\n    };\n  };\n  exports.useTVRemoteHandler = useTVRemoteHandler;\n  _s(useTVRemoteHandler, \"tjCH28Lh3R+v2E6Pz9CA7u88X9M=\", false, function () {\n    return [_playerStore.default, _index.useTVEventHandler];\n  });\n});","lineCount":147,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"require"],[7,22,1,0],[7,23,1,0,"_dependencyMap"],[7,37,1,0],[8,2,1,55],[8,6,1,55,"_index"],[8,12,1,55],[8,15,1,55,"require"],[8,22,1,55],[8,23,1,55,"_dependencyMap"],[8,37,1,55],[9,2,3,0],[9,6,3,0,"_playerStore"],[9,18,3,0],[9,21,3,0,"_interopRequireDefault"],[9,43,3,0],[9,44,3,0,"require"],[9,51,3,0],[9,52,3,0,"_dependencyMap"],[9,66,3,0],[10,2,3,50],[10,6,3,50,"_s"],[10,8,3,50],[10,11,3,50,"$RefreshSig$"],[10,23,3,50],[11,2,5,0],[11,8,5,6,"SEEK_STEP"],[11,17,5,15],[11,20,5,18],[11,22,5,20],[11,25,5,23],[11,29,5,27],[11,30,5,28],[11,31,5,29],[13,2,7,0],[14,2,8,0],[14,8,8,6,"CONTROLS_TIMEOUT"],[14,24,8,22],[14,27,8,25],[14,31,8,29],[16,2,10,0],[18,2,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,2,20,7],[22,8,20,13,"useTVRemoteHandler"],[22,26,20,31],[22,29,20,34,"useTVRemoteHandler"],[22,30,20,34],[22,35,20,40],[23,4,20,40,"_s"],[23,6,20,40],[24,4,21,2],[24,10,21,8],[25,6,21,10,"showControls"],[25,18,21,22],[26,6,21,24,"setShowControls"],[26,21,21,39],[27,6,21,41,"showEpisodeModal"],[27,22,21,57],[28,6,21,59,"togglePlayPause"],[28,21,21,74],[29,6,21,76,"seek"],[30,4,21,81],[30,5,21,82],[30,8,21,85],[30,12,21,85,"usePlayerStore"],[30,32,21,99],[30,34,21,100],[30,35,21,101],[31,4,23,2],[31,10,23,8,"controlsTimer"],[31,23,23,21],[31,26,23,24],[31,30,23,24,"useRef"],[31,43,23,30],[31,45,23,69],[31,49,23,73],[31,50,23,74],[32,4,24,2],[32,10,24,8,"fastForwardIntervalRef"],[32,32,24,30],[32,35,24,33],[32,39,24,33,"useRef"],[32,52,24,39],[32,54,24,79],[32,58,24,83],[32,59,24,84],[34,4,26,2],[35,4,27,2],[35,10,27,8,"resetTimer"],[35,20,27,18],[35,23,27,21],[35,27,27,21,"useCallback"],[35,45,27,32],[35,47,27,33],[35,53,27,39],[36,6,28,4],[37,6,29,4],[37,10,29,8,"controlsTimer"],[37,23,29,21],[37,24,29,22,"current"],[37,31,29,29],[37,33,29,31],[38,8,30,6,"clearTimeout"],[38,20,30,18],[38,21,30,19,"controlsTimer"],[38,34,30,32],[38,35,30,33,"current"],[38,42,30,40],[38,43,30,41],[39,6,31,4],[40,6,32,4],[41,6,33,4,"controlsTimer"],[41,19,33,17],[41,20,33,18,"current"],[41,27,33,25],[41,30,33,28,"setTimeout"],[41,40,33,38],[41,41,33,39],[41,47,33,45],[42,8,34,6,"setShowControls"],[42,23,34,21],[42,24,34,22],[42,29,34,27],[42,30,34,28],[43,6,35,4],[43,7,35,5],[43,9,35,7,"CONTROLS_TIMEOUT"],[43,25,35,23],[43,26,35,24],[44,4,36,2],[44,5,36,3],[44,7,36,5],[44,8,36,6,"setShowControls"],[44,23,36,21],[44,24,36,22],[44,25,36,23],[46,4,38,2],[47,4,39,2],[47,8,39,2,"useEffect"],[47,24,39,11],[47,26,39,12],[47,32,39,18],[48,6,40,4],[48,10,40,8,"showControls"],[48,22,40,20],[48,24,40,22],[49,8,41,6,"resetTimer"],[49,18,41,16],[49,19,41,17],[49,20,41,18],[50,6,42,4],[50,7,42,5],[50,13,42,11],[51,8,43,6],[52,8,44,6],[52,12,44,10,"controlsTimer"],[52,25,44,23],[52,26,44,24,"current"],[52,33,44,31],[52,35,44,33],[53,10,45,8,"clearTimeout"],[53,22,45,20],[53,23,45,21,"controlsTimer"],[53,36,45,34],[53,37,45,35,"current"],[53,44,45,42],[53,45,45,43],[54,8,46,6],[55,6,47,4],[57,6,49,4],[58,6,50,4],[58,13,50,11],[58,19,50,17],[59,8,51,6],[59,12,51,10,"controlsTimer"],[59,25,51,23],[59,26,51,24,"current"],[59,33,51,31],[59,35,51,33],[60,10,52,8,"clearTimeout"],[60,22,52,20],[60,23,52,21,"controlsTimer"],[60,36,52,34],[60,37,52,35,"current"],[60,44,52,42],[60,45,52,43],[61,8,53,6],[62,6,54,4],[62,7,54,5],[63,4,55,2],[63,5,55,3],[63,7,55,5],[63,8,55,6,"showControls"],[63,20,55,18],[63,22,55,20,"resetTimer"],[63,32,55,30],[63,33,55,31],[63,34,55,32],[65,4,57,2],[66,4,58,2],[66,8,58,2,"useEffect"],[66,24,58,11],[66,26,58,12],[66,32,58,18],[67,6,59,4],[67,13,59,11],[67,19,59,17],[68,8,60,6],[68,12,60,10,"fastForwardIntervalRef"],[68,34,60,32],[68,35,60,33,"current"],[68,42,60,40],[68,44,60,42],[69,10,61,8,"clearInterval"],[69,23,61,21],[69,24,61,22,"fastForwardIntervalRef"],[69,46,61,44],[69,47,61,45,"current"],[69,54,61,52],[69,55,61,53],[70,8,62,6],[71,6,63,4],[71,7,63,5],[72,4,64,2],[72,5,64,3],[72,7,64,5],[72,9,64,7],[72,10,64,8],[74,4,66,2],[75,4,67,2],[75,10,67,8,"handleTVEvent"],[75,23,67,21],[75,26,67,24],[75,30,67,24,"useCallback"],[75,48,67,35],[75,50,68,5,"event"],[75,55,68,23],[75,59,68,28],[76,6,69,6],[76,10,69,10,"showEpisodeModal"],[76,26,69,26],[76,28,69,28],[77,8,70,8],[78,6,71,6],[79,6,73,6],[79,10,73,10,"event"],[79,15,73,15],[79,16,73,16,"eventType"],[79,25,73,25],[79,30,73,30],[79,41,73,41],[79,45,73,45,"event"],[79,50,73,50],[79,51,73,51,"eventType"],[79,60,73,60],[79,65,73,65],[79,75,73,75],[79,77,73,77],[80,8,74,8],[80,12,74,12,"event"],[80,17,74,17],[80,18,74,18,"eventKeyAction"],[80,32,74,32],[80,37,74,37],[80,38,74,38],[80,40,74,40],[81,10,75,10],[81,14,75,14,"fastForwardIntervalRef"],[81,36,75,36],[81,37,75,37,"current"],[81,44,75,44],[81,46,75,46],[82,12,76,12,"clearInterval"],[82,25,76,25],[82,26,76,26,"fastForwardIntervalRef"],[82,48,76,48],[82,49,76,49,"current"],[82,56,76,56],[82,57,76,57],[83,12,77,12,"fastForwardIntervalRef"],[83,34,77,34],[83,35,77,35,"current"],[83,42,77,42],[83,45,77,45],[83,49,77,49],[84,10,78,10],[85,8,79,8],[86,6,80,6],[87,6,82,6,"resetTimer"],[87,16,82,16],[87,17,82,17],[87,18,82,18],[88,6,84,6],[88,10,84,10,"showControls"],[88,22,84,22],[88,24,84,24],[89,8,85,8],[90,8,86,8],[91,8,87,8],[92,6,88,6],[93,6,90,6],[93,14,90,14,"event"],[93,19,90,19],[93,20,90,20,"eventType"],[93,29,90,29],[94,8,91,8],[94,13,91,13],[94,21,91,21],[95,10,92,10,"togglePlayPause"],[95,25,92,25],[95,26,92,26],[95,27,92,27],[96,10,93,10,"setShowControls"],[96,25,93,25],[96,26,93,26],[96,30,93,30],[96,31,93,31],[97,10,94,10],[98,8,95,8],[98,13,95,13],[98,19,95,19],[99,10,96,10,"seek"],[99,14,96,14],[99,15,96,15],[99,16,96,16,"SEEK_STEP"],[99,25,96,25],[99,26,96,26],[99,27,96,27],[99,28,96,28],[100,10,97,10],[101,8,98,8],[101,13,98,13],[101,23,98,23],[102,10,99,10],[102,14,99,14],[102,15,99,15,"fastForwardIntervalRef"],[102,37,99,37],[102,38,99,38,"current"],[102,45,99,45],[102,49,99,49,"event"],[102,54,99,54],[102,55,99,55,"eventKeyAction"],[102,69,99,69],[102,74,99,74],[102,75,99,75],[102,77,99,77],[103,12,100,12,"fastForwardIntervalRef"],[103,34,100,34],[103,35,100,35,"current"],[103,42,100,42],[103,45,100,45,"setInterval"],[103,56,100,56],[103,57,100,57],[103,63,100,63],[104,14,101,14,"seek"],[104,18,101,18],[104,19,101,19],[104,20,101,20,"SEEK_STEP"],[104,29,101,29],[104,30,101,30],[105,12,102,12],[105,13,102,13],[105,15,102,15],[105,18,102,18],[105,19,102,19],[106,10,103,10],[107,10,104,10],[108,8,105,8],[108,13,105,13],[108,20,105,20],[109,10,106,10,"seek"],[109,14,106,14],[109,15,106,15,"SEEK_STEP"],[109,24,106,24],[109,25,106,25],[110,10,107,10],[111,8,108,8],[111,13,108,13],[111,24,108,24],[112,10,109,10],[113,10,110,10],[113,14,110,14],[113,15,110,15,"fastForwardIntervalRef"],[113,37,110,37],[113,38,110,38,"current"],[113,45,110,45],[113,49,110,49,"event"],[113,54,110,54],[113,55,110,55,"eventKeyAction"],[113,69,110,69],[113,74,110,74],[113,75,110,75],[113,77,110,77],[114,12,111,12,"fastForwardIntervalRef"],[114,34,111,34],[114,35,111,35,"current"],[114,42,111,42],[114,45,111,45,"setInterval"],[114,56,111,56],[114,57,111,57],[114,63,111,63],[115,14,112,14,"seek"],[115,18,112,18],[115,19,112,19,"SEEK_STEP"],[115,28,112,28],[115,29,112,29],[116,12,113,12],[116,13,113,13],[116,15,113,15],[116,18,113,18],[116,19,113,19],[117,10,114,10],[118,10,115,10],[119,8,116,8],[119,13,116,13],[119,19,116,19],[120,10,117,10,"setShowControls"],[120,25,117,25],[120,26,117,26],[120,30,117,30],[120,31,117,31],[121,10,118,10],[122,6,119,6],[123,4,120,4],[123,5,120,5],[123,7,121,4],[123,8,121,5,"showControls"],[123,20,121,17],[123,22,121,19,"showEpisodeModal"],[123,38,121,35],[123,40,121,37,"setShowControls"],[123,55,121,52],[123,57,121,54,"resetTimer"],[123,67,121,64],[123,69,121,66,"togglePlayPause"],[123,84,121,81],[123,86,121,83,"seek"],[123,90,121,87],[123,91,122,2],[123,92,122,3],[125,4,124,2],[126,4,125,2],[126,8,125,2,"useTVEventHandler"],[126,32,125,19],[126,34,125,20,"handleTVEvent"],[126,47,125,40],[126,48,125,41],[128,4,127,2],[129,4,128,2],[129,10,128,8,"onScreenPress"],[129,23,128,21],[129,26,128,24,"onScreenPress"],[129,27,128,24],[129,32,128,30],[130,6,129,4],[131,6,130,4],[131,12,130,10,"newShowControls"],[131,27,130,25],[131,30,130,28],[131,31,130,29,"showControls"],[131,43,130,41],[132,6,131,4,"setShowControls"],[132,21,131,19],[132,22,131,20,"newShowControls"],[132,37,131,35],[132,38,131,36],[134,6,133,4],[135,6,134,4],[135,10,134,8,"newShowControls"],[135,25,134,23],[135,27,134,25],[136,8,135,6,"resetTimer"],[136,18,135,16],[136,19,135,17],[136,20,135,18],[137,6,136,4],[138,4,137,2],[138,5,137,3],[139,4,139,2],[139,11,139,9],[140,6,139,11,"onScreenPress"],[141,4,139,25],[141,5,139,26],[142,2,140,0],[142,3,140,1],[143,2,140,2,"exports"],[143,9,140,2],[143,10,140,2,"useTVRemoteHandler"],[143,28,140,2],[143,31,140,2,"useTVRemoteHandler"],[143,49,140,2],[144,2,140,2,"_s"],[144,4,140,2],[144,5,20,13,"useTVRemoteHandler"],[144,23,20,31],[145,4,20,31],[145,12,21,85,"usePlayerStore"],[145,32,21,99],[145,34,125,2,"useTVEventHandler"],[145,58,125,19],[146,2,125,19],[147,0,125,19]],"functionMap":{"names":["<global>","useTVRemoteHandler","resetTimer","setTimeout$argument_0","useEffect$argument_0","<anonymous>","handleTVEvent","setInterval$argument_0","onScreenPress"],"mappings":"AAA;kCCmB;iCCO;uCCM;KDE;GDC;YGG;WCW;KDI;GHC;YGG;WCC;KDI;GHC;IKI;yDCgC;aDE;yDCS;aDE;KLO;wBOQ;GPS;CDG"}},"type":"js/module"}]}