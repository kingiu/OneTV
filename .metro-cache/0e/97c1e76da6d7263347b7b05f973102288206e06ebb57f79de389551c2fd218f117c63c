{"dependencies":[{"name":"./fork/getStateFromPath","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":27,"index":177},"end":{"line":4,"column":61,"index":211}}],"key":"M+bvYask+xc50IathpbkVJRQuyg="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getNormalizedStatePath = exports.getRouteInfoFromState = void 0;\n  const getStateFromPath_1 = require(_dependencyMap[0], \"./fork/getStateFromPath\");\n  function getRouteInfoFromState(getPathFromState, state, baseUrl) {\n    const {\n      path\n    } = getPathFromState(state, false);\n    const qualified = getPathFromState(state, true);\n    return {\n      // TODO: This may have a predefined origin attached in the future.\n      unstable_globalHref: path,\n      pathname: (0, getStateFromPath_1.stripBaseUrl)(path, baseUrl).split('?')['0'],\n      isIndex: isIndexPath(state),\n      ...getNormalizedStatePath(qualified, baseUrl)\n    };\n  }\n  exports.getRouteInfoFromState = getRouteInfoFromState;\n  function isIndexPath(state) {\n    const route = state.routes[state.index ?? state.routes.length - 1];\n    if (route.state) {\n      return isIndexPath(route.state);\n    }\n    // Index routes on the same level as a layout do not have `index` in their name\n    if (route.params && 'screen' in route.params) {\n      return route.params.screen === 'index';\n    }\n    // The `params` key will not exist if there are no params\n    // So we need to do a positive lookahead to check if the route ends with /index\n    // Nested routes that are hoisted will have a name ending with /index\n    // e.g name could be /user/[id]/index\n    if (route.name.match(/.+\\/index$/)) return true;\n    // The state will either have params (because there are multiple _layout) or it will be hoisted with a name\n    // If we don't match the above cases, then it's not an index route\n    return false;\n  }\n  // TODO: Split up getPathFromState to return all this info at once.\n  function getNormalizedStatePath(_ref, baseUrl) {\n    let {\n      path: statePath,\n      params\n    } = _ref;\n    const [pathname] = statePath.split('?');\n    return {\n      // Strip empty path at the start\n      segments: (0, getStateFromPath_1.stripBaseUrl)(pathname, baseUrl).split('/').filter(Boolean).map(decodeURIComponent),\n      // TODO: This is not efficient, we should generate based on the state instead\n      // of converting to string then back to object\n      params: Object.entries(params).reduce((prev, _ref2) => {\n        let [key, value] = _ref2;\n        if (Array.isArray(value)) {\n          prev[key] = value.map(v => {\n            try {\n              return decodeURIComponent(v);\n            } catch {\n              return v;\n            }\n          });\n        } else {\n          try {\n            prev[key] = decodeURIComponent(value);\n          } catch {\n            prev[key] = value;\n          }\n        }\n        return prev;\n      }, {})\n    };\n  }\n  exports.getNormalizedStatePath = getNormalizedStatePath;\n});","lineCount":75,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"getNormalizedStatePath"],[7,32,3,30],[7,35,3,33,"exports"],[7,42,3,40],[7,43,3,41,"getRouteInfoFromState"],[7,64,3,62],[7,67,3,65],[7,72,3,70],[7,73,3,71],[8,2,4,0],[8,8,4,6,"getStateFromPath_1"],[8,26,4,24],[8,29,4,27,"require"],[8,36,4,34],[8,37,4,34,"_dependencyMap"],[8,51,4,34],[8,81,4,60],[8,82,4,61],[9,2,5,0],[9,11,5,9,"getRouteInfoFromState"],[9,32,5,30,"getRouteInfoFromState"],[9,33,5,31,"getPathFromState"],[9,49,5,47],[9,51,5,49,"state"],[9,56,5,54],[9,58,5,56,"baseUrl"],[9,65,5,63],[9,67,5,65],[10,4,6,4],[10,10,6,10],[11,6,6,12,"path"],[12,4,6,17],[12,5,6,18],[12,8,6,21,"getPathFromState"],[12,24,6,37],[12,25,6,38,"state"],[12,30,6,43],[12,32,6,45],[12,37,6,50],[12,38,6,51],[13,4,7,4],[13,10,7,10,"qualified"],[13,19,7,19],[13,22,7,22,"getPathFromState"],[13,38,7,38],[13,39,7,39,"state"],[13,44,7,44],[13,46,7,46],[13,50,7,50],[13,51,7,51],[14,4,8,4],[14,11,8,11],[15,6,9,8],[16,6,10,8,"unstable_globalHref"],[16,25,10,27],[16,27,10,29,"path"],[16,31,10,33],[17,6,11,8,"pathname"],[17,14,11,16],[17,16,11,18],[17,17,11,19],[17,18,11,20],[17,20,11,22,"getStateFromPath_1"],[17,38,11,40],[17,39,11,41,"stripBaseUrl"],[17,51,11,53],[17,53,11,55,"path"],[17,57,11,59],[17,59,11,61,"baseUrl"],[17,66,11,68],[17,67,11,69],[17,68,11,70,"split"],[17,73,11,75],[17,74,11,76],[17,77,11,79],[17,78,11,80],[17,79,11,81],[17,82,11,84],[17,83,11,85],[18,6,12,8,"isIndex"],[18,13,12,15],[18,15,12,17,"isIndexPath"],[18,26,12,28],[18,27,12,29,"state"],[18,32,12,34],[18,33,12,35],[19,6,13,8],[19,9,13,11,"getNormalizedStatePath"],[19,31,13,33],[19,32,13,34,"qualified"],[19,41,13,43],[19,43,13,45,"baseUrl"],[19,50,13,52],[20,4,14,4],[20,5,14,5],[21,2,15,0],[22,2,16,0,"exports"],[22,9,16,7],[22,10,16,8,"getRouteInfoFromState"],[22,31,16,29],[22,34,16,32,"getRouteInfoFromState"],[22,55,16,53],[23,2,17,0],[23,11,17,9,"isIndexPath"],[23,22,17,20,"isIndexPath"],[23,23,17,21,"state"],[23,28,17,26],[23,30,17,28],[24,4,18,4],[24,10,18,10,"route"],[24,15,18,15],[24,18,18,18,"state"],[24,23,18,23],[24,24,18,24,"routes"],[24,30,18,30],[24,31,18,31,"state"],[24,36,18,36],[24,37,18,37,"index"],[24,42,18,42],[24,46,18,46,"state"],[24,51,18,51],[24,52,18,52,"routes"],[24,58,18,58],[24,59,18,59,"length"],[24,65,18,65],[24,68,18,68],[24,69,18,69],[24,70,18,70],[25,4,19,4],[25,8,19,8,"route"],[25,13,19,13],[25,14,19,14,"state"],[25,19,19,19],[25,21,19,21],[26,6,20,8],[26,13,20,15,"isIndexPath"],[26,24,20,26],[26,25,20,27,"route"],[26,30,20,32],[26,31,20,33,"state"],[26,36,20,38],[26,37,20,39],[27,4,21,4],[28,4,22,4],[29,4,23,4],[29,8,23,8,"route"],[29,13,23,13],[29,14,23,14,"params"],[29,20,23,20],[29,24,23,24],[29,32,23,32],[29,36,23,36,"route"],[29,41,23,41],[29,42,23,42,"params"],[29,48,23,48],[29,50,23,50],[30,6,24,8],[30,13,24,15,"route"],[30,18,24,20],[30,19,24,21,"params"],[30,25,24,27],[30,26,24,28,"screen"],[30,32,24,34],[30,37,24,39],[30,44,24,46],[31,4,25,4],[32,4,26,4],[33,4,27,4],[34,4,28,4],[35,4,29,4],[36,4,30,4],[36,8,30,8,"route"],[36,13,30,13],[36,14,30,14,"name"],[36,18,30,18],[36,19,30,19,"match"],[36,24,30,24],[36,25,30,25],[36,37,30,37],[36,38,30,38],[36,40,31,8],[36,47,31,15],[36,51,31,19],[37,4,32,4],[38,4,33,4],[39,4,34,4],[39,11,34,11],[39,16,34,16],[40,2,35,0],[41,2,36,0],[42,2,37,0],[42,11,37,9,"getNormalizedStatePath"],[42,33,37,31,"getNormalizedStatePath"],[42,34,37,31,"_ref"],[42,38,37,31],[42,40,37,62,"baseUrl"],[42,47,37,69],[42,49,37,71],[43,4,37,71],[43,8,37,32],[44,6,37,34,"path"],[44,10,37,38],[44,12,37,40,"statePath"],[44,21,37,49],[45,6,37,51,"params"],[46,4,37,59],[46,5,37,60],[46,8,37,60,"_ref"],[46,12,37,60],[47,4,38,4],[47,10,38,10],[47,11,38,11,"pathname"],[47,19,38,19],[47,20,38,20],[47,23,38,23,"statePath"],[47,32,38,32],[47,33,38,33,"split"],[47,38,38,38],[47,39,38,39],[47,42,38,42],[47,43,38,43],[48,4,39,4],[48,11,39,11],[49,6,40,8],[50,6,41,8,"segments"],[50,14,41,16],[50,16,41,18],[50,17,41,19],[50,18,41,20],[50,20,41,22,"getStateFromPath_1"],[50,38,41,40],[50,39,41,41,"stripBaseUrl"],[50,51,41,53],[50,53,41,55,"pathname"],[50,61,41,63],[50,63,41,65,"baseUrl"],[50,70,41,72],[50,71,41,73],[50,72,41,74,"split"],[50,77,41,79],[50,78,41,80],[50,81,41,83],[50,82,41,84],[50,83,41,85,"filter"],[50,89,41,91],[50,90,41,92,"Boolean"],[50,97,41,99],[50,98,41,100],[50,99,41,101,"map"],[50,102,41,104],[50,103,41,105,"decodeURIComponent"],[50,121,41,123],[50,122,41,124],[51,6,42,8],[52,6,43,8],[53,6,44,8,"params"],[53,12,44,14],[53,14,44,16,"Object"],[53,20,44,22],[53,21,44,23,"entries"],[53,28,44,30],[53,29,44,31,"params"],[53,35,44,37],[53,36,44,38],[53,37,44,39,"reduce"],[53,43,44,45],[53,44,44,46],[53,45,44,47,"prev"],[53,49,44,51],[53,51,44,51,"_ref2"],[53,56,44,51],[53,61,44,70],[54,8,44,70],[54,12,44,53],[54,13,44,54,"key"],[54,16,44,57],[54,18,44,59,"value"],[54,23,44,64],[54,24,44,65],[54,27,44,65,"_ref2"],[54,32,44,65],[55,8,45,12],[55,12,45,16,"Array"],[55,17,45,21],[55,18,45,22,"isArray"],[55,25,45,29],[55,26,45,30,"value"],[55,31,45,35],[55,32,45,36],[55,34,45,38],[56,10,46,16,"prev"],[56,14,46,20],[56,15,46,21,"key"],[56,18,46,24],[56,19,46,25],[56,22,46,28,"value"],[56,27,46,33],[56,28,46,34,"map"],[56,31,46,37],[56,32,46,39,"v"],[56,33,46,40],[56,37,46,45],[57,12,47,20],[57,16,47,24],[58,14,48,24],[58,21,48,31,"decodeURIComponent"],[58,39,48,49],[58,40,48,50,"v"],[58,41,48,51],[58,42,48,52],[59,12,49,20],[59,13,49,21],[59,14,50,20],[59,20,50,26],[60,14,51,24],[60,21,51,31,"v"],[60,22,51,32],[61,12,52,20],[62,10,53,16],[62,11,53,17],[62,12,53,18],[63,8,54,12],[63,9,54,13],[63,15,55,17],[64,10,56,16],[64,14,56,20],[65,12,57,20,"prev"],[65,16,57,24],[65,17,57,25,"key"],[65,20,57,28],[65,21,57,29],[65,24,57,32,"decodeURIComponent"],[65,42,57,50],[65,43,57,51,"value"],[65,48,57,56],[65,49,57,57],[66,10,58,16],[66,11,58,17],[66,12,59,16],[66,18,59,22],[67,12,60,20,"prev"],[67,16,60,24],[67,17,60,25,"key"],[67,20,60,28],[67,21,60,29],[67,24,60,32,"value"],[67,29,60,37],[68,10,61,16],[69,8,62,12],[70,8,63,12],[70,15,63,19,"prev"],[70,19,63,23],[71,6,64,8],[71,7,64,9],[71,9,64,11],[71,10,64,12],[71,11,64,13],[72,4,65,4],[72,5,65,5],[73,2,66,0],[74,2,67,0,"exports"],[74,9,67,7],[74,10,67,8,"getNormalizedStatePath"],[74,32,67,30],[74,35,67,33,"getNormalizedStatePath"],[74,57,67,55],[75,0,67,56]],"functionMap":{"names":["<global>","getRouteInfoFromState","isIndexPath","getNormalizedStatePath","Object.entries.reduce$argument_0","value.map$argument_0"],"mappings":"AAA;ACI;CDU;AEE;CFkB;AGE;8CCO;sCCE;iBDO;SDW;CHE"}},"type":"js/module"}]}