{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"@/stores/settingsStore","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":58,"index":103}}],"key":"eV02vLtn6v4o2w8A7owZVbPhKIg="}},{"name":"@/services/api","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":37,"index":141}}],"key":"kVzDQdjnETfy4Hfg6zlHm9ALTDs="}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,\"__esModule\",{value:!0}),e.useApiConfig=e.getApiConfigErrorMessage=void 0;var s=r(d[0]),n=r(d[1]),t=r(d[2]);e.useApiConfig=()=>{const{apiBaseUrl:l,serverConfig:o,isLoadingServerConfig:u}=(0,n.useSettingsStore)(),[f,c]=(0,s.useState)({isValidating:!1,isValid:null,error:null}),V=Boolean(l&&l.trim()),C=!V;(0,s.useEffect)(()=>{if(!V)return void c({isValidating:!1,isValid:!1,error:null});u||(async()=>{c(s=>Object.assign({},s,{isValidating:!0,error:null}));try{await t.api.getServerConfig(),c({isValidating:!1,isValid:!0,error:null})}catch(s){let n='\\u670d\\u52a1\\u5668\\u8fde\\u63a5\\u5931\\u8d25';if(s instanceof Error)switch(s.message){case'API_URL_NOT_SET':n='API\\u5730\\u5740\\u672a\\u8bbe\\u7f6e';break;case'UNAUTHORIZED':n='\\u670d\\u52a1\\u5668\\u8ba4\\u8bc1\\u5931\\u8d25';break;default:s.message.includes('Network')?n='\\u7f51\\u7edc\\u8fde\\u63a5\\u5931\\u8d25\\uff0c\\u8bf7\\u68c0\\u67e5\\u7f51\\u7edc\\u6216\\u670d\\u52a1\\u5668\\u5730\\u5740':s.message.includes('timeout')?n='\\u8fde\\u63a5\\u8d85\\u65f6\\uff0c\\u8bf7\\u68c0\\u67e5\\u670d\\u52a1\\u5668\\u5730\\u5740':s.message.includes('404')?n='\\u670d\\u52a1\\u5668\\u5730\\u5740\\u65e0\\u6548\\uff0c\\u8bf7\\u68c0\\u67e5API\\u8def\\u5f84':s.message.includes('500')&&(n='\\u670d\\u52a1\\u5668\\u5185\\u90e8\\u9519\\u8bef')}c({isValidating:!1,isValid:!1,error:n})}})()},[l,V,u]),(0,s.useEffect)(()=>{u&&c(s=>Object.assign({},s,{isValidating:!0,error:null}))},[u]),(0,s.useEffect)(()=>{!u&&V&&c(o?s=>Object.assign({},s,{isValid:!0,error:null}):s=>Object.assign({},s,{isValid:!1,error:s.error||'\\u65e0\\u6cd5\\u83b7\\u53d6\\u670d\\u52a1\\u5668\\u914d\\u7f6e'}))},[o,u,V]);return{isConfigured:V,isValidating:f.isValidating||u,isValid:f.isValid,error:f.error,needsConfiguration:C}};e.getApiConfigErrorMessage=s=>s.needsConfiguration?'\\u8bf7\\u70b9\\u51fb\\u53f3\\u4e0a\\u89d2\\u8bbe\\u7f6e\\u6309\\u94ae\\uff0c\\u914d\\u7f6e\\u60a8\\u7684\\u670d\\u52a1\\u5668\\u5730\\u5740':s.error?s.error:s.isValidating?'\\u6b63\\u5728\\u9a8c\\u8bc1\\u670d\\u52a1\\u5668\\u914d\\u7f6e...':!1===s.isValid?'\\u670d\\u52a1\\u5668\\u914d\\u7f6e\\u9a8c\\u8bc1\\u5931\\u8d25\\uff0c\\u8bf7\\u68c0\\u67e5\\u8bbe\\u7f6e':'\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5'});","lineCount":1,"map":[[1,126,1,0],[1,130,1,0,"_react"],[1,132,1,0,"r"],[1,134,1,0,"d"],[1,136,1,0],[1,140,2,0,"_settingsStore"],[1,142,2,0,"r"],[1,144,2,0,"d"],[1,146,2,0],[1,150,3,0,"_api"],[1,152,3,0,"r"],[1,154,3,0,"d"],[1,156,3,0],[1,160,119,2,"e"],[1,162,119,2,"useApiConfig"],[1,175,13,28,"useApiConfig"],[1,180,14,2],[1,186,14,8,"apiBaseUrl"],[1,197,14,10,"apiBaseUrl"],[1,199,14,20,"serverConfig"],[1,212,14,22,"serverConfig"],[1,214,14,34,"isLoadingServerConfig"],[1,236,14,36,"isLoadingServerConfig"],[1,240,14,62],[1,242,14,62,"useSettingsStore"],[1,265,15,9,"validationState"],[1,267,15,26,"setValidationState"],[1,271,15,48],[1,273,15,48,"useState"],[1,285,19,5],[1,286,20,4,"isValidating"],[1,300,20,18],[1,302,21,4,"isValid"],[1,310,21,13],[1,315,22,4,"error"],[1,321,22,11],[1,328,25,8,"isConfigured"],[1,330,25,23,"Boolean"],[1,338,25,31,"apiBaseUrl"],[1,341,25,45,"apiBaseUrl"],[1,343,25,56,"trim"],[1,351,26,8,"needsConfiguration"],[1,354,26,30,"isConfigured"],[1,357,29,2],[1,359,29,2,"useEffect"],[1,372,29,12],[1,377,30,4],[1,381,30,9,"isConfigured"],[1,383,36,6],[1,395,31,6,"setValidationState"],[1,397,31,25],[1,398,32,8,"isValidating"],[1,412,32,22],[1,414,33,8,"isValid"],[1,423,33,17],[1,425,34,8,"error"],[1,431,34,15],[1,438,83,9,"isLoadingServerConfig"],[1,441,39,27,"async"],[1,452,40,6,"setValidationState"],[1,454,40,25,"prev"],[1,457,40,29,"Object"],[1,464,40,29,"assign"],[1,471,40,29],[1,474,40,39,"prev"],[1,476,40,43],[1,477,40,45,"isValidating"],[1,491,40,59],[1,493,40,65,"error"],[1,499,40,72],[1,507,42,6],[1,517,43,14,"api"],[1,523,43,18,"getServerConfig"],[1,541,44,8,"setValidationState"],[1,543,44,27],[1,544,45,10,"isValidating"],[1,558,45,24],[1,560,46,10,"isValid"],[1,569,46,19],[1,571,47,10,"error"],[1,577,47,17],[1,583,49,6],[1,584,49,8],[1,590,49,15,"error"],[1,593,50,8],[1,597,50,12,"errorMessage"],[1,599,50,27],[1,644,52,8],[1,647,52,12,"error"],[1,660,52,29,"Error"],[1,666,53,10],[1,673,53,18,"error"],[1,675,53,24,"message"],[1,684,54,12],[1,688,54,17],[1,706,55,14,"errorMessage"],[1,708,55,29],[1,744,56,14],[1,750,57,12],[1,754,57,17],[1,769,58,14,"errorMessage"],[1,771,58,29],[1,816,59,14],[1,822,60,12],[1,830,61,18,"error"],[1,832,61,24,"message"],[1,840,61,32,"includes"],[1,849,61,41],[1,860,62,16,"errorMessage"],[1,862,62,31],[1,973,63,25,"error"],[1,975,63,31,"message"],[1,983,63,39,"includes"],[1,992,63,48],[1,1003,64,16,"errorMessage"],[1,1005,64,31],[1,1086,65,25,"error"],[1,1088,65,31,"message"],[1,1096,65,39,"includes"],[1,1105,65,48],[1,1112,66,16,"errorMessage"],[1,1114,66,31],[1,1198,67,25,"error"],[1,1200,67,31,"message"],[1,1208,67,39,"includes"],[1,1217,67,48],[1,1226,68,16,"errorMessage"],[1,1228,68,31],[1,1274,74,8,"setValidationState"],[1,1276,74,27],[1,1277,75,10,"isValidating"],[1,1291,75,24],[1,1293,76,10,"isValid"],[1,1302,76,19],[1,1304,77,10,"error"],[1,1310,77,17,"errorMessage"],[1,1313,79,6],[1,1316,84,6,"validateConfig"],[1,1320,86,5],[1,1321,86,6,"apiBaseUrl"],[1,1323,86,18,"isConfigured"],[1,1325,86,32,"isLoadingServerConfig"],[1,1330,89,2],[1,1332,89,2,"useEffect"],[1,1345,89,12],[1,1350,90,8,"isLoadingServerConfig"],[1,1353,91,6,"setValidationState"],[1,1355,91,25,"prev"],[1,1358,91,29,"Object"],[1,1365,91,29,"assign"],[1,1372,91,29],[1,1375,91,39,"prev"],[1,1377,91,43],[1,1378,91,45,"isValidating"],[1,1392,91,59],[1,1394,91,65,"error"],[1,1400,91,72],[1,1409,93,5],[1,1410,93,6,"isLoadingServerConfig"],[1,1415,96,2],[1,1417,96,2,"useEffect"],[1,1430,96,12],[1,1436,97,9,"isLoadingServerConfig"],[1,1439,97,34,"isConfigured"],[1,1442,99,8,"setValidationState"],[1,1444,98,10,"serverConfig"],[1,1446,99,27,"prev"],[1,1449,99,31,"Object"],[1,1456,99,31,"assign"],[1,1463,99,31],[1,1466,99,41,"prev"],[1,1468,99,45],[1,1469,99,47,"isValid"],[1,1478,99,56],[1,1480,99,62,"error"],[1,1486,99,69],[1,1493,101,27,"prev"],[1,1496,101,31,"Object"],[1,1503,101,31,"assign"],[1,1510,101,31],[1,1513,102,13,"prev"],[1,1515,102,17],[1,1516,103,10,"isValid"],[1,1525,103,19],[1,1527,104,10,"error"],[1,1533,104,17,"prev"],[1,1535,104,22,"error"],[1,1542,104,31],[1,1603,108,5],[1,1604,108,6,"serverConfig"],[1,1606,108,20,"isLoadingServerConfig"],[1,1608,108,43,"isConfigured"],[1,1612,118,2],[1,1618,110,34],[1,1619,111,4,"isConfigured"],[1,1634,112,4,"isValidating"],[1,1647,112,18,"validationState"],[1,1649,112,34,"isValidating"],[1,1663,112,50,"isLoadingServerConfig"],[1,1665,113,4,"isValid"],[1,1673,113,13,"validationState"],[1,1675,113,29,"isValid"],[1,1683,114,4,"error"],[1,1689,114,11,"validationState"],[1,1691,114,27,"error"],[1,1697,115,4,"needsConfiguration"],[1,1720,139,2,"e"],[1,1722,139,2,"getApiConfigErrorMessage"],[1,1747,121,41,"status"],[1,1750,122,6,"status"],[1,1752,122,13,"needsConfiguration"],[1,1771,123,11],[1,1894,126,6,"status"],[1,1896,126,13,"error"],[1,1902,127,11,"status"],[1,1904,127,18,"error"],[1,1910,130,6,"status"],[1,1912,130,13,"isValidating"],[1,1925,131,11],[1,1986,134,25],[1,1990,134,6,"status"],[1,1992,134,13,"isValid"],[1,2000,135,11],[1,2093,138,9],[1,2143,139,2]],"functionMap":{"names":["<global>","useApiConfig","useEffect$argument_0","validateConfig","setValidationState$argument_0","getApiConfigErrorMessage"],"mappings":"AAA;4BCY;YCgB;2BCU;yBCC,sDD;KDwC;GDM;YCG;yBEE,sDF;GDE;YCG;2BEG,iDF;2BEE;UFI;GDG;CDW;wCKE;CLkB"}},"type":"js/module"}]}