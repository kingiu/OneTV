{"dependencies":[{"name":"./fetchAsync","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":21,"index":308},"end":{"line":10,"column":44,"index":331}}],"key":"WRPjsWf7xLFPRXxdz8iwCJghXC0="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.fetchThenEvalAsync = void 0;\n  /**\n   * Copyright Â© 2022 650 Industries.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  const fetchAsync_1 = require(_dependencyMap[0], \"./fetchAsync\");\n  /**\n   * Load a bundle for a URL using fetch + eval on native and script tag injection on web.\n   *\n   * @param bundlePath Given a statement like `import('./Bacon')` `bundlePath` would be `Bacon`.\n   */\n  function fetchThenEvalAsync(url) {\n    return (0, fetchAsync_1.fetchAsync)(url).then(_ref => {\n      let {\n        body,\n        status,\n        headers\n      } = _ref;\n      if (headers?.has?.('Content-Type') != null && headers.get('Content-Type').includes('application/json')) {\n        // Errors are returned as JSON.\n        throw new Error(JSON.parse(body).message || `Unknown error fetching '${url}'`);\n      }\n      if (status === 200) {\n        // Some engines do not support `sourceURL` as a comment. We expose a\n        // `globalEvalWithSourceUrl` function to handle updates in that case.\n        if (global.globalEvalWithSourceUrl) {\n          return global.globalEvalWithSourceUrl(body, url);\n        } else {\n          // eslint-disable-next-line no-eval\n          return eval(body);\n        }\n      } else {\n        // Format Metro errors if possible.\n        if (process.env.NODE_ENV === 'development') {\n          // body can be an error from Metro if a module is missing.\n          // {\"originModulePath\":\"/Users/evanbacon/Documents/GitHub/expo/.\",\"targetModuleName\":\"./http://localhost:8081/node_modules/react-native/index.js\",\"message\":\"...\"}\n          const error = jsonParseOptional(body);\n          if (error) {\n            // TODO: This is essentially like the Metro native red box errors. We should do a better job formatting them so\n            // the user experience doesn't feel bad. This can be tested by loading a split bundle that results in a missing module error from Metro.\n            if ('message' in error) {\n              throw new Error('Failed to load split bundle from Metro ' + url + ' (check terminal for more info).\\n(load: ' + error.message + ')');\n            }\n          }\n        }\n        throw new Error(`Failed to load split bundle from Metro ${url} (check terminal for more info).\\n${body}`);\n      }\n    });\n  }\n  exports.fetchThenEvalAsync = fetchThenEvalAsync;\n  function jsonParseOptional(json) {\n    try {\n      return JSON.parse(json);\n    } catch {\n      return null;\n    }\n  }\n});","lineCount":66,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"fetchThenEvalAsync"],[7,28,3,26],[7,31,3,29],[7,36,3,34],[7,37,3,35],[8,2,4,0],[9,0,5,0],[10,0,6,0],[11,0,7,0],[12,0,8,0],[13,0,9,0],[14,2,10,0],[14,8,10,6,"fetchAsync_1"],[14,20,10,18],[14,23,10,21,"require"],[14,30,10,28],[14,31,10,28,"_dependencyMap"],[14,45,10,28],[14,64,10,43],[14,65,10,44],[15,2,11,0],[16,0,12,0],[17,0,13,0],[18,0,14,0],[19,0,15,0],[20,2,16,0],[20,11,16,9,"fetchThenEvalAsync"],[20,29,16,27,"fetchThenEvalAsync"],[20,30,16,28,"url"],[20,33,16,31],[20,35,16,33],[21,4,17,4],[21,11,17,11],[21,12,17,12],[21,13,17,13],[21,15,17,15,"fetchAsync_1"],[21,27,17,27],[21,28,17,28,"fetchAsync"],[21,38,17,38],[21,40,17,40,"url"],[21,43,17,43],[21,44,17,44],[21,45,17,45,"then"],[21,49,17,49],[21,50,17,50,"_ref"],[21,54,17,50],[21,58,17,81],[22,6,17,81],[22,10,17,51],[23,8,17,53,"body"],[23,12,17,57],[24,8,17,59,"status"],[24,14,17,65],[25,8,17,67,"headers"],[26,6,17,75],[26,7,17,76],[26,10,17,76,"_ref"],[26,14,17,76],[27,6,18,8],[27,10,18,12,"headers"],[27,17,18,19],[27,19,18,21,"has"],[27,22,18,24],[27,25,18,27],[27,39,18,41],[27,40,18,42],[27,44,18,46],[27,48,18,50],[27,52,19,12,"headers"],[27,59,19,19],[27,60,19,20,"get"],[27,63,19,23],[27,64,19,24],[27,78,19,38],[27,79,19,39],[27,80,19,40,"includes"],[27,88,19,48],[27,89,19,49],[27,107,19,67],[27,108,19,68],[27,110,19,70],[28,8,20,12],[29,8,21,12],[29,14,21,18],[29,18,21,22,"Error"],[29,23,21,27],[29,24,21,28,"JSON"],[29,28,21,32],[29,29,21,33,"parse"],[29,34,21,38],[29,35,21,39,"body"],[29,39,21,43],[29,40,21,44],[29,41,21,45,"message"],[29,48,21,52],[29,52,21,56],[29,79,21,83,"url"],[29,82,21,86],[29,85,21,89],[29,86,21,90],[30,6,22,8],[31,6,23,8],[31,10,23,12,"status"],[31,16,23,18],[31,21,23,23],[31,24,23,26],[31,26,23,28],[32,8,24,12],[33,8,25,12],[34,8,26,12],[34,12,26,16,"global"],[34,18,26,22],[34,19,26,23,"globalEvalWithSourceUrl"],[34,42,26,46],[34,44,26,48],[35,10,27,16],[35,17,27,23,"global"],[35,23,27,29],[35,24,27,30,"globalEvalWithSourceUrl"],[35,47,27,53],[35,48,27,54,"body"],[35,52,27,58],[35,54,27,60,"url"],[35,57,27,63],[35,58,27,64],[36,8,28,12],[36,9,28,13],[36,15,29,17],[37,10,30,16],[38,10,31,16],[38,17,31,23,"eval"],[38,21,31,27],[38,22,31,28,"body"],[38,26,31,32],[38,27,31,33],[39,8,32,12],[40,6,33,8],[40,7,33,9],[40,13,34,13],[41,8,35,12],[42,8,36,12],[42,12,36,16,"process"],[42,19,36,23],[42,20,36,24,"env"],[42,23,36,27],[42,24,36,28,"NODE_ENV"],[42,32,36,36],[42,37,36,41],[42,50,36,54],[42,52,36,56],[43,10,37,16],[44,10,38,16],[45,10,39,16],[45,16,39,22,"error"],[45,21,39,27],[45,24,39,30,"jsonParseOptional"],[45,41,39,47],[45,42,39,48,"body"],[45,46,39,52],[45,47,39,53],[46,10,40,16],[46,14,40,20,"error"],[46,19,40,25],[46,21,40,27],[47,12,41,20],[48,12,42,20],[49,12,43,20],[49,16,43,24],[49,25,43,33],[49,29,43,37,"error"],[49,34,43,42],[49,36,43,44],[50,14,44,24],[50,20,44,30],[50,24,44,34,"Error"],[50,29,44,39],[50,30,44,40],[50,71,44,81],[50,74,45,28,"url"],[50,77,45,31],[50,80,46,28],[50,123,46,71],[50,126,47,28,"error"],[50,131,47,33],[50,132,47,34,"message"],[50,139,47,41],[50,142,48,28],[50,145,48,31],[50,146,48,32],[51,12,49,20],[52,10,50,16],[53,8,51,12],[54,8,52,12],[54,14,52,18],[54,18,52,22,"Error"],[54,23,52,27],[54,24,52,28],[54,66,52,70,"url"],[54,69,52,73],[54,106,52,110,"body"],[54,110,52,114],[54,112,52,116],[54,113,52,117],[55,6,53,8],[56,4,54,4],[56,5,54,5],[56,6,54,6],[57,2,55,0],[58,2,56,0,"exports"],[58,9,56,7],[58,10,56,8,"fetchThenEvalAsync"],[58,28,56,26],[58,31,56,29,"fetchThenEvalAsync"],[58,49,56,47],[59,2,57,0],[59,11,57,9,"jsonParseOptional"],[59,28,57,26,"jsonParseOptional"],[59,29,57,27,"json"],[59,33,57,31],[59,35,57,33],[60,4,58,4],[60,8,58,8],[61,6,59,8],[61,13,59,15,"JSON"],[61,17,59,19],[61,18,59,20,"parse"],[61,23,59,25],[61,24,59,26,"json"],[61,28,59,30],[61,29,59,31],[62,4,60,4],[62,5,60,5],[62,6,61,4],[62,12,61,10],[63,6,62,8],[63,13,62,15],[63,17,62,19],[64,4,63,4],[65,2,64,0],[66,0,64,1]],"functionMap":{"names":["<global>","fetchThenEvalAsync","then$argument_0","jsonParseOptional"],"mappings":"AAA;ACe;kDCC;KDqC;CDC;AGE;CHO"}},"type":"js/module"}]}