{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":0,"index":3047}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":0,"index":3047}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"@/utils/Logger","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":36,"index":36}}],"key":"dpbJvsqVW0VVfFOl8dlhEC6KfVk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseM3U = exports.getPlayableUrl = exports.fetchAndParseM3u = void 0;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _Logger = _interopRequireDefault(require(_dependencyMap[2], \"@/utils/Logger\"));\n  var logger = _Logger.default.withTag('M3U');\n  var parseM3U = function (m3uText) {\n    var parsedChannels = [];\n    var lines = m3uText.split('\\n');\n    var currentChannelInfo = null;\n    for (var line of lines) {\n      var trimmedLine = line.trim();\n      if (trimmedLine.startsWith('#EXTINF:')) {\n        currentChannelInfo = {}; // Start a new channel\n        var commaIndex = trimmedLine.lastIndexOf(',');\n        if (commaIndex !== -1) {\n          currentChannelInfo.name = trimmedLine.substring(commaIndex + 1).trim();\n          var attributesPart = trimmedLine.substring(8, commaIndex);\n          var logoMatch = attributesPart.match(/tvg-logo=\"([^\"]*)\"/i);\n          if (logoMatch && logoMatch[1]) {\n            currentChannelInfo.logo = logoMatch[1];\n          }\n          var groupMatch = attributesPart.match(/group-title=\"([^\"]*)\"/i);\n          if (groupMatch && groupMatch[1]) {\n            currentChannelInfo.group = groupMatch[1];\n          }\n        } else {\n          currentChannelInfo.name = trimmedLine.substring(8).trim();\n        }\n      } else if (currentChannelInfo && trimmedLine && !trimmedLine.startsWith('#') && trimmedLine.includes('://')) {\n        currentChannelInfo.url = trimmedLine;\n        currentChannelInfo.id = currentChannelInfo.url; // Use URL as ID\n\n        // Ensure all required fields are present, providing defaults if necessary\n        var finalChannel = {\n          id: currentChannelInfo.id,\n          url: currentChannelInfo.url,\n          name: currentChannelInfo.name || 'Unknown',\n          logo: currentChannelInfo.logo || '',\n          group: currentChannelInfo.group || 'Default'\n        };\n        parsedChannels.push(finalChannel);\n        currentChannelInfo = null; // Reset for the next channel\n      }\n    }\n    return parsedChannels;\n  };\n  exports.parseM3U = parseM3U;\n  var fetchAndParseM3u = exports.fetchAndParseM3u = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* (m3uUrl) {\n      try {\n        var response = yield fetch(m3uUrl);\n        if (!response.ok) {\n          throw new Error(`Failed to fetch M3U: ${response.statusText}`);\n        }\n        var m3uText = yield response.text();\n        return parseM3U(m3uText);\n      } catch (error) {\n        logger.info(\"Error fetching or parsing M3U:\", error);\n        return []; // Return empty array on error\n      }\n    });\n    return function fetchAndParseM3u(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var getPlayableUrl = function (originalUrl) {\n    if (!originalUrl) {\n      return null;\n    }\n    // In React Native, we use the proxy for all http streams to avoid potential issues.\n    // if (originalUrl.toLowerCase().startsWith('http://')) {\n    //   // Use the baseURL from the existing api instance.\n    //   if (!api.baseURL) {\n    //       console.warn(\"API base URL is not set. Cannot create proxy URL.\")\n    //       return originalUrl; // Fallback to original URL\n    //   }\n    //   return `${api.baseURL}/proxy?url=${encodeURIComponent(originalUrl)}`;\n    // }\n    // HTTPS streams can be played directly.\n    return originalUrl;\n  };\n  exports.getPlayableUrl = getPlayableUrl;\n});","lineCount":87,"map":[[8,2,1,0],[8,6,1,0,"_Logger"],[8,13,1,0],[8,16,1,0,"_interopRequireDefault"],[8,38,1,0],[8,39,1,0,"require"],[8,46,1,0],[8,47,1,0,"_dependencyMap"],[8,61,1,0],[9,2,3,0],[9,6,3,6,"logger"],[9,12,3,12],[9,15,3,15,"Logger"],[9,30,3,21],[9,31,3,22,"withTag"],[9,38,3,29],[9,39,3,30],[9,44,3,35],[9,45,3,36],[10,2,13,7],[10,6,13,13,"parseM3U"],[10,14,13,21],[10,17,13,24],[10,26,13,24,"parseM3U"],[10,27,13,25,"m3uText"],[10,34,13,40],[10,36,13,56],[11,4,14,2],[11,8,14,8,"parsedChannels"],[11,22,14,33],[11,25,14,36],[11,27,14,38],[12,4,15,2],[12,8,15,8,"lines"],[12,13,15,13],[12,16,15,16,"m3uText"],[12,23,15,23],[12,24,15,24,"split"],[12,29,15,29],[12,30,15,30],[12,34,15,34],[12,35,15,35],[13,4,16,2],[13,8,16,6,"currentChannelInfo"],[13,26,16,49],[13,29,16,52],[13,33,16,56],[14,4,18,2],[14,9,18,7],[14,13,18,13,"line"],[14,17,18,17],[14,21,18,21,"lines"],[14,26,18,26],[14,28,18,28],[15,6,19,4],[15,10,19,10,"trimmedLine"],[15,21,19,21],[15,24,19,24,"line"],[15,28,19,28],[15,29,19,29,"trim"],[15,33,19,33],[15,34,19,34],[15,35,19,35],[16,6,20,4],[16,10,20,8,"trimmedLine"],[16,21,20,19],[16,22,20,20,"startsWith"],[16,32,20,30],[16,33,20,31],[16,43,20,41],[16,44,20,42],[16,46,20,44],[17,8,21,6,"currentChannelInfo"],[17,26,21,24],[17,29,21,27],[17,30,21,28],[17,31,21,29],[17,32,21,30],[17,33,21,31],[18,8,22,6],[18,12,22,12,"commaIndex"],[18,22,22,22],[18,25,22,25,"trimmedLine"],[18,36,22,36],[18,37,22,37,"lastIndexOf"],[18,48,22,48],[18,49,22,49],[18,52,22,52],[18,53,22,53],[19,8,23,6],[19,12,23,10,"commaIndex"],[19,22,23,20],[19,27,23,25],[19,28,23,26],[19,29,23,27],[19,31,23,29],[20,10,24,8,"currentChannelInfo"],[20,28,24,26],[20,29,24,27,"name"],[20,33,24,31],[20,36,24,34,"trimmedLine"],[20,47,24,45],[20,48,24,46,"substring"],[20,57,24,55],[20,58,24,56,"commaIndex"],[20,68,24,66],[20,71,24,69],[20,72,24,70],[20,73,24,71],[20,74,24,72,"trim"],[20,78,24,76],[20,79,24,77],[20,80,24,78],[21,10,25,8],[21,14,25,14,"attributesPart"],[21,28,25,28],[21,31,25,31,"trimmedLine"],[21,42,25,42],[21,43,25,43,"substring"],[21,52,25,52],[21,53,25,53],[21,54,25,54],[21,56,25,56,"commaIndex"],[21,66,25,66],[21,67,25,67],[22,10,26,8],[22,14,26,14,"logoMatch"],[22,23,26,23],[22,26,26,26,"attributesPart"],[22,40,26,40],[22,41,26,41,"match"],[22,46,26,46],[22,47,26,47],[22,68,26,68],[22,69,26,69],[23,10,27,8],[23,14,27,12,"logoMatch"],[23,23,27,21],[23,27,27,25,"logoMatch"],[23,36,27,34],[23,37,27,35],[23,38,27,36],[23,39,27,37],[23,41,27,39],[24,12,28,10,"currentChannelInfo"],[24,30,28,28],[24,31,28,29,"logo"],[24,35,28,33],[24,38,28,36,"logoMatch"],[24,47,28,45],[24,48,28,46],[24,49,28,47],[24,50,28,48],[25,10,29,8],[26,10,30,8],[26,14,30,14,"groupMatch"],[26,24,30,24],[26,27,30,27,"attributesPart"],[26,41,30,41],[26,42,30,42,"match"],[26,47,30,47],[26,48,30,48],[26,72,30,72],[26,73,30,73],[27,10,31,8],[27,14,31,12,"groupMatch"],[27,24,31,22],[27,28,31,26,"groupMatch"],[27,38,31,36],[27,39,31,37],[27,40,31,38],[27,41,31,39],[27,43,31,41],[28,12,32,10,"currentChannelInfo"],[28,30,32,28],[28,31,32,29,"group"],[28,36,32,34],[28,39,32,37,"groupMatch"],[28,49,32,47],[28,50,32,48],[28,51,32,49],[28,52,32,50],[29,10,33,8],[30,8,34,6],[30,9,34,7],[30,15,34,13],[31,10,35,8,"currentChannelInfo"],[31,28,35,26],[31,29,35,27,"name"],[31,33,35,31],[31,36,35,34,"trimmedLine"],[31,47,35,45],[31,48,35,46,"substring"],[31,57,35,55],[31,58,35,56],[31,59,35,57],[31,60,35,58],[31,61,35,59,"trim"],[31,65,35,63],[31,66,35,64],[31,67,35,65],[32,8,36,6],[33,6,37,4],[33,7,37,5],[33,13,37,11],[33,17,37,15,"currentChannelInfo"],[33,35,37,33],[33,39,37,37,"trimmedLine"],[33,50,37,48],[33,54,37,52],[33,55,37,53,"trimmedLine"],[33,66,37,64],[33,67,37,65,"startsWith"],[33,77,37,75],[33,78,37,76],[33,81,37,79],[33,82,37,80],[33,86,37,84,"trimmedLine"],[33,97,37,95],[33,98,37,96,"includes"],[33,106,37,104],[33,107,37,105],[33,112,37,110],[33,113,37,111],[33,115,37,113],[34,8,38,6,"currentChannelInfo"],[34,26,38,24],[34,27,38,25,"url"],[34,30,38,28],[34,33,38,31,"trimmedLine"],[34,44,38,42],[35,8,39,6,"currentChannelInfo"],[35,26,39,24],[35,27,39,25,"id"],[35,29,39,27],[35,32,39,30,"currentChannelInfo"],[35,50,39,48],[35,51,39,49,"url"],[35,54,39,52],[35,55,39,53],[35,56,39,54],[37,8,41,6],[38,8,42,6],[38,12,42,12,"finalChannel"],[38,24,42,33],[38,27,42,36],[39,10,43,8,"id"],[39,12,43,10],[39,14,43,12,"currentChannelInfo"],[39,32,43,30],[39,33,43,31,"id"],[39,35,43,33],[40,10,44,8,"url"],[40,13,44,11],[40,15,44,13,"currentChannelInfo"],[40,33,44,31],[40,34,44,32,"url"],[40,37,44,35],[41,10,45,8,"name"],[41,14,45,12],[41,16,45,14,"currentChannelInfo"],[41,34,45,32],[41,35,45,33,"name"],[41,39,45,37],[41,43,45,41],[41,52,45,50],[42,10,46,8,"logo"],[42,14,46,12],[42,16,46,14,"currentChannelInfo"],[42,34,46,32],[42,35,46,33,"logo"],[42,39,46,37],[42,43,46,41],[42,45,46,43],[43,10,47,8,"group"],[43,15,47,13],[43,17,47,15,"currentChannelInfo"],[43,35,47,33],[43,36,47,34,"group"],[43,41,47,39],[43,45,47,43],[44,8,48,6],[44,9,48,7],[45,8,50,6,"parsedChannels"],[45,22,50,20],[45,23,50,21,"push"],[45,27,50,25],[45,28,50,26,"finalChannel"],[45,40,50,38],[45,41,50,39],[46,8,51,6,"currentChannelInfo"],[46,26,51,24],[46,29,51,27],[46,33,51,31],[46,34,51,32],[46,35,51,33],[47,6,52,4],[48,4,53,2],[49,4,54,2],[49,11,54,9,"parsedChannels"],[49,25,54,23],[50,2,55,0],[50,3,55,1],[51,2,55,2,"exports"],[51,9,55,2],[51,10,55,2,"parseM3U"],[51,18,55,2],[51,21,55,2,"parseM3U"],[51,29,55,2],[52,2,57,7],[52,6,57,13,"fetchAndParseM3u"],[52,22,57,29],[52,25,57,29,"exports"],[52,32,57,29],[52,33,57,29,"fetchAndParseM3u"],[52,49,57,29],[53,4,57,29],[53,8,57,29,"_ref"],[53,12,57,29],[53,19,57,29,"_asyncToGenerator2"],[53,37,57,29],[53,38,57,29,"default"],[53,45,57,29],[53,47,57,32],[53,58,57,39,"m3uUrl"],[53,64,57,53],[53,66,57,78],[54,6,58,2],[54,10,58,6],[55,8,59,4],[55,12,59,10,"response"],[55,20,59,18],[55,29,59,27,"fetch"],[55,34,59,32],[55,35,59,33,"m3uUrl"],[55,41,59,39],[55,42,59,40],[56,8,60,4],[56,12,60,8],[56,13,60,9,"response"],[56,21,60,17],[56,22,60,18,"ok"],[56,24,60,20],[56,26,60,22],[57,10,61,6],[57,16,61,12],[57,20,61,16,"Error"],[57,25,61,21],[57,26,61,22],[57,50,61,46,"response"],[57,58,61,54],[57,59,61,55,"statusText"],[57,69,61,65],[57,71,61,67],[57,72,61,68],[58,8,62,4],[59,8,63,4],[59,12,63,10,"m3uText"],[59,19,63,17],[59,28,63,26,"response"],[59,36,63,34],[59,37,63,35,"text"],[59,41,63,39],[59,42,63,40],[59,43,63,41],[60,8,64,4],[60,15,64,11,"parseM3U"],[60,23,64,19],[60,24,64,20,"m3uText"],[60,31,64,27],[60,32,64,28],[61,6,65,2],[61,7,65,3],[61,8,65,4],[61,15,65,11,"error"],[61,20,65,16],[61,22,65,18],[62,8,66,4,"logger"],[62,14,66,10],[62,15,66,11,"info"],[62,19,66,15],[62,20,66,16],[62,52,66,48],[62,54,66,50,"error"],[62,59,66,55],[62,60,66,56],[63,8,67,4],[63,15,67,11],[63,17,67,13],[63,18,67,14],[63,19,67,15],[64,6,68,2],[65,4,69,0],[65,5,69,1],[66,4,69,1],[66,20,57,13,"fetchAndParseM3u"],[66,36,57,29,"fetchAndParseM3u"],[66,37,57,29,"_x"],[66,39,57,29],[67,6,57,29],[67,13,57,29,"_ref"],[67,17,57,29],[67,18,57,29,"apply"],[67,23,57,29],[67,30,57,29,"arguments"],[67,39,57,29],[68,4,57,29],[69,2,57,29],[69,5,69,1],[70,2,71,7],[70,6,71,13,"getPlayableUrl"],[70,20,71,27],[70,23,71,30],[70,32,71,30,"getPlayableUrl"],[70,33,71,31,"originalUrl"],[70,44,71,57],[70,46,71,77],[71,4,72,2],[71,8,72,6],[71,9,72,7,"originalUrl"],[71,20,72,18],[71,22,72,20],[72,6,73,4],[72,13,73,11],[72,17,73,15],[73,4,74,2],[74,4,75,2],[75,4,76,2],[76,4,77,2],[77,4,78,2],[78,4,79,2],[79,4,80,2],[80,4,81,2],[81,4,82,2],[82,4,83,2],[83,4,84,2],[84,4,85,2],[84,11,85,9,"originalUrl"],[84,22,85,20],[85,2,86,0],[85,3,86,1],[86,2,86,2,"exports"],[86,9,86,2],[86,10,86,2,"getPlayableUrl"],[86,24,86,2],[86,27,86,2,"getPlayableUrl"],[86,41,86,2],[87,0,86,2]],"functionMap":{"names":["<global>","parseM3U","fetchAndParseM3u","getPlayableUrl"],"mappings":"AAA;wBCY;CD0C;gCEE;CFY;8BGE;CHe"}},"type":"js/module"}]}