{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":98,"column":0,"index":2907}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":71,"index":98}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}},{"name":"./StyledButton","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":46,"index":145}}],"key":"6HJJ6cm3NgrNIDAgLFkfOI728NA="}},{"name":"@/stores/detailStore","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":146},"end":{"line":4,"column":50,"index":196}}],"key":"1VTsbHIDBxP3Dlj8XXV++BCwQqE="}},{"name":"@/stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":197},"end":{"line":5,"column":50,"index":247}}],"key":"jza9oGwrWwCRqRJcTBeVqZHqd+Y="}},{"name":"@/utils/Logger","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0,"index":248},"end":{"line":6,"column":36,"index":284}}],"key":"dpbJvsqVW0VVfFOl8dlhEC6KfVk="}},{"name":"react/jsx-runtime","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":98,"column":0,"index":2907}}],"key":"5dCMGbjkz1QWCPjOwzvy5ZBkuK8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0]);\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.SourceSelectionModal = undefined;\n  var _react = _interopRequireDefault(require(_dependencyMap[1]));\n  var _reactNative = require(_dependencyMap[2]);\n  var _StyledButton = require(_dependencyMap[3]);\n  var _detailStore = _interopRequireDefault(require(_dependencyMap[4]));\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[5]));\n  var _Logger = _interopRequireDefault(require(_dependencyMap[6]));\n  var _jsxRuntime = require(_dependencyMap[7]);\n  var logger = _Logger.default.withTag('SourceSelectionModal');\n  var SourceSelectionModal = function () {\n    var _usePlayerStore = (0, _playerStore.default)(),\n      showSourceModal = _usePlayerStore.showSourceModal,\n      setShowSourceModal = _usePlayerStore.setShowSourceModal,\n      loadVideo = _usePlayerStore.loadVideo,\n      currentEpisodeIndex = _usePlayerStore.currentEpisodeIndex,\n      status = _usePlayerStore.status;\n    var _useDetailStore = (0, _detailStore.default)(),\n      searchResults = _useDetailStore.searchResults,\n      detail = _useDetailStore.detail,\n      setDetail = _useDetailStore.setDetail;\n    var onSelectSource = function (index) {\n      logger.debug(\"onSelectSource\", index, searchResults[index].source, detail?.source);\n      if (searchResults[index].source !== detail?.source) {\n        var newDetail = searchResults[index];\n        setDetail(newDetail);\n\n        // Reload the video with the new source, preserving current position\n        var currentPosition = status?.isLoaded ? status.positionMillis : undefined;\n        loadVideo({\n          source: newDetail.source,\n          id: newDetail.id.toString(),\n          episodeIndex: currentEpisodeIndex,\n          title: newDetail.title,\n          position: currentPosition\n        });\n      }\n      setShowSourceModal(false);\n    };\n    var onClose = function () {\n      setShowSourceModal(false);\n    };\n    return /*#__PURE__*/(0, _jsxRuntime.jsx)(_reactNative.Modal, {\n      visible: showSourceModal,\n      transparent: true,\n      animationType: \"slide\",\n      onRequestClose: onClose,\n      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_reactNative.View, {\n        style: styles.modalContainer,\n        children: /*#__PURE__*/(0, _jsxRuntime.jsxs)(_reactNative.View, {\n          style: styles.modalContent,\n          children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactNative.Text, {\n            style: styles.modalTitle,\n            children: \"\\u9009\\u62E9\\u64AD\\u653E\\u6E90\"\n          }), /*#__PURE__*/(0, _jsxRuntime.jsx)(_reactNative.FlatList, {\n            data: searchResults,\n            numColumns: 3,\n            contentContainerStyle: styles.sourceList,\n            keyExtractor: function (item, index) {\n              return `source-${item.source}-${index}`;\n            },\n            renderItem: function (_ref) {\n              var item = _ref.item,\n                index = _ref.index;\n              return /*#__PURE__*/(0, _jsxRuntime.jsx)(_StyledButton.StyledButton, {\n                text: item.source_name,\n                onPress: function () {\n                  return onSelectSource(index);\n                },\n                isSelected: detail?.source === item.source,\n                hasTVPreferredFocus: detail?.source === item.source,\n                style: styles.sourceItem,\n                textStyle: styles.sourceItemText\n              });\n            }\n          })]\n        })\n      })\n    });\n  };\n  exports.SourceSelectionModal = SourceSelectionModal;\n  var styles = _reactNative.StyleSheet.create({\n    modalContainer: {\n      flex: 1,\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\",\n      backgroundColor: \"transparent\"\n    },\n    modalContent: {\n      width: 600,\n      height: \"100%\",\n      backgroundColor: \"rgba(0, 0, 0, 0.85)\",\n      padding: 20\n    },\n    modalTitle: {\n      color: \"white\",\n      marginBottom: 12,\n      textAlign: \"center\",\n      fontSize: 18,\n      fontWeight: \"bold\"\n    },\n    sourceList: {\n      justifyContent: \"flex-start\"\n    },\n    sourceItem: {\n      paddingVertical: 2,\n      margin: 4,\n      marginLeft: 10,\n      marginRight: 8,\n      width: \"30%\"\n    },\n    sourceItemText: {\n      fontSize: 14\n    }\n  });\n});","lineCount":120,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"_interopRequireDefault"],[7,37,1,0],[7,38,1,0,"require"],[7,45,1,0],[7,46,1,0,"_dependencyMap"],[7,60,1,0],[8,2,2,0],[8,6,2,0,"_reactNative"],[8,18,2,0],[8,21,2,0,"require"],[8,28,2,0],[8,29,2,0,"_dependencyMap"],[8,43,2,0],[9,2,3,0],[9,6,3,0,"_StyledButton"],[9,19,3,0],[9,22,3,0,"require"],[9,29,3,0],[9,30,3,0,"_dependencyMap"],[9,44,3,0],[10,2,4,0],[10,6,4,0,"_detailStore"],[10,18,4,0],[10,21,4,0,"_interopRequireDefault"],[10,43,4,0],[10,44,4,0,"require"],[10,51,4,0],[10,52,4,0,"_dependencyMap"],[10,66,4,0],[11,2,5,0],[11,6,5,0,"_playerStore"],[11,18,5,0],[11,21,5,0,"_interopRequireDefault"],[11,43,5,0],[11,44,5,0,"require"],[11,51,5,0],[11,52,5,0,"_dependencyMap"],[11,66,5,0],[12,2,6,0],[12,6,6,0,"_Logger"],[12,13,6,0],[12,16,6,0,"_interopRequireDefault"],[12,38,6,0],[12,39,6,0,"require"],[12,46,6,0],[12,47,6,0,"_dependencyMap"],[12,61,6,0],[13,2,6,36],[13,6,6,36,"_jsxRuntime"],[13,17,6,36],[13,20,6,36,"require"],[13,27,6,36],[13,28,6,36,"_dependencyMap"],[13,42,6,36],[14,2,8,0],[14,6,8,6,"logger"],[14,12,8,12],[14,15,8,15,"Logger"],[14,30,8,21],[14,31,8,22,"withTag"],[14,38,8,29],[14,39,8,30],[14,61,8,52],[14,62,8,53],[15,2,10,7],[15,6,10,13,"SourceSelectionModal"],[15,26,10,43],[15,29,10,46],[15,38,10,46,"SourceSelectionModal"],[15,39,10,46],[15,41,10,52],[16,4,11,2],[16,8,11,2,"_usePlayerStore"],[16,23,11,2],[16,26,11,90],[16,30,11,90,"usePlayerStore"],[16,50,11,104],[16,52,11,105],[16,53,11,106],[17,6,11,10,"showSourceModal"],[17,21,11,25],[17,24,11,25,"_usePlayerStore"],[17,39,11,25],[17,40,11,10,"showSourceModal"],[17,55,11,25],[18,6,11,27,"setShowSourceModal"],[18,24,11,45],[18,27,11,45,"_usePlayerStore"],[18,42,11,45],[18,43,11,27,"setShowSourceModal"],[18,61,11,45],[19,6,11,47,"loadVideo"],[19,15,11,56],[19,18,11,56,"_usePlayerStore"],[19,33,11,56],[19,34,11,47,"loadVideo"],[19,43,11,56],[20,6,11,58,"currentEpisodeIndex"],[20,25,11,77],[20,28,11,77,"_usePlayerStore"],[20,43,11,77],[20,44,11,58,"currentEpisodeIndex"],[20,63,11,77],[21,6,11,79,"status"],[21,12,11,85],[21,15,11,85,"_usePlayerStore"],[21,30,11,85],[21,31,11,79,"status"],[21,37,11,85],[22,4,12,2],[22,8,12,2,"_useDetailStore"],[22,23,12,2],[22,26,12,47],[22,30,12,47,"useDetailStore"],[22,50,12,61],[22,52,12,62],[22,53,12,63],[23,6,12,10,"searchResults"],[23,19,12,23],[23,22,12,23,"_useDetailStore"],[23,37,12,23],[23,38,12,10,"searchResults"],[23,51,12,23],[24,6,12,25,"detail"],[24,12,12,31],[24,15,12,31,"_useDetailStore"],[24,30,12,31],[24,31,12,25,"detail"],[24,37,12,31],[25,6,12,33,"setDetail"],[25,15,12,42],[25,18,12,42,"_useDetailStore"],[25,33,12,42],[25,34,12,33,"setDetail"],[25,43,12,42],[26,4,14,2],[26,8,14,8,"onSelectSource"],[26,22,14,22],[26,25,14,25],[26,34,14,25,"onSelectSource"],[26,35,14,26,"index"],[26,40,14,39],[26,42,14,44],[27,6,15,4,"logger"],[27,12,15,10],[27,13,15,11,"debug"],[27,18,15,16],[27,19,15,17],[27,35,15,33],[27,37,15,35,"index"],[27,42,15,40],[27,44,15,42,"searchResults"],[27,57,15,55],[27,58,15,56,"index"],[27,63,15,61],[27,64,15,62],[27,65,15,63,"source"],[27,71,15,69],[27,73,15,71,"detail"],[27,79,15,77],[27,81,15,79,"source"],[27,87,15,85],[27,88,15,86],[28,6,16,4],[28,10,16,8,"searchResults"],[28,23,16,21],[28,24,16,22,"index"],[28,29,16,27],[28,30,16,28],[28,31,16,29,"source"],[28,37,16,35],[28,42,16,40,"detail"],[28,48,16,46],[28,50,16,48,"source"],[28,56,16,54],[28,58,16,56],[29,8,17,6],[29,12,17,12,"newDetail"],[29,21,17,21],[29,24,17,24,"searchResults"],[29,37,17,37],[29,38,17,38,"index"],[29,43,17,43],[29,44,17,44],[30,8,18,6,"setDetail"],[30,17,18,15],[30,18,18,16,"newDetail"],[30,27,18,25],[30,28,18,26],[32,8,20,6],[33,8,21,6],[33,12,21,12,"currentPosition"],[33,27,21,27],[33,30,21,30,"status"],[33,36,21,36],[33,38,21,38,"isLoaded"],[33,46,21,46],[33,49,21,49,"status"],[33,55,21,55],[33,56,21,56,"positionMillis"],[33,70,21,70],[33,73,21,73,"undefined"],[33,82,21,82],[34,8,22,6,"loadVideo"],[34,17,22,15],[34,18,22,16],[35,10,23,8,"source"],[35,16,23,14],[35,18,23,16,"newDetail"],[35,27,23,25],[35,28,23,26,"source"],[35,34,23,32],[36,10,24,8,"id"],[36,12,24,10],[36,14,24,12,"newDetail"],[36,23,24,21],[36,24,24,22,"id"],[36,26,24,24],[36,27,24,25,"toString"],[36,35,24,33],[36,36,24,34],[36,37,24,35],[37,10,25,8,"episodeIndex"],[37,22,25,20],[37,24,25,22,"currentEpisodeIndex"],[37,43,25,41],[38,10,26,8,"title"],[38,15,26,13],[38,17,26,15,"newDetail"],[38,26,26,24],[38,27,26,25,"title"],[38,32,26,30],[39,10,27,8,"position"],[39,18,27,16],[39,20,27,18,"currentPosition"],[40,8,28,6],[40,9,28,7],[40,10,28,8],[41,6,29,4],[42,6,30,4,"setShowSourceModal"],[42,24,30,22],[42,25,30,23],[42,30,30,28],[42,31,30,29],[43,4,31,2],[43,5,31,3],[44,4,33,2],[44,8,33,8,"onClose"],[44,15,33,15],[44,18,33,18],[44,27,33,18,"onClose"],[44,28,33,18],[44,30,33,24],[45,6,34,4,"setShowSourceModal"],[45,24,34,22],[45,25,34,23],[45,30,34,28],[45,31,34,29],[46,4,35,2],[46,5,35,3],[47,4,37,2],[47,24,38,4],[47,28,38,4,"_jsxRuntime"],[47,39,38,4],[47,40,38,4,"jsx"],[47,43,38,4],[47,45,38,5,"_reactNative"],[47,57,38,5],[47,58,38,5,"Modal"],[47,63,38,10],[48,6,38,11,"visible"],[48,13,38,18],[48,15,38,20,"showSourceModal"],[48,30,38,36],[49,6,38,37,"transparent"],[49,17,38,48],[49,19,38,50],[49,23,38,55],[50,6,38,56,"animationType"],[50,19,38,69],[50,21,38,70],[50,28,38,77],[51,6,38,78,"onRequestClose"],[51,20,38,92],[51,22,38,94,"onClose"],[51,29,38,102],[52,6,38,102,"children"],[52,14,38,102],[52,29,39,6],[52,33,39,6,"_jsxRuntime"],[52,44,39,6],[52,45,39,6,"jsx"],[52,48,39,6],[52,50,39,7,"_reactNative"],[52,62,39,7],[52,63,39,7,"View"],[52,67,39,11],[53,8,39,12,"style"],[53,13,39,17],[53,15,39,19,"styles"],[53,21,39,25],[53,22,39,26,"modalContainer"],[53,36,39,41],[54,8,39,41,"children"],[54,16,39,41],[54,31,40,8],[54,35,40,8,"_jsxRuntime"],[54,46,40,8],[54,47,40,8,"jsxs"],[54,51,40,8],[54,53,40,9,"_reactNative"],[54,65,40,9],[54,66,40,9,"View"],[54,70,40,13],[55,10,40,14,"style"],[55,15,40,19],[55,17,40,21,"styles"],[55,23,40,27],[55,24,40,28,"modalContent"],[55,36,40,41],[56,10,40,41,"children"],[56,18,40,41],[56,34,41,10],[56,38,41,10,"_jsxRuntime"],[56,49,41,10],[56,50,41,10,"jsx"],[56,53,41,10],[56,55,41,11,"_reactNative"],[56,67,41,11],[56,68,41,11,"Text"],[56,72,41,15],[57,12,41,16,"style"],[57,17,41,21],[57,19,41,23,"styles"],[57,25,41,29],[57,26,41,30,"modalTitle"],[57,36,41,41],[58,12,41,41,"children"],[58,20,41,41],[58,22,41,42],[59,10,41,47],[59,11,41,53],[59,12,41,54],[59,27,42,10],[59,31,42,10,"_jsxRuntime"],[59,42,42,10],[59,43,42,10,"jsx"],[59,46,42,10],[59,48,42,11,"_reactNative"],[59,60,42,11],[59,61,42,11,"FlatList"],[59,69,42,19],[60,12,43,12,"data"],[60,16,43,16],[60,18,43,18,"searchResults"],[60,31,43,32],[61,12,44,12,"numColumns"],[61,22,44,22],[61,24,44,24],[61,25,44,26],[62,12,45,12,"contentContainerStyle"],[62,33,45,33],[62,35,45,35,"styles"],[62,41,45,41],[62,42,45,42,"sourceList"],[62,52,45,53],[63,12,46,12,"keyExtractor"],[63,24,46,24],[63,26,46,26],[63,35,46,26,"keyExtractor"],[63,36,46,27,"item"],[63,40,46,31],[63,42,46,33,"index"],[63,47,46,38],[64,14,46,38],[64,21,46,43],[64,31,46,53,"item"],[64,35,46,57],[64,36,46,58,"source"],[64,42,46,64],[64,46,46,68,"index"],[64,51,46,73],[64,53,46,75],[65,12,46,75],[65,13,46,76],[66,12,47,12,"renderItem"],[66,22,47,22],[66,24,47,24],[66,33,47,24,"renderItem"],[66,34,47,24,"_ref"],[66,38,47,24],[67,14,47,24],[67,18,47,27,"item"],[67,22,47,31],[67,25,47,31,"_ref"],[67,29,47,31],[67,30,47,27,"item"],[67,34,47,31],[68,16,47,33,"index"],[68,21,47,38],[68,24,47,38,"_ref"],[68,28,47,38],[68,29,47,33,"index"],[68,34,47,38],[69,14,47,38],[69,34,48,14],[69,38,48,14,"_jsxRuntime"],[69,49,48,14],[69,50,48,14,"jsx"],[69,53,48,14],[69,55,48,15,"_StyledButton"],[69,68,48,15],[69,69,48,15,"StyledButton"],[69,81,48,27],[70,16,49,16,"text"],[70,20,49,20],[70,22,49,22,"item"],[70,26,49,26],[70,27,49,27,"source_name"],[70,38,49,39],[71,16,50,16,"onPress"],[71,23,50,23],[71,25,50,25],[71,34,50,25,"onPress"],[71,35,50,25],[72,18,50,25],[72,25,50,31,"onSelectSource"],[72,39,50,45],[72,40,50,46,"index"],[72,45,50,51],[72,46,50,52],[73,16,50,52],[73,17,50,53],[74,16,51,16,"isSelected"],[74,26,51,26],[74,28,51,28,"detail"],[74,34,51,34],[74,36,51,36,"source"],[74,42,51,42],[74,47,51,47,"item"],[74,51,51,51],[74,52,51,52,"source"],[74,58,51,59],[75,16,52,16,"hasTVPreferredFocus"],[75,35,52,35],[75,37,52,37,"detail"],[75,43,52,43],[75,45,52,45,"source"],[75,51,52,51],[75,56,52,56,"item"],[75,60,52,60],[75,61,52,61,"source"],[75,67,52,68],[76,16,53,16,"style"],[76,21,53,21],[76,23,53,23,"styles"],[76,29,53,29],[76,30,53,30,"sourceItem"],[76,40,53,41],[77,16,54,16,"textStyle"],[77,25,54,25],[77,27,54,27,"styles"],[77,33,54,33],[77,34,54,34,"sourceItemText"],[78,14,54,49],[78,15,55,15],[78,16,55,16],[79,12,55,16],[80,10,56,14],[80,11,57,11],[80,12,57,12],[81,8,57,12],[81,9,58,14],[82,6,58,15],[82,7,59,12],[83,4,59,13],[83,5,60,11],[83,6,60,12],[84,2,62,0],[84,3,62,1],[85,2,62,2,"exports"],[85,9,62,2],[85,10,62,2,"SourceSelectionModal"],[85,30,62,2],[85,33,62,2,"SourceSelectionModal"],[85,53,62,2],[86,2,64,0],[86,6,64,6,"styles"],[86,12,64,12],[86,15,64,15,"StyleSheet"],[86,38,64,25],[86,39,64,26,"create"],[86,45,64,32],[86,46,64,33],[87,4,65,2,"modalContainer"],[87,18,65,16],[87,20,65,18],[88,6,66,4,"flex"],[88,10,66,8],[88,12,66,10],[88,13,66,11],[89,6,67,4,"flexDirection"],[89,19,67,17],[89,21,67,19],[89,26,67,24],[90,6,68,4,"justifyContent"],[90,20,68,18],[90,22,68,20],[90,32,68,30],[91,6,69,4,"backgroundColor"],[91,21,69,19],[91,23,69,21],[92,4,70,2],[92,5,70,3],[93,4,71,2,"modalContent"],[93,16,71,14],[93,18,71,16],[94,6,72,4,"width"],[94,11,72,9],[94,13,72,11],[94,16,72,14],[95,6,73,4,"height"],[95,12,73,10],[95,14,73,12],[95,20,73,18],[96,6,74,4,"backgroundColor"],[96,21,74,19],[96,23,74,21],[96,44,74,42],[97,6,75,4,"padding"],[97,13,75,11],[97,15,75,13],[98,4,76,2],[98,5,76,3],[99,4,77,2,"modalTitle"],[99,14,77,12],[99,16,77,14],[100,6,78,4,"color"],[100,11,78,9],[100,13,78,11],[100,20,78,18],[101,6,79,4,"marginBottom"],[101,18,79,16],[101,20,79,18],[101,22,79,20],[102,6,80,4,"textAlign"],[102,15,80,13],[102,17,80,15],[102,25,80,23],[103,6,81,4,"fontSize"],[103,14,81,12],[103,16,81,14],[103,18,81,16],[104,6,82,4,"fontWeight"],[104,16,82,14],[104,18,82,16],[105,4,83,2],[105,5,83,3],[106,4,84,2,"sourceList"],[106,14,84,12],[106,16,84,14],[107,6,85,4,"justifyContent"],[107,20,85,18],[107,22,85,20],[108,4,86,2],[108,5,86,3],[109,4,87,2,"sourceItem"],[109,14,87,12],[109,16,87,14],[110,6,88,4,"paddingVertical"],[110,21,88,19],[110,23,88,21],[110,24,88,22],[111,6,89,4,"margin"],[111,12,89,10],[111,14,89,12],[111,15,89,13],[112,6,90,4,"marginLeft"],[112,16,90,14],[112,18,90,16],[112,20,90,18],[113,6,91,4,"marginRight"],[113,17,91,15],[113,19,91,17],[113,20,91,18],[114,6,92,4,"width"],[114,11,92,9],[114,13,92,11],[115,4,93,2],[115,5,93,3],[116,4,94,2,"sourceItemText"],[116,18,94,16],[116,20,94,18],[117,6,95,4,"fontSize"],[117,14,95,12],[117,16,95,14],[118,4,96,2],[119,2,97,0],[119,3,97,1],[119,4,97,2],[120,0,97,3]],"functionMap":{"names":["<global>","SourceSelectionModal","onSelectSource","onClose","FlatList.props.keyExtractor","FlatList.props.renderItem","StyledButton.props.onPress"],"mappings":"AAA;8CCS;yBCI;GDiB;kBEE;GFE;0BGW,iDH;wBIC;yBCG,2BD;aJM;CDM"}},"type":"js/module"}]}