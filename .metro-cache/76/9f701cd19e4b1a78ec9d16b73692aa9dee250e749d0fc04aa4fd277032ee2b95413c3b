{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":50},"end":{"line":3,"column":65,"index":115}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n  'use client';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const {\n      get = true,\n      request = false,\n      ...permissionOptions\n    } = options || {};\n    const getPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":53,"map":[[2,2,1,0],[3,2,2,0],[3,14,2,12],[5,2,2,13,"Object"],[5,8,2,13],[5,9,2,13,"defineProperty"],[5,23,2,13],[5,24,2,13,"exports"],[5,31,2,13],[6,4,2,13,"value"],[6,9,2,13],[7,2,2,13],[8,2,2,13,"exports"],[8,9,2,13],[8,10,2,13,"createPermissionHook"],[8,30,2,13],[8,33,2,13,"createPermissionHook"],[8,53,2,13],[9,2,3,0],[9,6,3,0,"_react"],[9,12,3,0],[9,15,3,0,"require"],[9,22,3,0],[9,23,3,0,"_dependencyMap"],[9,37,3,0],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,2,9,0],[15,11,9,9,"usePermission"],[15,24,9,22,"usePermission"],[15,25,9,23,"methods"],[15,32,9,30],[15,34,9,32,"options"],[15,41,9,39],[15,43,9,41],[16,4,10,4],[16,10,10,10,"isMounted"],[16,19,10,19],[16,22,10,22],[16,26,10,22,"useRef"],[16,39,10,28],[16,41,10,29],[16,45,10,33],[16,46,10,34],[17,4,11,4],[17,10,11,10],[17,11,11,11,"status"],[17,17,11,17],[17,19,11,19,"setStatus"],[17,28,11,28],[17,29,11,29],[17,32,11,32],[17,36,11,32,"useState"],[17,51,11,40],[17,53,11,41],[17,57,11,45],[17,58,11,46],[18,4,12,4],[18,10,12,10],[19,6,12,12,"get"],[19,9,12,15],[19,12,12,18],[19,16,12,22],[20,6,12,24,"request"],[20,13,12,31],[20,16,12,34],[20,21,12,39],[21,6,12,41],[21,9,12,44,"permissionOptions"],[22,4,12,62],[22,5,12,63],[22,8,12,66,"options"],[22,15,12,73],[22,19,12,77],[22,20,12,78],[22,21,12,79],[23,4,13,4],[23,10,13,10,"getPermission"],[23,23,13,23],[23,26,13,26],[23,30,13,26,"useCallback"],[23,48,13,37],[23,50,13,38],[23,62,13,50],[24,6,14,8],[24,12,14,14,"response"],[24,20,14,22],[24,23,14,25],[24,29,14,31,"methods"],[24,36,14,38],[24,37,14,39,"getMethod"],[24,46,14,48],[24,47,14,49,"Object"],[24,53,14,55],[24,54,14,56,"keys"],[24,58,14,60],[24,59,14,61,"permissionOptions"],[24,76,14,78],[24,77,14,79],[24,78,14,80,"length"],[24,84,14,86],[24,87,14,89],[24,88,14,90],[24,91,14,93,"permissionOptions"],[24,108,14,110],[24,111,14,113,"undefined"],[24,120,14,122],[24,121,14,123],[25,6,15,8],[25,10,15,12,"isMounted"],[25,19,15,21],[25,20,15,22,"current"],[25,27,15,29],[25,29,16,12,"setStatus"],[25,38,16,21],[25,39,16,22,"response"],[25,47,16,30],[25,48,16,31],[26,6,17,8],[26,13,17,15,"response"],[26,21,17,23],[27,4,18,4],[27,5,18,5],[27,7,18,7],[27,8,18,8,"methods"],[27,15,18,15],[27,16,18,16,"getMethod"],[27,25,18,25],[27,26,18,26],[27,27,18,27],[28,4,19,4],[28,10,19,10,"requestPermission"],[28,27,19,27],[28,30,19,30],[28,34,19,30,"useCallback"],[28,52,19,41],[28,54,19,42],[28,66,19,54],[29,6,20,8],[29,12,20,14,"response"],[29,20,20,22],[29,23,20,25],[29,29,20,31,"methods"],[29,36,20,38],[29,37,20,39,"requestMethod"],[29,50,20,52],[29,51,20,53,"Object"],[29,57,20,59],[29,58,20,60,"keys"],[29,62,20,64],[29,63,20,65,"permissionOptions"],[29,80,20,82],[29,81,20,83],[29,82,20,84,"length"],[29,88,20,90],[29,91,20,93],[29,92,20,94],[29,95,20,97,"permissionOptions"],[29,112,20,114],[29,115,20,117,"undefined"],[29,124,20,126],[29,125,20,127],[30,6,21,8],[30,10,21,12,"isMounted"],[30,19,21,21],[30,20,21,22,"current"],[30,27,21,29],[30,29,22,12,"setStatus"],[30,38,22,21],[30,39,22,22,"response"],[30,47,22,30],[30,48,22,31],[31,6,23,8],[31,13,23,15,"response"],[31,21,23,23],[32,4,24,4],[32,5,24,5],[32,7,24,7],[32,8,24,8,"methods"],[32,15,24,15],[32,16,24,16,"requestMethod"],[32,29,24,29],[32,30,24,30],[32,31,24,31],[33,4,25,4],[33,8,25,4,"useEffect"],[33,24,25,13],[33,26,25,14],[33,35,25,23,"runMethods"],[33,45,25,33,"runMethods"],[33,46,25,33],[33,48,25,36],[34,6,26,8],[34,10,26,12,"request"],[34,17,26,19],[34,19,27,12,"requestPermission"],[34,36,27,29],[34,37,27,30],[34,38,27,31],[35,6,28,8],[35,10,28,12],[35,11,28,13,"request"],[35,18,28,20],[35,22,28,24,"get"],[35,25,28,27],[35,27,29,12,"getPermission"],[35,40,29,25],[35,41,29,26],[35,42,29,27],[36,4,30,4],[36,5,30,5],[36,7,30,7],[36,8,30,8,"get"],[36,11,30,11],[36,13,30,13,"request"],[36,20,30,20],[36,22,30,22,"requestPermission"],[36,39,30,39],[36,41,30,41,"getPermission"],[36,54,30,54],[36,55,30,55],[36,56,30,56],[37,4,31,4],[38,4,32,4],[38,8,32,4,"useEffect"],[38,24,32,13],[38,26,32,14],[38,35,32,23,"didMount"],[38,43,32,31,"didMount"],[38,44,32,31],[38,46,32,34],[39,6,33,8,"isMounted"],[39,15,33,17],[39,16,33,18,"current"],[39,23,33,25],[39,26,33,28],[39,30,33,32],[40,6,34,8],[40,13,34,15],[40,19,34,21],[41,8,35,12,"isMounted"],[41,17,35,21],[41,18,35,22,"current"],[41,25,35,29],[41,28,35,32],[41,33,35,37],[42,6,36,8],[42,7,36,9],[43,4,37,4],[43,5,37,5],[43,7,37,7],[43,9,37,9],[43,10,37,10],[44,4,38,4],[44,11,38,11],[44,12,38,12,"status"],[44,18,38,18],[44,20,38,20,"requestPermission"],[44,37,38,37],[44,39,38,39,"getPermission"],[44,52,38,52],[44,53,38,53],[45,2,39,0],[46,2,40,0],[47,0,41,0],[48,0,42,0],[49,0,43,0],[50,2,44,7],[50,11,44,16,"createPermissionHook"],[50,31,44,36,"createPermissionHook"],[50,32,44,37,"methods"],[50,39,44,44],[50,41,44,46],[51,4,45,4],[51,11,45,12,"options"],[51,18,45,19],[51,22,45,24,"usePermission"],[51,35,45,37],[51,36,45,38,"methods"],[51,43,45,45],[51,45,45,47,"options"],[51,52,45,54],[51,53,45,55],[52,2,46,0],[53,0,46,1]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACQ;sCCI;KDK;0CEC;KFK;cGC;KHK;cIE;eCE;SDE;KJC;CDE;OOK;WDC,4CC;CPC"}},"type":"js/module"}]}