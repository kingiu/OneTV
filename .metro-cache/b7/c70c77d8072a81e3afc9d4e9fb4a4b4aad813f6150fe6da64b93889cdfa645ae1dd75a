{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":167,"column":0,"index":4816}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":0,"index":138},"end":{"line":8,"column":31,"index":169}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":171},"end":{"line":13,"column":36,"index":294}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./useOnPreventRemove","data":{"asyncType":null,"locs":[{"start":{"line":16,"column":0,"index":405},"end":{"line":16,"column":79,"index":484}}],"key":"bjcmesK2D9GMO5sMa7zUpDYJFA8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnAction;\n  var React = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _NavigationBuilderContext = _interopRequireDefault(require(_dependencyMap[2], \"./NavigationBuilderContext\"));\n  var _useOnPreventRemove = _interopRequireWildcard(require(_dependencyMap[3], \"./useOnPreventRemove\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  /**\n   * Hook to handle actions for a navigator, including state updates and bubbling.\n   *\n   * Bubbling an action is achieved in 2 ways:\n   * 1. To bubble action to parent, we expose the action handler in context and then access the parent context\n   * 2. To bubble action to child, child adds event listeners subscribing to actions from parent\n   *\n   * When the action handler handles as action, it returns `true`, otherwise `false`.\n   */\n  function useOnAction(_ref) {\n    var router = _ref.router,\n      getState = _ref.getState,\n      setState = _ref.setState,\n      key = _ref.key,\n      actionListeners = _ref.actionListeners,\n      beforeRemoveListeners = _ref.beforeRemoveListeners,\n      routerConfigOptions = _ref.routerConfigOptions,\n      emitter = _ref.emitter;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      onActionParent = _React$useContext.onAction,\n      onRouteFocusParent = _React$useContext.onRouteFocus,\n      addListenerParent = _React$useContext.addListener,\n      onDispatchAction = _React$useContext.onDispatchAction;\n    var routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(function () {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    var onAction = React.useCallback(function (action) {\n      var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      var state = getState();\n\n      // Since actions can bubble both up and down, they could come to the same navigator again\n      // We keep track of navigators which have already tried to handle the action and return if it's already visited\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n      visitedNavigators.add(state.key);\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n\n        // If a target is specified and set to current navigator, the action shouldn't bubble\n        // So instead of `null`, we use the state object for such cases to signal that action was handled\n        result = result === null && action.target === state.key ? state : result;\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n          if (state !== result) {\n            var isPrevented = (0, _useOnPreventRemove.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n            if (isPrevented) {\n              return true;\n            }\n            setState(result);\n          }\n          if (onRouteFocusParent !== undefined) {\n            // Some actions such as `NAVIGATE` also want to bring the navigated route to focus in the whole tree\n            // This means we need to focus all of the parent navigators of this navigator as well\n            var shouldFocus = router.shouldActionChangeFocus(action);\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n          return true;\n        }\n      }\n      if (onActionParent !== undefined) {\n        // Bubble action to the parent if the current navigator didn't handle it\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      // If the action wasn't handled by current navigator or a parent navigator, let children handle it\n      for (var i = actionListeners.length - 1; i >= 0; i--) {\n        var listener = actionListeners[i];\n        if (listener(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemove.default)({\n      getState,\n      emitter,\n      beforeRemoveListeners\n    });\n    React.useEffect(function () {\n      return addListenerParent?.('action', onAction);\n    }, [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":100,"map":[[7,2,8,0],[7,6,8,0,"React"],[7,11,8,0],[7,14,8,0,"_interopRequireWildcard"],[7,37,8,0],[7,38,8,0,"require"],[7,45,8,0],[7,46,8,0,"_dependencyMap"],[7,60,8,0],[8,2,10,0],[8,6,10,0,"_NavigationBuilderContext"],[8,31,10,0],[8,34,10,0,"_interopRequireDefault"],[8,56,10,0],[8,57,10,0,"require"],[8,64,10,0],[8,65,10,0,"_dependencyMap"],[8,79,10,0],[9,2,16,0],[9,6,16,0,"_useOnPreventRemove"],[9,25,16,0],[9,28,16,0,"_interopRequireWildcard"],[9,51,16,0],[9,52,16,0,"require"],[9,59,16,0],[9,60,16,0,"_dependencyMap"],[9,74,16,0],[10,2,16,79],[10,11,16,79,"_interopRequireWildcard"],[10,35,16,79,"e"],[10,36,16,79],[10,38,16,79,"t"],[10,39,16,79],[10,68,16,79,"WeakMap"],[10,75,16,79],[10,81,16,79,"r"],[10,82,16,79],[10,89,16,79,"WeakMap"],[10,96,16,79],[10,100,16,79,"n"],[10,101,16,79],[10,108,16,79,"WeakMap"],[10,115,16,79],[10,127,16,79,"_interopRequireWildcard"],[10,150,16,79],[10,162,16,79,"_interopRequireWildcard"],[10,163,16,79,"e"],[10,164,16,79],[10,166,16,79,"t"],[10,167,16,79],[10,176,16,79,"t"],[10,177,16,79],[10,181,16,79,"e"],[10,182,16,79],[10,186,16,79,"e"],[10,187,16,79],[10,188,16,79,"__esModule"],[10,198,16,79],[10,207,16,79,"e"],[10,208,16,79],[10,214,16,79,"o"],[10,215,16,79],[10,217,16,79,"i"],[10,218,16,79],[10,220,16,79,"f"],[10,221,16,79],[10,226,16,79,"__proto__"],[10,235,16,79],[10,243,16,79,"default"],[10,250,16,79],[10,252,16,79,"e"],[10,253,16,79],[10,270,16,79,"e"],[10,271,16,79],[10,294,16,79,"e"],[10,295,16,79],[10,320,16,79,"e"],[10,321,16,79],[10,330,16,79,"f"],[10,331,16,79],[10,337,16,79,"o"],[10,338,16,79],[10,341,16,79,"t"],[10,342,16,79],[10,345,16,79,"n"],[10,346,16,79],[10,349,16,79,"r"],[10,350,16,79],[10,358,16,79,"o"],[10,359,16,79],[10,360,16,79,"has"],[10,363,16,79],[10,364,16,79,"e"],[10,365,16,79],[10,375,16,79,"o"],[10,376,16,79],[10,377,16,79,"get"],[10,380,16,79],[10,381,16,79,"e"],[10,382,16,79],[10,385,16,79,"o"],[10,386,16,79],[10,387,16,79,"set"],[10,390,16,79],[10,391,16,79,"e"],[10,392,16,79],[10,394,16,79,"f"],[10,395,16,79],[10,409,16,79,"_t"],[10,411,16,79],[10,415,16,79,"e"],[10,416,16,79],[10,432,16,79,"_t"],[10,434,16,79],[10,441,16,79,"hasOwnProperty"],[10,455,16,79],[10,456,16,79,"call"],[10,460,16,79],[10,461,16,79,"e"],[10,462,16,79],[10,464,16,79,"_t"],[10,466,16,79],[10,473,16,79,"i"],[10,474,16,79],[10,478,16,79,"o"],[10,479,16,79],[10,482,16,79,"Object"],[10,488,16,79],[10,489,16,79,"defineProperty"],[10,503,16,79],[10,508,16,79,"Object"],[10,514,16,79],[10,515,16,79,"getOwnPropertyDescriptor"],[10,539,16,79],[10,540,16,79,"e"],[10,541,16,79],[10,543,16,79,"_t"],[10,545,16,79],[10,552,16,79,"i"],[10,553,16,79],[10,554,16,79,"get"],[10,557,16,79],[10,561,16,79,"i"],[10,562,16,79],[10,563,16,79,"set"],[10,566,16,79],[10,570,16,79,"o"],[10,571,16,79],[10,572,16,79,"f"],[10,573,16,79],[10,575,16,79,"_t"],[10,577,16,79],[10,579,16,79,"i"],[10,580,16,79],[10,584,16,79,"f"],[10,585,16,79],[10,586,16,79,"_t"],[10,588,16,79],[10,592,16,79,"e"],[10,593,16,79],[10,594,16,79,"_t"],[10,596,16,79],[10,607,16,79,"f"],[10,608,16,79],[10,613,16,79,"e"],[10,614,16,79],[10,616,16,79,"t"],[10,617,16,79],[11,2,29,0],[12,0,30,0],[13,0,31,0],[14,0,32,0],[15,0,33,0],[16,0,34,0],[17,0,35,0],[18,0,36,0],[19,0,37,0],[20,2,38,15],[20,11,38,24,"useOnAction"],[20,22,38,35,"useOnAction"],[20,23,38,35,"_ref"],[20,27,38,35],[20,29,47,12],[21,4,47,12],[21,8,39,2,"router"],[21,14,39,8],[21,17,39,8,"_ref"],[21,21,39,8],[21,22,39,2,"router"],[21,28,39,8],[22,6,40,2,"getState"],[22,14,40,10],[22,17,40,10,"_ref"],[22,21,40,10],[22,22,40,2,"getState"],[22,30,40,10],[23,6,41,2,"setState"],[23,14,41,10],[23,17,41,10,"_ref"],[23,21,41,10],[23,22,41,2,"setState"],[23,30,41,10],[24,6,42,2,"key"],[24,9,42,5],[24,12,42,5,"_ref"],[24,16,42,5],[24,17,42,2,"key"],[24,20,42,5],[25,6,43,2,"actionListeners"],[25,21,43,17],[25,24,43,17,"_ref"],[25,28,43,17],[25,29,43,2,"actionListeners"],[25,44,43,17],[26,6,44,2,"beforeRemoveListeners"],[26,27,44,23],[26,30,44,23,"_ref"],[26,34,44,23],[26,35,44,2,"beforeRemoveListeners"],[26,56,44,23],[27,6,45,2,"routerConfigOptions"],[27,25,45,21],[27,28,45,21,"_ref"],[27,32,45,21],[27,33,45,2,"routerConfigOptions"],[27,52,45,21],[28,6,46,2,"emitter"],[28,13,46,9],[28,16,46,9,"_ref"],[28,20,46,9],[28,21,46,2,"emitter"],[28,28,46,9],[29,4,48,2],[29,8,48,2,"_React$useContext"],[29,25,48,2],[29,28,53,6,"React"],[29,33,53,11],[29,34,53,12,"useContext"],[29,44,53,22],[29,45,53,23,"NavigationBuilderContext"],[29,78,53,47],[29,79,53,48],[30,6,49,14,"onActionParent"],[30,20,49,28],[30,23,49,28,"_React$useContext"],[30,40,49,28],[30,41,49,4,"onAction"],[30,49,49,12],[31,6,50,18,"onRouteFocusParent"],[31,24,50,36],[31,27,50,36,"_React$useContext"],[31,44,50,36],[31,45,50,4,"onRouteFocus"],[31,57,50,16],[32,6,51,17,"addListenerParent"],[32,23,51,34],[32,26,51,34,"_React$useContext"],[32,43,51,34],[32,44,51,4,"addListener"],[32,55,51,15],[33,6,52,4,"onDispatchAction"],[33,22,52,20],[33,25,52,20,"_React$useContext"],[33,42,52,20],[33,43,52,4,"onDispatchAction"],[33,59,52,20],[34,4,55,2],[34,8,55,8,"routerConfigOptionsRef"],[34,30,55,30],[34,33,56,4,"React"],[34,38,56,9],[34,39,56,10,"useRef"],[34,45,56,16],[34,46,56,38,"routerConfigOptions"],[34,65,56,57],[34,66,56,58],[35,4,58,2,"React"],[35,9,58,7],[35,10,58,8,"useEffect"],[35,19,58,17],[35,20,58,18],[35,32,58,24],[36,6,59,4,"routerConfigOptionsRef"],[36,28,59,26],[36,29,59,27,"current"],[36,36,59,34],[36,39,59,37,"routerConfigOptions"],[36,58,59,56],[37,4,60,2],[37,5,60,3],[37,6,60,4],[38,4,62,2],[38,8,62,8,"onAction"],[38,16,62,16],[38,19,62,19,"React"],[38,24,62,24],[38,25,62,25,"useCallback"],[38,36,62,36],[38,37,63,4],[38,47,64,6,"action"],[38,53,64,30],[38,55,66,9],[39,6,66,9],[39,10,65,6,"visitedNavigators"],[39,27,65,36],[39,30,65,36,"arguments"],[39,39,65,36],[39,40,65,36,"length"],[39,46,65,36],[39,54,65,36,"arguments"],[39,63,65,36],[39,71,65,36,"undefined"],[39,80,65,36],[39,83,65,36,"arguments"],[39,92,65,36],[39,98,65,39],[39,102,65,43,"Set"],[39,105,65,46],[39,106,65,55],[39,107,65,56],[40,6,67,6],[40,10,67,12,"state"],[40,15,67,17],[40,18,67,20,"getState"],[40,26,67,28],[40,27,67,29],[40,28,67,30],[42,6,69,6],[43,6,70,6],[44,6,71,6],[44,10,71,10,"visitedNavigators"],[44,27,71,27],[44,28,71,28,"has"],[44,31,71,31],[44,32,71,32,"state"],[44,37,71,37],[44,38,71,38,"key"],[44,41,71,41],[44,42,71,42],[44,44,71,44],[45,8,72,8],[45,15,72,15],[45,20,72,20],[46,6,73,6],[47,6,75,6,"visitedNavigators"],[47,23,75,23],[47,24,75,24,"add"],[47,27,75,27],[47,28,75,28,"state"],[47,33,75,33],[47,34,75,34,"key"],[47,37,75,37],[47,38,75,38],[48,6,77,6],[48,10,77,10],[48,17,77,17,"action"],[48,23,77,23],[48,24,77,24,"target"],[48,30,77,30],[48,35,77,35],[48,43,77,43],[48,47,77,47,"action"],[48,53,77,53],[48,54,77,54,"target"],[48,60,77,60],[48,65,77,65,"state"],[48,70,77,70],[48,71,77,71,"key"],[48,74,77,74],[48,76,77,76],[49,8,78,8],[49,12,78,12,"result"],[49,18,78,18],[49,21,78,21,"router"],[49,27,78,27],[49,28,78,28,"getStateForAction"],[49,45,78,45],[49,46,79,10,"state"],[49,51,79,15],[49,53,80,10,"action"],[49,59,80,16],[49,61,81,10,"routerConfigOptionsRef"],[49,83,81,32],[49,84,81,33,"current"],[49,91,82,8],[49,92,82,9],[51,8,84,8],[52,8,85,8],[53,8,86,8,"result"],[53,14,86,14],[53,17,87,10,"result"],[53,23,87,16],[53,28,87,21],[53,32,87,25],[53,36,87,29,"action"],[53,42,87,35],[53,43,87,36,"target"],[53,49,87,42],[53,54,87,47,"state"],[53,59,87,52],[53,60,87,53,"key"],[53,63,87,56],[53,66,87,59,"state"],[53,71,87,64],[53,74,87,67,"result"],[53,80,87,73],[54,8,89,8],[54,12,89,12,"result"],[54,18,89,18],[54,23,89,23],[54,27,89,27],[54,29,89,29],[55,10,90,10,"onDispatchAction"],[55,26,90,26],[55,27,90,27,"action"],[55,33,90,33],[55,35,90,35,"state"],[55,40,90,40],[55,45,90,45,"result"],[55,51,90,51],[55,52,90,52],[56,10,92,10],[56,14,92,14,"state"],[56,19,92,19],[56,24,92,24,"result"],[56,30,92,30],[56,32,92,32],[57,12,93,12],[57,16,93,18,"isPrevented"],[57,27,93,29],[57,30,93,32],[57,34,93,32,"shouldPreventRemove"],[57,73,93,51],[57,75,94,14,"emitter"],[57,82,94,21],[57,84,95,14,"beforeRemoveListeners"],[57,105,95,35],[57,107,96,14,"state"],[57,112,96,19],[57,113,96,20,"routes"],[57,119,96,26],[57,121,97,14,"result"],[57,127,97,20],[57,128,97,21,"routes"],[57,134,97,27],[57,136,98,14,"action"],[57,142,99,12],[57,143,99,13],[58,12,101,12],[58,16,101,16,"isPrevented"],[58,27,101,27],[58,29,101,29],[59,14,102,14],[59,21,102,21],[59,25,102,25],[60,12,103,12],[61,12,105,12,"setState"],[61,20,105,20],[61,21,105,21,"result"],[61,27,105,27],[61,28,105,28],[62,10,106,10],[63,10,108,10],[63,14,108,14,"onRouteFocusParent"],[63,32,108,32],[63,37,108,37,"undefined"],[63,46,108,46],[63,48,108,48],[64,12,109,12],[65,12,110,12],[66,12,111,12],[66,16,111,18,"shouldFocus"],[66,27,111,29],[66,30,111,32,"router"],[66,36,111,38],[66,37,111,39,"shouldActionChangeFocus"],[66,60,111,62],[66,61,111,63,"action"],[66,67,111,69],[66,68,111,70],[67,12,113,12],[67,16,113,16,"shouldFocus"],[67,27,113,27],[67,31,113,31,"key"],[67,34,113,34],[67,39,113,39,"undefined"],[67,48,113,48],[67,50,113,50],[68,14,114,14,"onRouteFocusParent"],[68,32,114,32],[68,33,114,33,"key"],[68,36,114,36],[68,37,114,37],[69,12,115,12],[70,10,116,10],[71,10,118,10],[71,17,118,17],[71,21,118,21],[72,8,119,8],[73,6,120,6],[74,6,122,6],[74,10,122,10,"onActionParent"],[74,24,122,24],[74,29,122,29,"undefined"],[74,38,122,38],[74,40,122,40],[75,8,123,8],[76,8,124,8],[76,12,124,12,"onActionParent"],[76,26,124,26],[76,27,124,27,"action"],[76,33,124,33],[76,35,124,35,"visitedNavigators"],[76,52,124,52],[76,53,124,53],[76,55,124,55],[77,10,125,10],[77,17,125,17],[77,21,125,21],[78,8,126,8],[79,6,127,6],[81,6,129,6],[82,6,130,6],[82,11,130,11],[82,15,130,15,"i"],[82,16,130,16],[82,19,130,19,"actionListeners"],[82,34,130,34],[82,35,130,35,"length"],[82,41,130,41],[82,44,130,44],[82,45,130,45],[82,47,130,47,"i"],[82,48,130,48],[82,52,130,52],[82,53,130,53],[82,55,130,55,"i"],[82,56,130,56],[82,58,130,58],[82,60,130,60],[83,8,131,8],[83,12,131,14,"listener"],[83,20,131,22],[83,23,131,25,"actionListeners"],[83,38,131,40],[83,39,131,41,"i"],[83,40,131,42],[83,41,131,43],[84,8,133,8],[84,12,133,12,"listener"],[84,20,133,20],[84,21,133,21,"action"],[84,27,133,27],[84,29,133,29,"visitedNavigators"],[84,46,133,46],[84,47,133,47],[84,49,133,49],[85,10,134,10],[85,17,134,17],[85,21,134,21],[86,8,135,8],[87,6,136,6],[88,6,138,6],[88,13,138,13],[88,18,138,18],[89,4,139,4],[89,5,139,5],[89,7,140,4],[89,8,141,6,"actionListeners"],[89,23,141,21],[89,25,142,6,"beforeRemoveListeners"],[89,46,142,27],[89,48,143,6,"emitter"],[89,55,143,13],[89,57,144,6,"getState"],[89,65,144,14],[89,67,145,6,"key"],[89,70,145,9],[89,72,146,6,"onActionParent"],[89,86,146,20],[89,88,147,6,"onDispatchAction"],[89,104,147,22],[89,106,148,6,"onRouteFocusParent"],[89,124,148,24],[89,126,149,6,"router"],[89,132,149,12],[89,134,150,6,"setState"],[89,142,150,14],[89,143,152,2],[89,144,152,3],[90,4,154,2],[90,8,154,2,"useOnPreventRemove"],[90,35,154,20],[90,37,154,21],[91,6,155,4,"getState"],[91,14,155,12],[92,6,156,4,"emitter"],[92,13,156,11],[93,6,157,4,"beforeRemoveListeners"],[94,4,158,2],[94,5,158,3],[94,6,158,4],[95,4,160,2,"React"],[95,9,160,7],[95,10,160,8,"useEffect"],[95,19,160,17],[95,20,161,4],[96,6,161,4],[96,13,161,10,"addListenerParent"],[96,30,161,27],[96,33,161,30],[96,41,161,38],[96,43,161,40,"onAction"],[96,51,161,48],[96,52,161,49],[97,4,161,49],[97,7,162,4],[97,8,162,5,"addListenerParent"],[97,25,162,22],[97,27,162,24,"onAction"],[97,35,162,32],[97,36,163,2],[97,37,163,3],[98,4,165,2],[98,11,165,9,"onAction"],[98,19,165,17],[99,2,166,0],[100,0,166,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","onAction"],"mappings":"AAA;eCqC;kBCoB;GDE;IEG;KF4E;ICsB,6CD;CDK"}},"type":"js/module"}]}