{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":100,"column":0,"index":2801}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":89},"end":{"line":5,"column":31,"index":120}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":0,"index":122},"end":{"line":9,"column":36,"index":222}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./NavigationRouteContext","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":223},"end":{"line":10,"column":62,"index":285}}],"key":"HeyVDSY+CsJeYUdsxrU2U3K5dPs="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0]);\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnPreventRemove;\n  exports.shouldPreventRemove = undefined;\n  var React = _interopRequireWildcard(require(_dependencyMap[1]));\n  var _NavigationBuilderContext = _interopRequireDefault(require(_dependencyMap[2]));\n  var _NavigationRouteContext = _interopRequireDefault(require(_dependencyMap[3]));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = function (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.default);\n    var routeKey = route?.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":73,"map":[[8,2,5,0],[8,6,5,0,"React"],[8,11,5,0],[8,14,5,0,"_interopRequireWildcard"],[8,37,5,0],[8,38,5,0,"require"],[8,45,5,0],[8,46,5,0,"_dependencyMap"],[8,60,5,0],[9,2,7,0],[9,6,7,0,"_NavigationBuilderContext"],[9,31,7,0],[9,34,7,0,"_interopRequireDefault"],[9,56,7,0],[9,57,7,0,"require"],[9,64,7,0],[9,65,7,0,"_dependencyMap"],[9,79,7,0],[10,2,10,0],[10,6,10,0,"_NavigationRouteContext"],[10,29,10,0],[10,32,10,0,"_interopRequireDefault"],[10,54,10,0],[10,55,10,0,"require"],[10,62,10,0],[10,63,10,0,"_dependencyMap"],[10,77,10,0],[11,2,10,62],[11,11,10,62,"_interopRequireWildcard"],[11,35,10,62,"e"],[11,36,10,62],[11,38,10,62,"t"],[11,39,10,62],[11,68,10,62,"WeakMap"],[11,75,10,62],[11,81,10,62,"r"],[11,82,10,62],[11,89,10,62,"WeakMap"],[11,96,10,62],[11,100,10,62,"n"],[11,101,10,62],[11,108,10,62,"WeakMap"],[11,115,10,62],[11,127,10,62,"_interopRequireWildcard"],[11,150,10,62],[11,162,10,62,"_interopRequireWildcard"],[11,163,10,62,"e"],[11,164,10,62],[11,166,10,62,"t"],[11,167,10,62],[11,176,10,62,"t"],[11,177,10,62],[11,181,10,62,"e"],[11,182,10,62],[11,186,10,62,"e"],[11,187,10,62],[11,188,10,62,"__esModule"],[11,198,10,62],[11,207,10,62,"e"],[11,208,10,62],[11,214,10,62,"o"],[11,215,10,62],[11,217,10,62,"i"],[11,218,10,62],[11,220,10,62,"f"],[11,221,10,62],[11,226,10,62,"__proto__"],[11,235,10,62],[11,243,10,62,"default"],[11,250,10,62],[11,252,10,62,"e"],[11,253,10,62],[11,270,10,62,"e"],[11,271,10,62],[11,294,10,62,"e"],[11,295,10,62],[11,320,10,62,"e"],[11,321,10,62],[11,330,10,62,"f"],[11,331,10,62],[11,337,10,62,"o"],[11,338,10,62],[11,341,10,62,"t"],[11,342,10,62],[11,345,10,62,"n"],[11,346,10,62],[11,349,10,62,"r"],[11,350,10,62],[11,358,10,62,"o"],[11,359,10,62],[11,360,10,62,"has"],[11,363,10,62],[11,364,10,62,"e"],[11,365,10,62],[11,375,10,62,"o"],[11,376,10,62],[11,377,10,62,"get"],[11,380,10,62],[11,381,10,62,"e"],[11,382,10,62],[11,385,10,62,"o"],[11,386,10,62],[11,387,10,62,"set"],[11,390,10,62],[11,391,10,62,"e"],[11,392,10,62],[11,394,10,62,"f"],[11,395,10,62],[11,409,10,62,"_t"],[11,411,10,62],[11,415,10,62,"e"],[11,416,10,62],[11,432,10,62,"_t"],[11,434,10,62],[11,441,10,62,"hasOwnProperty"],[11,455,10,62],[11,456,10,62,"call"],[11,460,10,62],[11,461,10,62,"e"],[11,462,10,62],[11,464,10,62,"_t"],[11,466,10,62],[11,473,10,62,"i"],[11,474,10,62],[11,478,10,62,"o"],[11,479,10,62],[11,482,10,62,"Object"],[11,488,10,62],[11,489,10,62,"defineProperty"],[11,503,10,62],[11,508,10,62,"Object"],[11,514,10,62],[11,515,10,62,"getOwnPropertyDescriptor"],[11,539,10,62],[11,540,10,62,"e"],[11,541,10,62],[11,543,10,62,"_t"],[11,545,10,62],[11,552,10,62,"i"],[11,553,10,62],[11,554,10,62,"get"],[11,557,10,62],[11,561,10,62,"i"],[11,562,10,62],[11,563,10,62,"set"],[11,566,10,62],[11,570,10,62,"o"],[11,571,10,62],[11,572,10,62,"f"],[11,573,10,62],[11,575,10,62,"_t"],[11,577,10,62],[11,579,10,62,"i"],[11,580,10,62],[11,584,10,62,"f"],[11,585,10,62],[11,586,10,62,"_t"],[11,588,10,62],[11,592,10,62,"e"],[11,593,10,62],[11,594,10,62,"_t"],[11,596,10,62],[11,607,10,62,"f"],[11,608,10,62],[11,613,10,62,"e"],[11,614,10,62],[11,616,10,62,"t"],[11,617,10,62],[12,2,20,0],[12,6,20,6,"VISITED_ROUTE_KEYS"],[12,24,20,24],[12,27,20,27,"Symbol"],[12,33,20,33],[12,34,20,34],[12,54,20,54],[12,55,20,55],[13,2,22,7],[13,6,22,13,"shouldPreventRemove"],[13,25,22,32],[13,28,22,35],[13,37,22,35,"shouldPreventRemove"],[13,38,23,2,"emitter"],[13,45,23,52],[13,47,24,2,"beforeRemoveListeners"],[13,68,24,78],[13,70,25,2,"currentRoutes"],[13,83,25,34],[13,85,26,2,"nextRoutes"],[13,95,26,44],[13,97,27,2,"action"],[13,103,27,26],[13,105,28,5],[14,4,29,2],[14,8,29,8,"nextRouteKeys"],[14,21,29,21],[14,24,29,24,"nextRoutes"],[14,34,29,34],[14,35,29,35,"map"],[14,38,29,38],[14,39,29,39],[14,49,29,40,"route"],[14,54,29,45],[15,6,29,45],[15,13,29,50,"route"],[15,18,29,55],[15,19,29,56,"key"],[15,22,29,59],[16,4,29,59],[16,6,29,60],[18,4,31,2],[19,4,32,2],[19,8,32,8,"removedRoutes"],[19,21,32,21],[19,24,32,24,"currentRoutes"],[19,37,32,37],[19,38,33,5,"filter"],[19,44,33,11],[19,45,33,12],[19,55,33,13,"route"],[19,60,33,18],[20,6,33,18],[20,13,33,23],[20,14,33,24,"nextRouteKeys"],[20,27,33,37],[20,28,33,38,"includes"],[20,36,33,46],[20,37,33,47,"route"],[20,42,33,52],[20,43,33,53,"key"],[20,46,33,56],[20,47,33,57],[21,4,33,57],[21,6,33,58],[21,7,34,5,"reverse"],[21,14,34,12],[21,15,34,13],[21,16,34,14],[22,4,36,2],[22,8,36,8,"visitedRouteKeys"],[22,24,36,37],[23,4,37,4],[24,4,38,4,"action"],[24,10,38,10],[24,11,38,11,"VISITED_ROUTE_KEYS"],[24,29,38,29],[24,30,38,30],[24,34,38,34],[24,38,38,38,"Set"],[24,41,38,41],[24,42,38,50],[24,43,38,51],[25,4,40,2],[25,8,40,8,"beforeRemoveAction"],[25,26,40,26],[25,29,40,29],[26,6,41,4],[26,9,41,7,"action"],[26,15,41,13],[27,6,42,4],[27,7,42,5,"VISITED_ROUTE_KEYS"],[27,25,42,23],[27,28,42,26,"visitedRouteKeys"],[28,4,43,2],[28,5,43,3],[29,4,45,2],[29,9,45,7],[29,13,45,13,"route"],[29,18,45,18],[29,22,45,22,"removedRoutes"],[29,35,45,35],[29,37,45,37],[30,6,46,4],[30,10,46,8,"visitedRouteKeys"],[30,26,46,24],[30,27,46,25,"has"],[30,30,46,28],[30,31,46,29,"route"],[30,36,46,34],[30,37,46,35,"key"],[30,40,46,38],[30,41,46,39],[30,43,46,41],[31,8,47,6],[32,8,48,6],[33,6,49,4],[35,6,51,4],[36,6,52,4],[36,10,52,10,"isPrevented"],[36,21,52,21],[36,24,52,24,"beforeRemoveListeners"],[36,45,52,45],[36,46,52,46,"route"],[36,51,52,51],[36,52,52,52,"key"],[36,55,52,55],[36,56,52,56],[36,59,52,59,"beforeRemoveAction"],[36,77,52,77],[36,78,52,78],[37,6,54,4],[37,10,54,8,"isPrevented"],[37,21,54,19],[37,23,54,21],[38,8,55,6],[38,15,55,13],[38,19,55,17],[39,6,56,4],[40,6,58,4,"visitedRouteKeys"],[40,22,58,20],[40,23,58,21,"add"],[40,26,58,24],[40,27,58,25,"route"],[40,32,58,30],[40,33,58,31,"key"],[40,36,58,34],[40,37,58,35],[41,6,60,4],[41,10,60,10,"event"],[41,15,60,15],[41,18,60,18,"emitter"],[41,25,60,25],[41,26,60,26,"emit"],[41,30,60,30],[41,31,60,31],[42,8,61,6,"type"],[42,12,61,10],[42,14,61,12],[42,28,61,26],[43,8,62,6,"target"],[43,14,62,12],[43,16,62,14,"route"],[43,21,62,19],[43,22,62,20,"key"],[43,25,62,23],[44,8,63,6,"data"],[44,12,63,10],[44,14,63,12],[45,10,63,14,"action"],[45,16,63,20],[45,18,63,22,"beforeRemoveAction"],[46,8,63,41],[46,9,63,42],[47,8,64,6,"canPreventDefault"],[47,25,64,23],[47,27,64,25],[48,6,65,4],[48,7,65,5],[48,8,65,6],[49,6,67,4],[49,10,67,8,"event"],[49,15,67,13],[49,16,67,14,"defaultPrevented"],[49,32,67,30],[49,34,67,32],[50,8,68,6],[50,15,68,13],[50,19,68,17],[51,6,69,4],[52,4,70,2],[53,4,72,2],[53,11,72,9],[53,16,72,14],[54,2,73,0],[54,3,73,1],[55,2,73,2,"exports"],[55,9,73,2],[55,10,73,2,"shouldPreventRemove"],[55,29,73,2],[55,32,73,2,"shouldPreventRemove"],[55,51,73,2],[56,2,75,15],[56,11,75,24,"useOnPreventRemove"],[56,29,75,42,"useOnPreventRemove"],[56,30,75,42,"_ref"],[56,34,75,42],[56,36,79,12],[57,4,79,12],[57,8,76,2,"getState"],[57,16,76,10],[57,19,76,10,"_ref"],[57,23,76,10],[57,24,76,2,"getState"],[57,32,76,10],[58,6,77,2,"emitter"],[58,13,77,9],[58,16,77,9,"_ref"],[58,20,77,9],[58,21,77,2,"emitter"],[58,28,77,9],[59,6,78,2,"beforeRemoveListeners"],[59,27,78,23],[59,30,78,23,"_ref"],[59,34,78,23],[59,35,78,2,"beforeRemoveListeners"],[59,56,78,23],[60,4,80,2],[60,8,80,2,"_React$useContext"],[60,25,80,2],[60,28,80,31,"React"],[60,33,80,36],[60,34,80,37,"useContext"],[60,44,80,47],[60,45,80,48,"NavigationBuilderContext"],[60,78,80,72],[60,79,80,73],[61,6,80,10,"addKeyedListener"],[61,22,80,26],[61,25,80,26,"_React$useContext"],[61,42,80,26],[61,43,80,10,"addKeyedListener"],[61,59,80,26],[62,4,81,2],[62,8,81,8,"route"],[62,13,81,13],[62,16,81,16,"React"],[62,21,81,21],[62,22,81,22,"useContext"],[62,32,81,32],[62,33,81,33,"NavigationRouteContext"],[62,64,81,55],[62,65,81,56],[63,4,82,2],[63,8,82,8,"routeKey"],[63,16,82,16],[63,19,82,19,"route"],[63,24,82,24],[63,26,82,26,"key"],[63,29,82,29],[64,4,84,2,"React"],[64,9,84,7],[64,10,84,8,"useEffect"],[64,19,84,17],[64,20,84,18],[64,32,84,24],[65,6,85,4],[65,10,85,8,"routeKey"],[65,18,85,16],[65,20,85,18],[66,8,86,6],[66,15,86,13,"addKeyedListener"],[66,31,86,29],[66,34,86,32],[66,48,86,46],[66,50,86,48,"routeKey"],[66,58,86,56],[66,60,86,58],[66,70,86,59,"action"],[66,76,86,65],[66,78,86,70],[67,10,87,8],[67,14,87,14,"state"],[67,19,87,19],[67,22,87,22,"getState"],[67,30,87,30],[67,31,87,31],[67,32,87,32],[68,10,89,8],[68,17,89,15,"shouldPreventRemove"],[68,36,89,34],[68,37,90,10,"emitter"],[68,44,90,17],[68,46,91,10,"beforeRemoveListeners"],[68,67,91,31],[68,69,92,10,"state"],[68,74,92,15],[68,75,92,16,"routes"],[68,81,92,22],[68,83,93,10],[68,85,93,12],[68,87,94,10,"action"],[68,93,95,8],[68,94,95,9],[69,8,96,6],[69,9,96,7],[69,10,96,8],[70,6,97,4],[71,4,98,2],[71,5,98,3],[71,7,98,5],[71,8,98,6,"addKeyedListener"],[71,24,98,22],[71,26,98,24,"beforeRemoveListeners"],[71,47,98,45],[71,49,98,47,"emitter"],[71,56,98,54],[71,58,98,56,"getState"],[71,66,98,64],[71,68,98,66,"routeKey"],[71,76,98,74],[71,77,98,75],[71,78,98,76],[72,2,99,0],[73,0,99,1]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCqB;uCCO,oBD;YEI,6CF;CDwC;eIE;kBCS;0DCE;ODU;GDE;CJC"}},"type":"js/module"}]}