{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"rcd0dMwf8BS2g+8U1wyhIOxtYEo="}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"4pxOr+e+5cSZAdeEKxSt3F7LoKY="}},{"name":"@babel/runtime/helpers/get","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"qjFFB5GnNNadLKzlHyZes/u71/A="}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":71,"column":0,"index":2371}}],"key":"EDnOjopp9yNVawSzfBRsy2dq5dM="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":37,"index":52}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}},{"name":"./Server","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":53},"end":{"line":4,"column":30,"index":83}}],"key":"kscURFll69BfCiEgNMlw7LpVO/4="}},{"name":"./TLSSocket","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":84},"end":{"line":5,"column":36,"index":120}}],"key":"g5Lb1hF3HSesqrxu3SR5OBq0UMA="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _possibleConstructorReturn2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/possibleConstructorReturn\"));\n  var _getPrototypeOf2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/getPrototypeOf\"));\n  var _get2 = _interopRequireDefault(require(_dependencyMap[5], \"@babel/runtime/helpers/get\"));\n  var _inherits2 = _interopRequireDefault(require(_dependencyMap[6], \"@babel/runtime/helpers/inherits\"));\n  var _reactNative = require(_dependencyMap[7], \"react-native\");\n  var _Server2 = _interopRequireDefault(require(_dependencyMap[8], \"./Server\"));\n  var _TLSSocket = _interopRequireDefault(require(_dependencyMap[9], \"./TLSSocket\"));\n  function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }\n  function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function () { return !!t; })(); }\n  function _superPropGet(t, o, e, r) { var p = (0, _get2.default)((0, _getPrototypeOf2.default)(1 & r ? t.prototype : t), o, e); return 2 & r && \"function\" == typeof p ? function (t) { return p.apply(e, t); } : p; }\n  /**\n   * @typedef {object} TLSServerOptions\n   * @property {any} keystore\n   *\n   * @extends {Server}\n   */\n  var TLSServer = exports.default = /*#__PURE__*/function (_Server) {\n    /**\n     * @param {(socket: TLSSocket) => void} [secureConnectionListener] Automatically set as a listener for the `'secureConnection'` event.\n     */\n    function TLSServer(secureConnectionListener) {\n      var _this;\n      (0, _classCallCheck2.default)(this, TLSServer);\n      _this = _callSuper(this, TLSServer);\n      if (secureConnectionListener) _this.on('secureConnection', secureConnectionListener);\n      _this._registerTLSEvents();\n      return _this;\n    }\n\n    /**\n     * @param {TLSServerOptions} options TLS server options\n     */\n    (0, _inherits2.default)(TLSServer, _Server);\n    return (0, _createClass2.default)(TLSServer, [{\n      key: \"setSecureContext\",\n      value: function setSecureContext(options) {\n        /** @private */\n        this._options = {\n          ...options\n        };\n        this._options.keystore = _reactNative.Image.resolveAssetSource(this._options.keystore).uri;\n      }\n\n      /**\n       * Start a server listening for connections.\n       *\n       * This function is asynchronous. When the server starts listening, the `'listening'` event will be emitted.\n       * The last parameter `callback` will be added as a listener for the `'listening'` event.\n       *\n       * The `server.listen()` method can be called again if and only if there was an error during the first\n       * `server.listen()` call or `server.close()` has been called. Otherwise, an `ERR_SERVER_ALREADY_LISTEN`\n       * error will be thrown.\n       *\n       * @param {{ port: number; host: string; reuseAddress?: boolean}} options\n       * @param {() => void} [callback]\n       * @override\n       */\n    }, {\n      key: \"listen\",\n      value: function listen(options, callback) {\n        var newOptions = {\n          ...options\n        };\n        // @ts-ignore\n        newOptions['tls'] = this._options;\n        return _superPropGet(TLSServer, \"listen\", this, 3)([newOptions, callback]);\n      }\n\n      /**\n       * @private\n       */\n    }, {\n      key: \"_registerTLSEvents\",\n      value: function _registerTLSEvents() {\n        var _this2 = this;\n        this._secureConnectionListener = this._eventEmitter.addListener('secureConnection', function (evt) {\n          if (evt.id !== _this2._id) return;\n          var standardSocket = _this2._buildSocket(evt.info);\n          standardSocket._unregisterEvents();\n          var tlsSocket = new _TLSSocket.default(standardSocket);\n          _this2._addConnection(tlsSocket);\n          _this2.emit('connection', standardSocket);\n          _this2.emit('secureConnection', tlsSocket);\n        });\n      }\n    }]);\n  }(_Server2.default);\n});","lineCount":98,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"default"],[8,17,1,13],[9,2,1,13],[9,6,1,13,"_classCallCheck2"],[9,22,1,13],[9,25,1,13,"_interopRequireDefault"],[9,47,1,13],[9,48,1,13,"require"],[9,55,1,13],[9,56,1,13,"_dependencyMap"],[9,70,1,13],[10,2,1,13],[10,6,1,13,"_createClass2"],[10,19,1,13],[10,22,1,13,"_interopRequireDefault"],[10,44,1,13],[10,45,1,13,"require"],[10,52,1,13],[10,53,1,13,"_dependencyMap"],[10,67,1,13],[11,2,1,13],[11,6,1,13,"_possibleConstructorReturn2"],[11,33,1,13],[11,36,1,13,"_interopRequireDefault"],[11,58,1,13],[11,59,1,13,"require"],[11,66,1,13],[11,67,1,13,"_dependencyMap"],[11,81,1,13],[12,2,1,13],[12,6,1,13,"_getPrototypeOf2"],[12,22,1,13],[12,25,1,13,"_interopRequireDefault"],[12,47,1,13],[12,48,1,13,"require"],[12,55,1,13],[12,56,1,13,"_dependencyMap"],[12,70,1,13],[13,2,1,13],[13,6,1,13,"_get2"],[13,11,1,13],[13,14,1,13,"_interopRequireDefault"],[13,36,1,13],[13,37,1,13,"require"],[13,44,1,13],[13,45,1,13,"_dependencyMap"],[13,59,1,13],[14,2,1,13],[14,6,1,13,"_inherits2"],[14,16,1,13],[14,19,1,13,"_interopRequireDefault"],[14,41,1,13],[14,42,1,13,"require"],[14,49,1,13],[14,50,1,13,"_dependencyMap"],[14,64,1,13],[15,2,3,0],[15,6,3,0,"_reactNative"],[15,18,3,0],[15,21,3,0,"require"],[15,28,3,0],[15,29,3,0,"_dependencyMap"],[15,43,3,0],[16,2,4,0],[16,6,4,0,"_Server2"],[16,14,4,0],[16,17,4,0,"_interopRequireDefault"],[16,39,4,0],[16,40,4,0,"require"],[16,47,4,0],[16,48,4,0,"_dependencyMap"],[16,62,4,0],[17,2,5,0],[17,6,5,0,"_TLSSocket"],[17,16,5,0],[17,19,5,0,"_interopRequireDefault"],[17,41,5,0],[17,42,5,0,"require"],[17,49,5,0],[17,50,5,0,"_dependencyMap"],[17,64,5,0],[18,2,5,36],[18,11,5,36,"_callSuper"],[18,22,5,36,"t"],[18,23,5,36],[18,25,5,36,"o"],[18,26,5,36],[18,28,5,36,"e"],[18,29,5,36],[18,40,5,36,"o"],[18,41,5,36],[18,48,5,36,"_getPrototypeOf2"],[18,64,5,36],[18,65,5,36,"default"],[18,72,5,36],[18,74,5,36,"o"],[18,75,5,36],[18,82,5,36,"_possibleConstructorReturn2"],[18,109,5,36],[18,110,5,36,"default"],[18,117,5,36],[18,119,5,36,"t"],[18,120,5,36],[18,122,5,36,"_isNativeReflectConstruct"],[18,147,5,36],[18,152,5,36,"Reflect"],[18,159,5,36],[18,160,5,36,"construct"],[18,169,5,36],[18,170,5,36,"o"],[18,171,5,36],[18,173,5,36,"e"],[18,174,5,36],[18,186,5,36,"_getPrototypeOf2"],[18,202,5,36],[18,203,5,36,"default"],[18,210,5,36],[18,212,5,36,"t"],[18,213,5,36],[18,215,5,36,"constructor"],[18,226,5,36],[18,230,5,36,"o"],[18,231,5,36],[18,232,5,36,"apply"],[18,237,5,36],[18,238,5,36,"t"],[18,239,5,36],[18,241,5,36,"e"],[18,242,5,36],[19,2,5,36],[19,11,5,36,"_isNativeReflectConstruct"],[19,37,5,36],[19,51,5,36,"t"],[19,52,5,36],[19,56,5,36,"Boolean"],[19,63,5,36],[19,64,5,36,"prototype"],[19,73,5,36],[19,74,5,36,"valueOf"],[19,81,5,36],[19,82,5,36,"call"],[19,86,5,36],[19,87,5,36,"Reflect"],[19,94,5,36],[19,95,5,36,"construct"],[19,104,5,36],[19,105,5,36,"Boolean"],[19,112,5,36],[19,145,5,36,"t"],[19,146,5,36],[19,159,5,36,"_isNativeReflectConstruct"],[19,184,5,36],[19,196,5,36,"_isNativeReflectConstruct"],[19,197,5,36],[19,210,5,36,"t"],[19,211,5,36],[20,2,5,36],[20,11,5,36,"_superPropGet"],[20,25,5,36,"t"],[20,26,5,36],[20,28,5,36,"o"],[20,29,5,36],[20,31,5,36,"e"],[20,32,5,36],[20,34,5,36,"r"],[20,35,5,36],[20,43,5,36,"p"],[20,44,5,36],[20,51,5,36,"_get2"],[20,56,5,36],[20,57,5,36,"default"],[20,64,5,36],[20,70,5,36,"_getPrototypeOf2"],[20,86,5,36],[20,87,5,36,"default"],[20,94,5,36],[20,100,5,36,"r"],[20,101,5,36],[20,104,5,36,"t"],[20,105,5,36],[20,106,5,36,"prototype"],[20,115,5,36],[20,118,5,36,"t"],[20,119,5,36],[20,122,5,36,"o"],[20,123,5,36],[20,125,5,36,"e"],[20,126,5,36],[20,140,5,36,"r"],[20,141,5,36],[20,166,5,36,"p"],[20,167,5,36],[20,180,5,36,"t"],[20,181,5,36],[20,192,5,36,"p"],[20,193,5,36],[20,194,5,36,"apply"],[20,199,5,36],[20,200,5,36,"e"],[20,201,5,36],[20,203,5,36,"t"],[20,204,5,36],[20,211,5,36,"p"],[20,212,5,36],[21,2,7,0],[22,0,8,0],[23,0,9,0],[24,0,10,0],[25,0,11,0],[26,0,12,0],[27,2,7,0],[27,6,13,21,"TLSServer"],[27,15,13,30],[27,18,13,30,"exports"],[27,25,13,30],[27,26,13,30,"default"],[27,33,13,30],[27,59,13,30,"_Server"],[27,66,13,30],[28,4,14,4],[29,0,15,0],[30,0,16,0],[31,4,17,4],[31,13,17,4,"TLSServer"],[31,23,17,16,"secureConnectionListener"],[31,47,17,40],[31,49,17,42],[32,6,17,42],[32,10,17,42,"_this"],[32,15,17,42],[33,6,17,42],[33,10,17,42,"_classCallCheck2"],[33,26,17,42],[33,27,17,42,"default"],[33,34,17,42],[33,42,17,42,"TLSServer"],[33,51,17,42],[34,6,18,8,"_this"],[34,11,18,8],[34,14,18,8,"_callSuper"],[34,24,18,8],[34,31,18,8,"TLSServer"],[34,40,18,8],[35,6,19,8],[35,10,19,12,"secureConnectionListener"],[35,34,19,36],[35,36,19,38,"_this"],[35,41,19,38],[35,42,19,43,"on"],[35,44,19,45],[35,45,19,46],[35,63,19,64],[35,65,19,66,"secureConnectionListener"],[35,89,19,90],[35,90,19,91],[36,6,20,8,"_this"],[36,11,20,8],[36,12,20,13,"_registerTLSEvents"],[36,30,20,31],[36,31,20,32],[36,32,20,33],[37,6,20,34],[37,13,20,34,"_this"],[37,18,20,34],[38,4,21,4],[40,4,23,4],[41,0,24,0],[42,0,25,0],[43,4,23,4],[43,8,23,4,"_inherits2"],[43,18,23,4],[43,19,23,4,"default"],[43,26,23,4],[43,28,23,4,"TLSServer"],[43,37,23,4],[43,39,23,4,"_Server"],[43,46,23,4],[44,4,23,4],[44,15,23,4,"_createClass2"],[44,28,23,4],[44,29,23,4,"default"],[44,36,23,4],[44,38,23,4,"TLSServer"],[44,47,23,4],[45,6,23,4,"key"],[45,9,23,4],[46,6,23,4,"value"],[46,11,23,4],[46,13,26,4],[46,22,26,4,"setSecureContext"],[46,38,26,20,"setSecureContext"],[46,39,26,21,"options"],[46,46,26,28],[46,48,26,30],[47,8,27,8],[48,8,28,8],[48,12,28,12],[48,13,28,13,"_options"],[48,21,28,21],[48,24,28,24],[49,10,28,26],[49,13,28,29,"options"],[50,8,28,37],[50,9,28,38],[51,8,29,8],[51,12,29,12],[51,13,29,13,"_options"],[51,21,29,21],[51,22,29,22,"keystore"],[51,30,29,30],[51,33,29,33,"Image"],[51,51,29,38],[51,52,29,39,"resolveAssetSource"],[51,70,29,57],[51,71,29,58],[51,75,29,62],[51,76,29,63,"_options"],[51,84,29,71],[51,85,29,72,"keystore"],[51,93,29,80],[51,94,29,81],[51,95,29,82,"uri"],[51,98,29,85],[52,6,30,4],[54,6,32,4],[55,0,33,0],[56,0,34,0],[57,0,35,0],[58,0,36,0],[59,0,37,0],[60,0,38,0],[61,0,39,0],[62,0,40,0],[63,0,41,0],[64,0,42,0],[65,0,43,0],[66,0,44,0],[67,0,45,0],[68,4,32,4],[69,6,32,4,"key"],[69,9,32,4],[70,6,32,4,"value"],[70,11,32,4],[70,13,46,4],[70,22,46,4,"listen"],[70,28,46,10,"listen"],[70,29,46,11,"options"],[70,36,46,18],[70,38,46,20,"callback"],[70,46,46,28],[70,48,46,30],[71,8,47,8],[71,12,47,14,"newOptions"],[71,22,47,24],[71,25,47,27],[72,10,47,29],[72,13,47,32,"options"],[73,8,47,40],[73,9,47,41],[74,8,48,8],[75,8,49,8,"newOptions"],[75,18,49,18],[75,19,49,19],[75,24,49,24],[75,25,49,25],[75,28,49,28],[75,32,49,32],[75,33,49,33,"_options"],[75,41,49,41],[76,8,50,8],[76,15,50,8,"_superPropGet"],[76,28,50,8],[76,29,50,8,"TLSServer"],[76,38,50,8],[76,60,50,28,"newOptions"],[76,70,50,38],[76,72,50,40,"callback"],[76,80,50,48],[77,6,51,4],[79,6,53,4],[80,0,54,0],[81,0,55,0],[82,4,53,4],[83,6,53,4,"key"],[83,9,53,4],[84,6,53,4,"value"],[84,11,53,4],[84,13,56,4],[84,22,56,4,"_registerTLSEvents"],[84,40,56,22,"_registerTLSEvents"],[84,41,56,22],[84,43,56,25],[85,8,56,25],[85,12,56,25,"_this2"],[85,18,56,25],[86,8,57,8],[86,12,57,12],[86,13,57,13,"_secureConnectionListener"],[86,38,57,38],[86,41,57,41],[86,45,57,45],[86,46,57,46,"_eventEmitter"],[86,59,57,59],[86,60,57,60,"addListener"],[86,71,57,71],[86,72,58,12],[86,90,58,30],[86,92,59,12],[86,102,59,13,"evt"],[86,105,59,16],[86,107,59,21],[87,10,60,16],[87,14,60,20,"evt"],[87,17,60,23],[87,18,60,24,"id"],[87,20,60,26],[87,25,60,31,"_this2"],[87,31,60,35],[87,32,60,36,"_id"],[87,35,60,39],[87,37,60,41],[88,10,61,16],[88,14,61,22,"standardSocket"],[88,28,61,36],[88,31,61,39,"_this2"],[88,37,61,43],[88,38,61,44,"_buildSocket"],[88,50,61,56],[88,51,61,57,"evt"],[88,54,61,60],[88,55,61,61,"info"],[88,59,61,65],[88,60,61,66],[89,10,62,16,"standardSocket"],[89,24,62,30],[89,25,62,31,"_unregisterEvents"],[89,42,62,48],[89,43,62,49],[89,44,62,50],[90,10,63,16],[90,14,63,22,"tlsSocket"],[90,23,63,31],[90,26,63,34],[90,30,63,38,"TLSSocket"],[90,48,63,47],[90,49,63,48,"standardSocket"],[90,63,63,62],[90,64,63,63],[91,10,64,16,"_this2"],[91,16,64,20],[91,17,64,21,"_addConnection"],[91,31,64,35],[91,32,64,36,"tlsSocket"],[91,41,64,45],[91,42,64,46],[92,10,65,16,"_this2"],[92,16,65,20],[92,17,65,21,"emit"],[92,21,65,25],[92,22,65,26],[92,34,65,38],[92,36,65,40,"standardSocket"],[92,50,65,54],[92,51,65,55],[93,10,66,16,"_this2"],[93,16,66,20],[93,17,66,21,"emit"],[93,21,66,25],[93,22,66,26],[93,40,66,44],[93,42,66,46,"tlsSocket"],[93,51,66,55],[93,52,66,56],[94,8,67,12],[94,9,68,8],[94,10,68,9],[95,6,69,4],[96,4,69,5],[97,2,69,5],[97,4,13,39,"Server"],[97,20,13,45],[98,0,13,45]],"functionMap":{"names":["<global>","TLSServer","constructor","setSecureContext","listen","_registerTLSEvents","_eventEmitter.addListener$argument_1"],"mappings":"AAA;eCY;ICI;KDI;IEK;KFI;IGgB;KHK;IIK;YCG;aDQ;KJE;CDC"}},"type":"js/module"}]}