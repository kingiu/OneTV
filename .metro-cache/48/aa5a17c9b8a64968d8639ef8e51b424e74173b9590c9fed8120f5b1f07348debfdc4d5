{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useReleasingSharedObject = useReleasingSharedObject;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Returns a shared object, which is automatically cleaned up when the component is unmounted.\n   */\n  function useReleasingSharedObject(factory, dependencies) {\n    const objectRef = (0, _react.useRef)(null);\n    const isFastRefresh = (0, _react.useRef)(false);\n    const previousDependencies = (0, _react.useRef)(dependencies);\n    if (objectRef.current == null) {\n      objectRef.current = factory();\n    }\n    const object = (0, _react.useMemo)(() => {\n      let newObject = objectRef.current;\n      const dependenciesAreEqual = previousDependencies.current?.length === dependencies.length && dependencies.every((value, index) => value === previousDependencies.current[index]);\n      // If the dependencies have changed, release the previous object and create a new one, otherwise this has been called\n      // because of a fast refresh, and we don't want to release the object.\n      if (!newObject || !dependenciesAreEqual) {\n        objectRef.current?.release();\n        newObject = factory();\n        objectRef.current = newObject;\n        previousDependencies.current = dependencies;\n      } else {\n        isFastRefresh.current = true;\n      }\n      return newObject;\n    }, dependencies);\n    (0, _react.useEffect)(() => {\n      isFastRefresh.current = false;\n      return () => {\n        // This will be called on every fast refresh and on unmount, but we only want to release the object on unmount.\n        if (!isFastRefresh.current && objectRef.current) {\n          objectRef.current.release();\n        }\n      };\n    }, []);\n    return object;\n  }\n});","lineCount":43,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,2,0],[8,0,3,0],[9,0,4,0],[10,2,5,7],[10,11,5,16,"useReleasingSharedObject"],[10,35,5,40,"useReleasingSharedObject"],[10,36,5,41,"factory"],[10,43,5,48],[10,45,5,50,"dependencies"],[10,57,5,62],[10,59,5,64],[11,4,6,4],[11,10,6,10,"objectRef"],[11,19,6,19],[11,22,6,22],[11,26,6,22,"useRef"],[11,39,6,28],[11,41,6,29],[11,45,6,33],[11,46,6,34],[12,4,7,4],[12,10,7,10,"isFastRefresh"],[12,23,7,23],[12,26,7,26],[12,30,7,26,"useRef"],[12,43,7,32],[12,45,7,33],[12,50,7,38],[12,51,7,39],[13,4,8,4],[13,10,8,10,"previousDependencies"],[13,30,8,30],[13,33,8,33],[13,37,8,33,"useRef"],[13,50,8,39],[13,52,8,40,"dependencies"],[13,64,8,52],[13,65,8,53],[14,4,9,4],[14,8,9,8,"objectRef"],[14,17,9,17],[14,18,9,18,"current"],[14,25,9,25],[14,29,9,29],[14,33,9,33],[14,35,9,35],[15,6,10,8,"objectRef"],[15,15,10,17],[15,16,10,18,"current"],[15,23,10,25],[15,26,10,28,"factory"],[15,33,10,35],[15,34,10,36],[15,35,10,37],[16,4,11,4],[17,4,12,4],[17,10,12,10,"object"],[17,16,12,16],[17,19,12,19],[17,23,12,19,"useMemo"],[17,37,12,26],[17,39,12,27],[17,45,12,33],[18,6,13,8],[18,10,13,12,"newObject"],[18,19,13,21],[18,22,13,24,"objectRef"],[18,31,13,33],[18,32,13,34,"current"],[18,39,13,41],[19,6,14,8],[19,12,14,14,"dependenciesAreEqual"],[19,32,14,34],[19,35,14,37,"previousDependencies"],[19,55,14,57],[19,56,14,58,"current"],[19,63,14,65],[19,65,14,67,"length"],[19,71,14,73],[19,76,14,78,"dependencies"],[19,88,14,90],[19,89,14,91,"length"],[19,95,14,97],[19,99,15,12,"dependencies"],[19,111,15,24],[19,112,15,25,"every"],[19,117,15,30],[19,118,15,31],[19,119,15,32,"value"],[19,124,15,37],[19,126,15,39,"index"],[19,131,15,44],[19,136,15,49,"value"],[19,141,15,54],[19,146,15,59,"previousDependencies"],[19,166,15,79],[19,167,15,80,"current"],[19,174,15,87],[19,175,15,88,"index"],[19,180,15,93],[19,181,15,94],[19,182,15,95],[20,6,16,8],[21,6,17,8],[22,6,18,8],[22,10,18,12],[22,11,18,13,"newObject"],[22,20,18,22],[22,24,18,26],[22,25,18,27,"dependenciesAreEqual"],[22,45,18,47],[22,47,18,49],[23,8,19,12,"objectRef"],[23,17,19,21],[23,18,19,22,"current"],[23,25,19,29],[23,27,19,31,"release"],[23,34,19,38],[23,35,19,39],[23,36,19,40],[24,8,20,12,"newObject"],[24,17,20,21],[24,20,20,24,"factory"],[24,27,20,31],[24,28,20,32],[24,29,20,33],[25,8,21,12,"objectRef"],[25,17,21,21],[25,18,21,22,"current"],[25,25,21,29],[25,28,21,32,"newObject"],[25,37,21,41],[26,8,22,12,"previousDependencies"],[26,28,22,32],[26,29,22,33,"current"],[26,36,22,40],[26,39,22,43,"dependencies"],[26,51,22,55],[27,6,23,8],[27,7,23,9],[27,13,24,13],[28,8,25,12,"isFastRefresh"],[28,21,25,25],[28,22,25,26,"current"],[28,29,25,33],[28,32,25,36],[28,36,25,40],[29,6,26,8],[30,6,27,8],[30,13,27,15,"newObject"],[30,22,27,24],[31,4,28,4],[31,5,28,5],[31,7,28,7,"dependencies"],[31,19,28,19],[31,20,28,20],[32,4,29,4],[32,8,29,4,"useEffect"],[32,24,29,13],[32,26,29,14],[32,32,29,20],[33,6,30,8,"isFastRefresh"],[33,19,30,21],[33,20,30,22,"current"],[33,27,30,29],[33,30,30,32],[33,35,30,37],[34,6,31,8],[34,13,31,15],[34,19,31,21],[35,8,32,12],[36,8,33,12],[36,12,33,16],[36,13,33,17,"isFastRefresh"],[36,26,33,30],[36,27,33,31,"current"],[36,34,33,38],[36,38,33,42,"objectRef"],[36,47,33,51],[36,48,33,52,"current"],[36,55,33,59],[36,57,33,61],[37,10,34,16,"objectRef"],[37,19,34,25],[37,20,34,26,"current"],[37,27,34,33],[37,28,34,34,"release"],[37,35,34,41],[37,36,34,42],[37,37,34,43],[38,8,35,12],[39,6,36,8],[39,7,36,9],[40,4,37,4],[40,5,37,5],[40,7,37,7],[40,9,37,9],[40,10,37,10],[41,4,38,4],[41,11,38,11,"object"],[41,17,38,17],[42,2,39,0],[43,0,39,1]],"functionMap":{"names":["<global>","useReleasingSharedObject","useMemo$argument_0","dependencies.every$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCI;2BCO;+BCG,+DD;KDa;cGC;eCE;SDK;KHC;CDE"}},"type":"js/module"}]}