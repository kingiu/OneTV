{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":0,"index":3047}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@/utils/Logger","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":36,"index":36}}],"key":"dpbJvsqVW0VVfFOl8dlhEC6KfVk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseM3U = exports.getPlayableUrl = exports.fetchAndParseM3u = void 0;\n  var _Logger = _interopRequireDefault(require(_dependencyMap[1], \"@/utils/Logger\"));\n  const logger = _Logger.default.withTag('M3U');\n  const parseM3U = m3uText => {\n    const parsedChannels = [];\n    const lines = m3uText.split('\\n');\n    let currentChannelInfo = null;\n    for (const line of lines) {\n      const trimmedLine = line.trim();\n      if (trimmedLine.startsWith('#EXTINF:')) {\n        currentChannelInfo = {}; // Start a new channel\n        const commaIndex = trimmedLine.lastIndexOf(',');\n        if (commaIndex !== -1) {\n          currentChannelInfo.name = trimmedLine.substring(commaIndex + 1).trim();\n          const attributesPart = trimmedLine.substring(8, commaIndex);\n          const logoMatch = attributesPart.match(/tvg-logo=\"([^\"]*)\"/i);\n          if (logoMatch && logoMatch[1]) {\n            currentChannelInfo.logo = logoMatch[1];\n          }\n          const groupMatch = attributesPart.match(/group-title=\"([^\"]*)\"/i);\n          if (groupMatch && groupMatch[1]) {\n            currentChannelInfo.group = groupMatch[1];\n          }\n        } else {\n          currentChannelInfo.name = trimmedLine.substring(8).trim();\n        }\n      } else if (currentChannelInfo && trimmedLine && !trimmedLine.startsWith('#') && trimmedLine.includes('://')) {\n        currentChannelInfo.url = trimmedLine;\n        currentChannelInfo.id = currentChannelInfo.url; // Use URL as ID\n\n        // Ensure all required fields are present, providing defaults if necessary\n        const finalChannel = {\n          id: currentChannelInfo.id,\n          url: currentChannelInfo.url,\n          name: currentChannelInfo.name || 'Unknown',\n          logo: currentChannelInfo.logo || '',\n          group: currentChannelInfo.group || 'Default'\n        };\n        parsedChannels.push(finalChannel);\n        currentChannelInfo = null; // Reset for the next channel\n      }\n    }\n    return parsedChannels;\n  };\n  exports.parseM3U = parseM3U;\n  const fetchAndParseM3u = async m3uUrl => {\n    try {\n      const response = await fetch(m3uUrl);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch M3U: ${response.statusText}`);\n      }\n      const m3uText = await response.text();\n      return parseM3U(m3uText);\n    } catch (error) {\n      logger.info(\"Error fetching or parsing M3U:\", error);\n      return []; // Return empty array on error\n    }\n  };\n  exports.fetchAndParseM3u = fetchAndParseM3u;\n  const getPlayableUrl = originalUrl => {\n    if (!originalUrl) {\n      return null;\n    }\n    // In React Native, we use the proxy for all http streams to avoid potential issues.\n    // if (originalUrl.toLowerCase().startsWith('http://')) {\n    //   // Use the baseURL from the existing api instance.\n    //   if (!api.baseURL) {\n    //       console.warn(\"API base URL is not set. Cannot create proxy URL.\")\n    //       return originalUrl; // Fallback to original URL\n    //   }\n    //   return `${api.baseURL}/proxy?url=${encodeURIComponent(originalUrl)}`;\n    // }\n    // HTTPS streams can be played directly.\n    return originalUrl;\n  };\n  exports.getPlayableUrl = getPlayableUrl;\n});","lineCount":82,"map":[[7,2,1,0],[7,6,1,0,"_Logger"],[7,13,1,0],[7,16,1,0,"_interopRequireDefault"],[7,38,1,0],[7,39,1,0,"require"],[7,46,1,0],[7,47,1,0,"_dependencyMap"],[7,61,1,0],[8,2,3,0],[8,8,3,6,"logger"],[8,14,3,12],[8,17,3,15,"Logger"],[8,32,3,21],[8,33,3,22,"withTag"],[8,40,3,29],[8,41,3,30],[8,46,3,35],[8,47,3,36],[9,2,13,7],[9,8,13,13,"parseM3U"],[9,16,13,21],[9,19,13,25,"m3uText"],[9,26,13,40],[9,30,13,56],[10,4,14,2],[10,10,14,8,"parsedChannels"],[10,24,14,33],[10,27,14,36],[10,29,14,38],[11,4,15,2],[11,10,15,8,"lines"],[11,15,15,13],[11,18,15,16,"m3uText"],[11,25,15,23],[11,26,15,24,"split"],[11,31,15,29],[11,32,15,30],[11,36,15,34],[11,37,15,35],[12,4,16,2],[12,8,16,6,"currentChannelInfo"],[12,26,16,49],[12,29,16,52],[12,33,16,56],[13,4,18,2],[13,9,18,7],[13,15,18,13,"line"],[13,19,18,17],[13,23,18,21,"lines"],[13,28,18,26],[13,30,18,28],[14,6,19,4],[14,12,19,10,"trimmedLine"],[14,23,19,21],[14,26,19,24,"line"],[14,30,19,28],[14,31,19,29,"trim"],[14,35,19,33],[14,36,19,34],[14,37,19,35],[15,6,20,4],[15,10,20,8,"trimmedLine"],[15,21,20,19],[15,22,20,20,"startsWith"],[15,32,20,30],[15,33,20,31],[15,43,20,41],[15,44,20,42],[15,46,20,44],[16,8,21,6,"currentChannelInfo"],[16,26,21,24],[16,29,21,27],[16,30,21,28],[16,31,21,29],[16,32,21,30],[16,33,21,31],[17,8,22,6],[17,14,22,12,"commaIndex"],[17,24,22,22],[17,27,22,25,"trimmedLine"],[17,38,22,36],[17,39,22,37,"lastIndexOf"],[17,50,22,48],[17,51,22,49],[17,54,22,52],[17,55,22,53],[18,8,23,6],[18,12,23,10,"commaIndex"],[18,22,23,20],[18,27,23,25],[18,28,23,26],[18,29,23,27],[18,31,23,29],[19,10,24,8,"currentChannelInfo"],[19,28,24,26],[19,29,24,27,"name"],[19,33,24,31],[19,36,24,34,"trimmedLine"],[19,47,24,45],[19,48,24,46,"substring"],[19,57,24,55],[19,58,24,56,"commaIndex"],[19,68,24,66],[19,71,24,69],[19,72,24,70],[19,73,24,71],[19,74,24,72,"trim"],[19,78,24,76],[19,79,24,77],[19,80,24,78],[20,10,25,8],[20,16,25,14,"attributesPart"],[20,30,25,28],[20,33,25,31,"trimmedLine"],[20,44,25,42],[20,45,25,43,"substring"],[20,54,25,52],[20,55,25,53],[20,56,25,54],[20,58,25,56,"commaIndex"],[20,68,25,66],[20,69,25,67],[21,10,26,8],[21,16,26,14,"logoMatch"],[21,25,26,23],[21,28,26,26,"attributesPart"],[21,42,26,40],[21,43,26,41,"match"],[21,48,26,46],[21,49,26,47],[21,70,26,68],[21,71,26,69],[22,10,27,8],[22,14,27,12,"logoMatch"],[22,23,27,21],[22,27,27,25,"logoMatch"],[22,36,27,34],[22,37,27,35],[22,38,27,36],[22,39,27,37],[22,41,27,39],[23,12,28,10,"currentChannelInfo"],[23,30,28,28],[23,31,28,29,"logo"],[23,35,28,33],[23,38,28,36,"logoMatch"],[23,47,28,45],[23,48,28,46],[23,49,28,47],[23,50,28,48],[24,10,29,8],[25,10,30,8],[25,16,30,14,"groupMatch"],[25,26,30,24],[25,29,30,27,"attributesPart"],[25,43,30,41],[25,44,30,42,"match"],[25,49,30,47],[25,50,30,48],[25,74,30,72],[25,75,30,73],[26,10,31,8],[26,14,31,12,"groupMatch"],[26,24,31,22],[26,28,31,26,"groupMatch"],[26,38,31,36],[26,39,31,37],[26,40,31,38],[26,41,31,39],[26,43,31,41],[27,12,32,10,"currentChannelInfo"],[27,30,32,28],[27,31,32,29,"group"],[27,36,32,34],[27,39,32,37,"groupMatch"],[27,49,32,47],[27,50,32,48],[27,51,32,49],[27,52,32,50],[28,10,33,8],[29,8,34,6],[29,9,34,7],[29,15,34,13],[30,10,35,8,"currentChannelInfo"],[30,28,35,26],[30,29,35,27,"name"],[30,33,35,31],[30,36,35,34,"trimmedLine"],[30,47,35,45],[30,48,35,46,"substring"],[30,57,35,55],[30,58,35,56],[30,59,35,57],[30,60,35,58],[30,61,35,59,"trim"],[30,65,35,63],[30,66,35,64],[30,67,35,65],[31,8,36,6],[32,6,37,4],[32,7,37,5],[32,13,37,11],[32,17,37,15,"currentChannelInfo"],[32,35,37,33],[32,39,37,37,"trimmedLine"],[32,50,37,48],[32,54,37,52],[32,55,37,53,"trimmedLine"],[32,66,37,64],[32,67,37,65,"startsWith"],[32,77,37,75],[32,78,37,76],[32,81,37,79],[32,82,37,80],[32,86,37,84,"trimmedLine"],[32,97,37,95],[32,98,37,96,"includes"],[32,106,37,104],[32,107,37,105],[32,112,37,110],[32,113,37,111],[32,115,37,113],[33,8,38,6,"currentChannelInfo"],[33,26,38,24],[33,27,38,25,"url"],[33,30,38,28],[33,33,38,31,"trimmedLine"],[33,44,38,42],[34,8,39,6,"currentChannelInfo"],[34,26,39,24],[34,27,39,25,"id"],[34,29,39,27],[34,32,39,30,"currentChannelInfo"],[34,50,39,48],[34,51,39,49,"url"],[34,54,39,52],[34,55,39,53],[34,56,39,54],[36,8,41,6],[37,8,42,6],[37,14,42,12,"finalChannel"],[37,26,42,33],[37,29,42,36],[38,10,43,8,"id"],[38,12,43,10],[38,14,43,12,"currentChannelInfo"],[38,32,43,30],[38,33,43,31,"id"],[38,35,43,33],[39,10,44,8,"url"],[39,13,44,11],[39,15,44,13,"currentChannelInfo"],[39,33,44,31],[39,34,44,32,"url"],[39,37,44,35],[40,10,45,8,"name"],[40,14,45,12],[40,16,45,14,"currentChannelInfo"],[40,34,45,32],[40,35,45,33,"name"],[40,39,45,37],[40,43,45,41],[40,52,45,50],[41,10,46,8,"logo"],[41,14,46,12],[41,16,46,14,"currentChannelInfo"],[41,34,46,32],[41,35,46,33,"logo"],[41,39,46,37],[41,43,46,41],[41,45,46,43],[42,10,47,8,"group"],[42,15,47,13],[42,17,47,15,"currentChannelInfo"],[42,35,47,33],[42,36,47,34,"group"],[42,41,47,39],[42,45,47,43],[43,8,48,6],[43,9,48,7],[44,8,50,6,"parsedChannels"],[44,22,50,20],[44,23,50,21,"push"],[44,27,50,25],[44,28,50,26,"finalChannel"],[44,40,50,38],[44,41,50,39],[45,8,51,6,"currentChannelInfo"],[45,26,51,24],[45,29,51,27],[45,33,51,31],[45,34,51,32],[45,35,51,33],[46,6,52,4],[47,4,53,2],[48,4,54,2],[48,11,54,9,"parsedChannels"],[48,25,54,23],[49,2,55,0],[49,3,55,1],[50,2,55,2,"exports"],[50,9,55,2],[50,10,55,2,"parseM3U"],[50,18,55,2],[50,21,55,2,"parseM3U"],[50,29,55,2],[51,2,57,7],[51,8,57,13,"fetchAndParseM3u"],[51,24,57,29],[51,27,57,32],[51,33,57,39,"m3uUrl"],[51,39,57,53],[51,43,57,78],[52,4,58,2],[52,8,58,6],[53,6,59,4],[53,12,59,10,"response"],[53,20,59,18],[53,23,59,21],[53,29,59,27,"fetch"],[53,34,59,32],[53,35,59,33,"m3uUrl"],[53,41,59,39],[53,42,59,40],[54,6,60,4],[54,10,60,8],[54,11,60,9,"response"],[54,19,60,17],[54,20,60,18,"ok"],[54,22,60,20],[54,24,60,22],[55,8,61,6],[55,14,61,12],[55,18,61,16,"Error"],[55,23,61,21],[55,24,61,22],[55,48,61,46,"response"],[55,56,61,54],[55,57,61,55,"statusText"],[55,67,61,65],[55,69,61,67],[55,70,61,68],[56,6,62,4],[57,6,63,4],[57,12,63,10,"m3uText"],[57,19,63,17],[57,22,63,20],[57,28,63,26,"response"],[57,36,63,34],[57,37,63,35,"text"],[57,41,63,39],[57,42,63,40],[57,43,63,41],[58,6,64,4],[58,13,64,11,"parseM3U"],[58,21,64,19],[58,22,64,20,"m3uText"],[58,29,64,27],[58,30,64,28],[59,4,65,2],[59,5,65,3],[59,6,65,4],[59,13,65,11,"error"],[59,18,65,16],[59,20,65,18],[60,6,66,4,"logger"],[60,12,66,10],[60,13,66,11,"info"],[60,17,66,15],[60,18,66,16],[60,50,66,48],[60,52,66,50,"error"],[60,57,66,55],[60,58,66,56],[61,6,67,4],[61,13,67,11],[61,15,67,13],[61,16,67,14],[61,17,67,15],[62,4,68,2],[63,2,69,0],[63,3,69,1],[64,2,69,2,"exports"],[64,9,69,2],[64,10,69,2,"fetchAndParseM3u"],[64,26,69,2],[64,29,69,2,"fetchAndParseM3u"],[64,45,69,2],[65,2,71,7],[65,8,71,13,"getPlayableUrl"],[65,22,71,27],[65,25,71,31,"originalUrl"],[65,36,71,57],[65,40,71,77],[66,4,72,2],[66,8,72,6],[66,9,72,7,"originalUrl"],[66,20,72,18],[66,22,72,20],[67,6,73,4],[67,13,73,11],[67,17,73,15],[68,4,74,2],[69,4,75,2],[70,4,76,2],[71,4,77,2],[72,4,78,2],[73,4,79,2],[74,4,80,2],[75,4,81,2],[76,4,82,2],[77,4,83,2],[78,4,84,2],[79,4,85,2],[79,11,85,9,"originalUrl"],[79,22,85,20],[80,2,86,0],[80,3,86,1],[81,2,86,2,"exports"],[81,9,86,2],[81,10,86,2,"getPlayableUrl"],[81,24,86,2],[81,27,86,2,"getPlayableUrl"],[81,41,86,2],[82,0,86,2]],"functionMap":{"names":["<global>","parseM3U","fetchAndParseM3u","getPlayableUrl"],"mappings":"AAA;wBCY;CD0C;gCEE;CFY;8BGE;CHe"}},"type":"js/module"}]}