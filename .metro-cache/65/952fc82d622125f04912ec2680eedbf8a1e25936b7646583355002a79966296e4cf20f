{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":134,"column":0,"index":3360}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":55,"index":55}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":56},"end":{"line":2,"column":58,"index":114}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}},{"name":"@/stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":50,"index":165}}],"key":"jza9oGwrWwCRqRJcTBeVqZHqd+Y="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTVRemoteHandler = void 0;\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[3], \"@/stores/playerStore\"));\n  var _s = $RefreshSig$();\n  var SEEK_STEP = 20 * 1000; // 快进/快退的时间步长（毫秒）\n\n  // 定时器延迟时间（毫秒）\n  var CONTROLS_TIMEOUT = 5000;\n\n  /**\n   * 管理播放器控件的显示/隐藏、遥控器事件和自动隐藏定时器。\n   * @returns onScreenPress - 一个函数，用于处理屏幕点击事件，以显示控件并重置定时器。\n   */\n  var useTVRemoteHandler = function () {\n    _s();\n    var _usePlayerStore = (0, _playerStore.default)(),\n      showControls = _usePlayerStore.showControls,\n      setShowControls = _usePlayerStore.setShowControls,\n      showEpisodeModal = _usePlayerStore.showEpisodeModal,\n      togglePlayPause = _usePlayerStore.togglePlayPause,\n      seek = _usePlayerStore.seek;\n    var controlsTimer = (0, _react.useRef)(null);\n    var fastForwardIntervalRef = (0, _react.useRef)(null);\n\n    // 重置或启动隐藏控件的定时器\n    var resetTimer = (0, _react.useCallback)(function () {\n      // 清除之前的定时器\n      if (controlsTimer.current) {\n        clearTimeout(controlsTimer.current);\n      }\n      // 设置新的定时器\n      controlsTimer.current = setTimeout(function () {\n        setShowControls(false);\n      }, CONTROLS_TIMEOUT);\n    }, [setShowControls]);\n\n    // 当控件显示时，启动定时器\n    (0, _react.useEffect)(function () {\n      if (showControls) {\n        resetTimer();\n      } else {\n        // 如果控件被隐藏，清除定时器\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      }\n\n      // 组件卸载时清除定时器\n      return function () {\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      };\n    }, [showControls, resetTimer]);\n\n    // 组件卸载时清除快进定时器\n    (0, _react.useEffect)(function () {\n      return function () {\n        if (fastForwardIntervalRef.current) {\n          clearInterval(fastForwardIntervalRef.current);\n        }\n      };\n    }, []);\n\n    // 处理遥控器事件\n    var handleTVEvent = (0, _react.useCallback)(function (event) {\n      if (showEpisodeModal) {\n        return;\n      }\n      if (event.eventType === \"longRight\" || event.eventType === \"longLeft\") {\n        if (event.eventKeyAction === 1) {\n          if (fastForwardIntervalRef.current) {\n            clearInterval(fastForwardIntervalRef.current);\n            fastForwardIntervalRef.current = null;\n          }\n        }\n      }\n      resetTimer();\n      if (showControls) {\n        // 如果控制条已显示，则不处理后台的快进/快退等操作\n        // 避免与控制条上的按钮焦点冲突\n        return;\n      }\n      switch (event.eventType) {\n        case \"select\":\n          togglePlayPause();\n          setShowControls(true);\n          break;\n        case \"left\":\n          seek(-SEEK_STEP); // 快退15秒\n          break;\n        case \"longLeft\":\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(-SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"right\":\n          seek(SEEK_STEP);\n          break;\n        case \"longRight\":\n          // 长按开始: 启动连续快进\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"down\":\n          setShowControls(true);\n          break;\n      }\n    }, [showControls, showEpisodeModal, setShowControls, resetTimer, togglePlayPause, seek]);\n    (0, _reactNative.useTVEventHandler)(handleTVEvent);\n\n    // 处理屏幕点击事件\n    var onScreenPress = function () {\n      // 切换控件的显示状态\n      var newShowControls = !showControls;\n      setShowControls(newShowControls);\n\n      // 如果控件变为显示状态，则重置定时器\n      if (newShowControls) {\n        resetTimer();\n      }\n    };\n    return {\n      onScreenPress\n    };\n  };\n  exports.useTVRemoteHandler = useTVRemoteHandler;\n  _s(useTVRemoteHandler, \"tjCH28Lh3R+v2E6Pz9CA7u88X9M=\", false, function () {\n    return [_playerStore.default, _reactNative.useTVEventHandler];\n  });\n});","lineCount":142,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"require"],[7,22,1,0],[7,23,1,0,"_dependencyMap"],[7,37,1,0],[8,2,2,0],[8,6,2,0,"_reactNative"],[8,18,2,0],[8,21,2,0,"require"],[8,28,2,0],[8,29,2,0,"_dependencyMap"],[8,43,2,0],[9,2,3,0],[9,6,3,0,"_playerStore"],[9,18,3,0],[9,21,3,0,"_interopRequireDefault"],[9,43,3,0],[9,44,3,0,"require"],[9,51,3,0],[9,52,3,0,"_dependencyMap"],[9,66,3,0],[10,2,3,50],[10,6,3,50,"_s"],[10,8,3,50],[10,11,3,50,"$RefreshSig$"],[10,23,3,50],[11,2,5,0],[11,6,5,6,"SEEK_STEP"],[11,15,5,15],[11,18,5,18],[11,20,5,20],[11,23,5,23],[11,27,5,27],[11,28,5,28],[11,29,5,29],[13,2,7,0],[14,2,8,0],[14,6,8,6,"CONTROLS_TIMEOUT"],[14,22,8,22],[14,25,8,25],[14,29,8,29],[16,2,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,2,14,7],[20,6,14,13,"useTVRemoteHandler"],[20,24,14,31],[20,27,14,34],[20,36,14,34,"useTVRemoteHandler"],[20,37,14,34],[20,39,14,40],[21,4,14,40,"_s"],[21,6,14,40],[22,4,15,2],[22,8,15,2,"_usePlayerStore"],[22,23,15,2],[22,26,15,85],[22,30,15,85,"usePlayerStore"],[22,50,15,99],[22,52,15,100],[22,53,15,101],[23,6,15,10,"showControls"],[23,18,15,22],[23,21,15,22,"_usePlayerStore"],[23,36,15,22],[23,37,15,10,"showControls"],[23,49,15,22],[24,6,15,24,"setShowControls"],[24,21,15,39],[24,24,15,39,"_usePlayerStore"],[24,39,15,39],[24,40,15,24,"setShowControls"],[24,55,15,39],[25,6,15,41,"showEpisodeModal"],[25,22,15,57],[25,25,15,57,"_usePlayerStore"],[25,40,15,57],[25,41,15,41,"showEpisodeModal"],[25,57,15,57],[26,6,15,59,"togglePlayPause"],[26,21,15,74],[26,24,15,74,"_usePlayerStore"],[26,39,15,74],[26,40,15,59,"togglePlayPause"],[26,55,15,74],[27,6,15,76,"seek"],[27,10,15,80],[27,13,15,80,"_usePlayerStore"],[27,28,15,80],[27,29,15,76,"seek"],[27,33,15,80],[28,4,17,2],[28,8,17,8,"controlsTimer"],[28,21,17,21],[28,24,17,24],[28,28,17,24,"useRef"],[28,41,17,30],[28,43,17,54],[28,47,17,58],[28,48,17,59],[29,4,18,2],[29,8,18,8,"fastForwardIntervalRef"],[29,30,18,30],[29,33,18,33],[29,37,18,33,"useRef"],[29,50,18,39],[29,52,18,63],[29,56,18,67],[29,57,18,68],[31,4,20,2],[32,4,21,2],[32,8,21,8,"resetTimer"],[32,18,21,18],[32,21,21,21],[32,25,21,21,"useCallback"],[32,43,21,32],[32,45,21,33],[32,57,21,39],[33,6,22,4],[34,6,23,4],[34,10,23,8,"controlsTimer"],[34,23,23,21],[34,24,23,22,"current"],[34,31,23,29],[34,33,23,31],[35,8,24,6,"clearTimeout"],[35,20,24,18],[35,21,24,19,"controlsTimer"],[35,34,24,32],[35,35,24,33,"current"],[35,42,24,40],[35,43,24,41],[36,6,25,4],[37,6,26,4],[38,6,27,4,"controlsTimer"],[38,19,27,17],[38,20,27,18,"current"],[38,27,27,25],[38,30,27,28,"setTimeout"],[38,40,27,38],[38,41,27,39],[38,53,27,45],[39,8,28,6,"setShowControls"],[39,23,28,21],[39,24,28,22],[39,29,28,27],[39,30,28,28],[40,6,29,4],[40,7,29,5],[40,9,29,7,"CONTROLS_TIMEOUT"],[40,25,29,23],[40,26,29,24],[41,4,30,2],[41,5,30,3],[41,7,30,5],[41,8,30,6,"setShowControls"],[41,23,30,21],[41,24,30,22],[41,25,30,23],[43,4,32,2],[44,4,33,2],[44,8,33,2,"useEffect"],[44,24,33,11],[44,26,33,12],[44,38,33,18],[45,6,34,4],[45,10,34,8,"showControls"],[45,22,34,20],[45,24,34,22],[46,8,35,6,"resetTimer"],[46,18,35,16],[46,19,35,17],[46,20,35,18],[47,6,36,4],[47,7,36,5],[47,13,36,11],[48,8,37,6],[49,8,38,6],[49,12,38,10,"controlsTimer"],[49,25,38,23],[49,26,38,24,"current"],[49,33,38,31],[49,35,38,33],[50,10,39,8,"clearTimeout"],[50,22,39,20],[50,23,39,21,"controlsTimer"],[50,36,39,34],[50,37,39,35,"current"],[50,44,39,42],[50,45,39,43],[51,8,40,6],[52,6,41,4],[54,6,43,4],[55,6,44,4],[55,13,44,11],[55,25,44,17],[56,8,45,6],[56,12,45,10,"controlsTimer"],[56,25,45,23],[56,26,45,24,"current"],[56,33,45,31],[56,35,45,33],[57,10,46,8,"clearTimeout"],[57,22,46,20],[57,23,46,21,"controlsTimer"],[57,36,46,34],[57,37,46,35,"current"],[57,44,46,42],[57,45,46,43],[58,8,47,6],[59,6,48,4],[59,7,48,5],[60,4,49,2],[60,5,49,3],[60,7,49,5],[60,8,49,6,"showControls"],[60,20,49,18],[60,22,49,20,"resetTimer"],[60,32,49,30],[60,33,49,31],[60,34,49,32],[62,4,51,2],[63,4,52,2],[63,8,52,2,"useEffect"],[63,24,52,11],[63,26,52,12],[63,38,52,18],[64,6,53,4],[64,13,53,11],[64,25,53,17],[65,8,54,6],[65,12,54,10,"fastForwardIntervalRef"],[65,34,54,32],[65,35,54,33,"current"],[65,42,54,40],[65,44,54,42],[66,10,55,8,"clearInterval"],[66,23,55,21],[66,24,55,22,"fastForwardIntervalRef"],[66,46,55,44],[66,47,55,45,"current"],[66,54,55,52],[66,55,55,53],[67,8,56,6],[68,6,57,4],[68,7,57,5],[69,4,58,2],[69,5,58,3],[69,7,58,5],[69,9,58,7],[69,10,58,8],[71,4,60,2],[72,4,61,2],[72,8,61,8,"handleTVEvent"],[72,21,61,21],[72,24,61,24],[72,28,61,24,"useCallback"],[72,46,61,35],[72,48,62,4],[72,58,62,5,"event"],[72,63,62,19],[72,65,62,24],[73,6,63,6],[73,10,63,10,"showEpisodeModal"],[73,26,63,26],[73,28,63,28],[74,8,64,8],[75,6,65,6],[76,6,67,6],[76,10,67,10,"event"],[76,15,67,15],[76,16,67,16,"eventType"],[76,25,67,25],[76,30,67,30],[76,41,67,41],[76,45,67,45,"event"],[76,50,67,50],[76,51,67,51,"eventType"],[76,60,67,60],[76,65,67,65],[76,75,67,75],[76,77,67,77],[77,8,68,8],[77,12,68,12,"event"],[77,17,68,17],[77,18,68,18,"eventKeyAction"],[77,32,68,32],[77,37,68,37],[77,38,68,38],[77,40,68,40],[78,10,69,10],[78,14,69,14,"fastForwardIntervalRef"],[78,36,69,36],[78,37,69,37,"current"],[78,44,69,44],[78,46,69,46],[79,12,70,12,"clearInterval"],[79,25,70,25],[79,26,70,26,"fastForwardIntervalRef"],[79,48,70,48],[79,49,70,49,"current"],[79,56,70,56],[79,57,70,57],[80,12,71,12,"fastForwardIntervalRef"],[80,34,71,34],[80,35,71,35,"current"],[80,42,71,42],[80,45,71,45],[80,49,71,49],[81,10,72,10],[82,8,73,8],[83,6,74,6],[84,6,76,6,"resetTimer"],[84,16,76,16],[84,17,76,17],[84,18,76,18],[85,6,78,6],[85,10,78,10,"showControls"],[85,22,78,22],[85,24,78,24],[86,8,79,8],[87,8,80,8],[88,8,81,8],[89,6,82,6],[90,6,84,6],[90,14,84,14,"event"],[90,19,84,19],[90,20,84,20,"eventType"],[90,29,84,29],[91,8,85,8],[91,13,85,13],[91,21,85,21],[92,10,86,10,"togglePlayPause"],[92,25,86,25],[92,26,86,26],[92,27,86,27],[93,10,87,10,"setShowControls"],[93,25,87,25],[93,26,87,26],[93,30,87,30],[93,31,87,31],[94,10,88,10],[95,8,89,8],[95,13,89,13],[95,19,89,19],[96,10,90,10,"seek"],[96,14,90,14],[96,15,90,15],[96,16,90,16,"SEEK_STEP"],[96,25,90,25],[96,26,90,26],[96,27,90,27],[96,28,90,28],[97,10,91,10],[98,8,92,8],[98,13,92,13],[98,23,92,23],[99,10,93,10],[99,14,93,14],[99,15,93,15,"fastForwardIntervalRef"],[99,37,93,37],[99,38,93,38,"current"],[99,45,93,45],[99,49,93,49,"event"],[99,54,93,54],[99,55,93,55,"eventKeyAction"],[99,69,93,69],[99,74,93,74],[99,75,93,75],[99,77,93,77],[100,12,94,12,"fastForwardIntervalRef"],[100,34,94,34],[100,35,94,35,"current"],[100,42,94,42],[100,45,94,45,"setInterval"],[100,56,94,56],[100,57,94,57],[100,69,94,63],[101,14,95,14,"seek"],[101,18,95,18],[101,19,95,19],[101,20,95,20,"SEEK_STEP"],[101,29,95,29],[101,30,95,30],[102,12,96,12],[102,13,96,13],[102,15,96,15],[102,18,96,18],[102,19,96,19],[103,10,97,10],[104,10,98,10],[105,8,99,8],[105,13,99,13],[105,20,99,20],[106,10,100,10,"seek"],[106,14,100,14],[106,15,100,15,"SEEK_STEP"],[106,24,100,24],[106,25,100,25],[107,10,101,10],[108,8,102,8],[108,13,102,13],[108,24,102,24],[109,10,103,10],[110,10,104,10],[110,14,104,14],[110,15,104,15,"fastForwardIntervalRef"],[110,37,104,37],[110,38,104,38,"current"],[110,45,104,45],[110,49,104,49,"event"],[110,54,104,54],[110,55,104,55,"eventKeyAction"],[110,69,104,69],[110,74,104,74],[110,75,104,75],[110,77,104,77],[111,12,105,12,"fastForwardIntervalRef"],[111,34,105,34],[111,35,105,35,"current"],[111,42,105,42],[111,45,105,45,"setInterval"],[111,56,105,56],[111,57,105,57],[111,69,105,63],[112,14,106,14,"seek"],[112,18,106,18],[112,19,106,19,"SEEK_STEP"],[112,28,106,28],[112,29,106,29],[113,12,107,12],[113,13,107,13],[113,15,107,15],[113,18,107,18],[113,19,107,19],[114,10,108,10],[115,10,109,10],[116,8,110,8],[116,13,110,13],[116,19,110,19],[117,10,111,10,"setShowControls"],[117,25,111,25],[117,26,111,26],[117,30,111,30],[117,31,111,31],[118,10,112,10],[119,6,113,6],[120,4,114,4],[120,5,114,5],[120,7,115,4],[120,8,115,5,"showControls"],[120,20,115,17],[120,22,115,19,"showEpisodeModal"],[120,38,115,35],[120,40,115,37,"setShowControls"],[120,55,115,52],[120,57,115,54,"resetTimer"],[120,67,115,64],[120,69,115,66,"togglePlayPause"],[120,84,115,81],[120,86,115,83,"seek"],[120,90,115,87],[120,91,116,2],[120,92,116,3],[121,4,118,2],[121,8,118,2,"useTVEventHandler"],[121,38,118,19],[121,40,118,20,"handleTVEvent"],[121,53,118,33],[121,54,118,34],[123,4,120,2],[124,4,121,2],[124,8,121,8,"onScreenPress"],[124,21,121,21],[124,24,121,24],[124,33,121,24,"onScreenPress"],[124,34,121,24],[124,36,121,30],[125,6,122,4],[126,6,123,4],[126,10,123,10,"newShowControls"],[126,25,123,25],[126,28,123,28],[126,29,123,29,"showControls"],[126,41,123,41],[127,6,124,4,"setShowControls"],[127,21,124,19],[127,22,124,20,"newShowControls"],[127,37,124,35],[127,38,124,36],[129,6,126,4],[130,6,127,4],[130,10,127,8,"newShowControls"],[130,25,127,23],[130,27,127,25],[131,8,128,6,"resetTimer"],[131,18,128,16],[131,19,128,17],[131,20,128,18],[132,6,129,4],[133,4,130,2],[133,5,130,3],[134,4,132,2],[134,11,132,9],[135,6,132,11,"onScreenPress"],[136,4,132,25],[136,5,132,26],[137,2,133,0],[137,3,133,1],[138,2,133,2,"exports"],[138,9,133,2],[138,10,133,2,"useTVRemoteHandler"],[138,28,133,2],[138,31,133,2,"useTVRemoteHandler"],[138,49,133,2],[139,2,133,2,"_s"],[139,4,133,2],[139,5,14,13,"useTVRemoteHandler"],[139,23,14,31],[140,4,14,31],[140,12,15,85,"usePlayerStore"],[140,32,15,99],[140,34,118,2,"useTVEventHandler"],[140,64,118,19],[141,2,118,19],[142,0,118,19]],"functionMap":{"names":["<global>","useTVRemoteHandler","resetTimer","setTimeout$argument_0","useEffect$argument_0","<anonymous>","handleTVEvent","setInterval$argument_0","onScreenPress"],"mappings":"AAA;kCCa;iCCO;uCCM;KDE;GDC;YGG;WCW;KDI;GHC;YGG;WCC;KDI;GHC;IKI;yDCgC;aDE;yDCS;aDE;KLO;wBOO;GPS;CDG"}},"type":"js/module"}]}