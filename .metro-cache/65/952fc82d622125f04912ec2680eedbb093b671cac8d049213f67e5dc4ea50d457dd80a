{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":136,"column":0,"index":3464}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":55,"index":55}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"@/stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":219},"end":{"line":5,"column":50,"index":269}}],"key":"jza9oGwrWwCRqRJcTBeVqZHqd+Y="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":31,"index":122},"end":{"line":3,"column":54,"index":145}},{"start":{"line":4,"column":21,"index":186},"end":{"line":4,"column":44,"index":209}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTVRemoteHandler = void 0;\n  var _react = require(_dependencyMap[1], \"react\");\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[2], \"@/stores/playerStore\"));\n  var _s = $RefreshSig$();\n  // 使用类型断言来解决找不到react-native声明文件的问题\n  var useTVEventHandler = require(_dependencyMap[3], \"react-native\").useTVEventHandler;\n  var HWEvent = require(_dependencyMap[3], \"react-native\").HWEvent;\n  var SEEK_STEP = 20 * 1000; // 快进/快退的时间步长（毫秒）\n\n  // 定时器延迟时间（毫秒）\n  var CONTROLS_TIMEOUT = 5000;\n\n  /**\n   * 管理播放器控件的显示/隐藏、遥控器事件和自动隐藏定时器。\n   * @returns onScreenPress - 一个函数，用于处理屏幕点击事件，以显示控件并重置定时器。\n   */\n  var useTVRemoteHandler = function () {\n    _s();\n    var _usePlayerStore = (0, _playerStore.default)(),\n      showControls = _usePlayerStore.showControls,\n      setShowControls = _usePlayerStore.setShowControls,\n      showEpisodeModal = _usePlayerStore.showEpisodeModal,\n      togglePlayPause = _usePlayerStore.togglePlayPause,\n      seek = _usePlayerStore.seek;\n    var controlsTimer = (0, _react.useRef)(null);\n    var fastForwardIntervalRef = (0, _react.useRef)(null);\n\n    // 重置或启动隐藏控件的定时器\n    var resetTimer = (0, _react.useCallback)(function () {\n      // 清除之前的定时器\n      if (controlsTimer.current) {\n        clearTimeout(controlsTimer.current);\n      }\n      // 设置新的定时器\n      controlsTimer.current = setTimeout(function () {\n        setShowControls(false);\n      }, CONTROLS_TIMEOUT);\n    }, [setShowControls]);\n\n    // 当控件显示时，启动定时器\n    (0, _react.useEffect)(function () {\n      if (showControls) {\n        resetTimer();\n      } else {\n        // 如果控件被隐藏，清除定时器\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      }\n\n      // 组件卸载时清除定时器\n      return function () {\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      };\n    }, [showControls, resetTimer]);\n\n    // 组件卸载时清除快进定时器\n    (0, _react.useEffect)(function () {\n      return function () {\n        if (fastForwardIntervalRef.current) {\n          clearInterval(fastForwardIntervalRef.current);\n        }\n      };\n    }, []);\n\n    // 处理遥控器事件\n    var handleTVEvent = (0, _react.useCallback)(function (event) {\n      if (showEpisodeModal) {\n        return;\n      }\n      if (event.eventType === \"longRight\" || event.eventType === \"longLeft\") {\n        if (event.eventKeyAction === 1) {\n          if (fastForwardIntervalRef.current) {\n            clearInterval(fastForwardIntervalRef.current);\n            fastForwardIntervalRef.current = null;\n          }\n        }\n      }\n      resetTimer();\n      if (showControls) {\n        // 如果控制条已显示，则不处理后台的快进/快退等操作\n        // 避免与控制条上的按钮焦点冲突\n        return;\n      }\n      switch (event.eventType) {\n        case \"select\":\n          togglePlayPause();\n          setShowControls(true);\n          break;\n        case \"left\":\n          seek(-SEEK_STEP); // 快退15秒\n          break;\n        case \"longLeft\":\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(-SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"right\":\n          seek(SEEK_STEP);\n          break;\n        case \"longRight\":\n          // 长按开始: 启动连续快进\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"down\":\n          setShowControls(true);\n          break;\n      }\n    }, [showControls, showEpisodeModal, setShowControls, resetTimer, togglePlayPause, seek]);\n    useTVEventHandler(handleTVEvent);\n\n    // 处理屏幕点击事件\n    var onScreenPress = function () {\n      // 切换控件的显示状态\n      var newShowControls = !showControls;\n      setShowControls(newShowControls);\n\n      // 如果控件变为显示状态，则重置定时器\n      if (newShowControls) {\n        resetTimer();\n      }\n    };\n    return {\n      onScreenPress\n    };\n  };\n  exports.useTVRemoteHandler = useTVRemoteHandler;\n  _s(useTVRemoteHandler, \"tjCH28Lh3R+v2E6Pz9CA7u88X9M=\", false, function () {\n    return [_playerStore.default, useTVEventHandler];\n  });\n});","lineCount":144,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"require"],[7,22,1,0],[7,23,1,0,"_dependencyMap"],[7,37,1,0],[8,2,5,0],[8,6,5,0,"_playerStore"],[8,18,5,0],[8,21,5,0,"_interopRequireDefault"],[8,43,5,0],[8,44,5,0,"require"],[8,51,5,0],[8,52,5,0,"_dependencyMap"],[8,66,5,0],[9,2,5,50],[9,6,5,50,"_s"],[9,8,5,50],[9,11,5,50,"$RefreshSig$"],[9,23,5,50],[10,2,2,0],[11,2,3,0],[11,6,3,6,"useTVEventHandler"],[11,23,3,28],[11,26,3,31,"require"],[11,33,3,38],[11,34,3,38,"_dependencyMap"],[11,48,3,38],[11,67,3,53],[11,68,3,54],[11,69,3,55,"useTVEventHandler"],[11,86,3,72],[12,2,4,0],[12,6,4,6,"HWEvent"],[12,13,4,18],[12,16,4,21,"require"],[12,23,4,28],[12,24,4,28,"_dependencyMap"],[12,38,4,28],[12,57,4,43],[12,58,4,44],[12,59,4,45,"HWEvent"],[12,66,4,52],[13,2,7,0],[13,6,7,6,"SEEK_STEP"],[13,15,7,15],[13,18,7,18],[13,20,7,20],[13,23,7,23],[13,27,7,27],[13,28,7,28],[13,29,7,29],[15,2,9,0],[16,2,10,0],[16,6,10,6,"CONTROLS_TIMEOUT"],[16,22,10,22],[16,25,10,25],[16,29,10,29],[18,2,12,0],[19,0,13,0],[20,0,14,0],[21,0,15,0],[22,2,16,7],[22,6,16,13,"useTVRemoteHandler"],[22,24,16,31],[22,27,16,34],[22,36,16,34,"useTVRemoteHandler"],[22,37,16,34],[22,39,16,40],[23,4,16,40,"_s"],[23,6,16,40],[24,4,17,2],[24,8,17,2,"_usePlayerStore"],[24,23,17,2],[24,26,17,85],[24,30,17,85,"usePlayerStore"],[24,50,17,99],[24,52,17,100],[24,53,17,101],[25,6,17,10,"showControls"],[25,18,17,22],[25,21,17,22,"_usePlayerStore"],[25,36,17,22],[25,37,17,10,"showControls"],[25,49,17,22],[26,6,17,24,"setShowControls"],[26,21,17,39],[26,24,17,39,"_usePlayerStore"],[26,39,17,39],[26,40,17,24,"setShowControls"],[26,55,17,39],[27,6,17,41,"showEpisodeModal"],[27,22,17,57],[27,25,17,57,"_usePlayerStore"],[27,40,17,57],[27,41,17,41,"showEpisodeModal"],[27,57,17,57],[28,6,17,59,"togglePlayPause"],[28,21,17,74],[28,24,17,74,"_usePlayerStore"],[28,39,17,74],[28,40,17,59,"togglePlayPause"],[28,55,17,74],[29,6,17,76,"seek"],[29,10,17,80],[29,13,17,80,"_usePlayerStore"],[29,28,17,80],[29,29,17,76,"seek"],[29,33,17,80],[30,4,19,2],[30,8,19,8,"controlsTimer"],[30,21,19,21],[30,24,19,24],[30,28,19,24,"useRef"],[30,41,19,30],[30,43,19,54],[30,47,19,58],[30,48,19,59],[31,4,20,2],[31,8,20,8,"fastForwardIntervalRef"],[31,30,20,30],[31,33,20,33],[31,37,20,33,"useRef"],[31,50,20,39],[31,52,20,63],[31,56,20,67],[31,57,20,68],[33,4,22,2],[34,4,23,2],[34,8,23,8,"resetTimer"],[34,18,23,18],[34,21,23,21],[34,25,23,21,"useCallback"],[34,43,23,32],[34,45,23,33],[34,57,23,39],[35,6,24,4],[36,6,25,4],[36,10,25,8,"controlsTimer"],[36,23,25,21],[36,24,25,22,"current"],[36,31,25,29],[36,33,25,31],[37,8,26,6,"clearTimeout"],[37,20,26,18],[37,21,26,19,"controlsTimer"],[37,34,26,32],[37,35,26,33,"current"],[37,42,26,40],[37,43,26,41],[38,6,27,4],[39,6,28,4],[40,6,29,4,"controlsTimer"],[40,19,29,17],[40,20,29,18,"current"],[40,27,29,25],[40,30,29,28,"setTimeout"],[40,40,29,38],[40,41,29,39],[40,53,29,45],[41,8,30,6,"setShowControls"],[41,23,30,21],[41,24,30,22],[41,29,30,27],[41,30,30,28],[42,6,31,4],[42,7,31,5],[42,9,31,7,"CONTROLS_TIMEOUT"],[42,25,31,23],[42,26,31,24],[43,4,32,2],[43,5,32,3],[43,7,32,5],[43,8,32,6,"setShowControls"],[43,23,32,21],[43,24,32,22],[43,25,32,23],[45,4,34,2],[46,4,35,2],[46,8,35,2,"useEffect"],[46,24,35,11],[46,26,35,12],[46,38,35,18],[47,6,36,4],[47,10,36,8,"showControls"],[47,22,36,20],[47,24,36,22],[48,8,37,6,"resetTimer"],[48,18,37,16],[48,19,37,17],[48,20,37,18],[49,6,38,4],[49,7,38,5],[49,13,38,11],[50,8,39,6],[51,8,40,6],[51,12,40,10,"controlsTimer"],[51,25,40,23],[51,26,40,24,"current"],[51,33,40,31],[51,35,40,33],[52,10,41,8,"clearTimeout"],[52,22,41,20],[52,23,41,21,"controlsTimer"],[52,36,41,34],[52,37,41,35,"current"],[52,44,41,42],[52,45,41,43],[53,8,42,6],[54,6,43,4],[56,6,45,4],[57,6,46,4],[57,13,46,11],[57,25,46,17],[58,8,47,6],[58,12,47,10,"controlsTimer"],[58,25,47,23],[58,26,47,24,"current"],[58,33,47,31],[58,35,47,33],[59,10,48,8,"clearTimeout"],[59,22,48,20],[59,23,48,21,"controlsTimer"],[59,36,48,34],[59,37,48,35,"current"],[59,44,48,42],[59,45,48,43],[60,8,49,6],[61,6,50,4],[61,7,50,5],[62,4,51,2],[62,5,51,3],[62,7,51,5],[62,8,51,6,"showControls"],[62,20,51,18],[62,22,51,20,"resetTimer"],[62,32,51,30],[62,33,51,31],[62,34,51,32],[64,4,53,2],[65,4,54,2],[65,8,54,2,"useEffect"],[65,24,54,11],[65,26,54,12],[65,38,54,18],[66,6,55,4],[66,13,55,11],[66,25,55,17],[67,8,56,6],[67,12,56,10,"fastForwardIntervalRef"],[67,34,56,32],[67,35,56,33,"current"],[67,42,56,40],[67,44,56,42],[68,10,57,8,"clearInterval"],[68,23,57,21],[68,24,57,22,"fastForwardIntervalRef"],[68,46,57,44],[68,47,57,45,"current"],[68,54,57,52],[68,55,57,53],[69,8,58,6],[70,6,59,4],[70,7,59,5],[71,4,60,2],[71,5,60,3],[71,7,60,5],[71,9,60,7],[71,10,60,8],[73,4,62,2],[74,4,63,2],[74,8,63,8,"handleTVEvent"],[74,21,63,21],[74,24,63,24],[74,28,63,24,"useCallback"],[74,46,63,35],[74,48,64,4],[74,58,64,5,"event"],[74,63,64,19],[74,65,64,24],[75,6,65,6],[75,10,65,10,"showEpisodeModal"],[75,26,65,26],[75,28,65,28],[76,8,66,8],[77,6,67,6],[78,6,69,6],[78,10,69,10,"event"],[78,15,69,15],[78,16,69,16,"eventType"],[78,25,69,25],[78,30,69,30],[78,41,69,41],[78,45,69,45,"event"],[78,50,69,50],[78,51,69,51,"eventType"],[78,60,69,60],[78,65,69,65],[78,75,69,75],[78,77,69,77],[79,8,70,8],[79,12,70,12,"event"],[79,17,70,17],[79,18,70,18,"eventKeyAction"],[79,32,70,32],[79,37,70,37],[79,38,70,38],[79,40,70,40],[80,10,71,10],[80,14,71,14,"fastForwardIntervalRef"],[80,36,71,36],[80,37,71,37,"current"],[80,44,71,44],[80,46,71,46],[81,12,72,12,"clearInterval"],[81,25,72,25],[81,26,72,26,"fastForwardIntervalRef"],[81,48,72,48],[81,49,72,49,"current"],[81,56,72,56],[81,57,72,57],[82,12,73,12,"fastForwardIntervalRef"],[82,34,73,34],[82,35,73,35,"current"],[82,42,73,42],[82,45,73,45],[82,49,73,49],[83,10,74,10],[84,8,75,8],[85,6,76,6],[86,6,78,6,"resetTimer"],[86,16,78,16],[86,17,78,17],[86,18,78,18],[87,6,80,6],[87,10,80,10,"showControls"],[87,22,80,22],[87,24,80,24],[88,8,81,8],[89,8,82,8],[90,8,83,8],[91,6,84,6],[92,6,86,6],[92,14,86,14,"event"],[92,19,86,19],[92,20,86,20,"eventType"],[92,29,86,29],[93,8,87,8],[93,13,87,13],[93,21,87,21],[94,10,88,10,"togglePlayPause"],[94,25,88,25],[94,26,88,26],[94,27,88,27],[95,10,89,10,"setShowControls"],[95,25,89,25],[95,26,89,26],[95,30,89,30],[95,31,89,31],[96,10,90,10],[97,8,91,8],[97,13,91,13],[97,19,91,19],[98,10,92,10,"seek"],[98,14,92,14],[98,15,92,15],[98,16,92,16,"SEEK_STEP"],[98,25,92,25],[98,26,92,26],[98,27,92,27],[98,28,92,28],[99,10,93,10],[100,8,94,8],[100,13,94,13],[100,23,94,23],[101,10,95,10],[101,14,95,14],[101,15,95,15,"fastForwardIntervalRef"],[101,37,95,37],[101,38,95,38,"current"],[101,45,95,45],[101,49,95,49,"event"],[101,54,95,54],[101,55,95,55,"eventKeyAction"],[101,69,95,69],[101,74,95,74],[101,75,95,75],[101,77,95,77],[102,12,96,12,"fastForwardIntervalRef"],[102,34,96,34],[102,35,96,35,"current"],[102,42,96,42],[102,45,96,45,"setInterval"],[102,56,96,56],[102,57,96,57],[102,69,96,63],[103,14,97,14,"seek"],[103,18,97,18],[103,19,97,19],[103,20,97,20,"SEEK_STEP"],[103,29,97,29],[103,30,97,30],[104,12,98,12],[104,13,98,13],[104,15,98,15],[104,18,98,18],[104,19,98,19],[105,10,99,10],[106,10,100,10],[107,8,101,8],[107,13,101,13],[107,20,101,20],[108,10,102,10,"seek"],[108,14,102,14],[108,15,102,15,"SEEK_STEP"],[108,24,102,24],[108,25,102,25],[109,10,103,10],[110,8,104,8],[110,13,104,13],[110,24,104,24],[111,10,105,10],[112,10,106,10],[112,14,106,14],[112,15,106,15,"fastForwardIntervalRef"],[112,37,106,37],[112,38,106,38,"current"],[112,45,106,45],[112,49,106,49,"event"],[112,54,106,54],[112,55,106,55,"eventKeyAction"],[112,69,106,69],[112,74,106,74],[112,75,106,75],[112,77,106,77],[113,12,107,12,"fastForwardIntervalRef"],[113,34,107,34],[113,35,107,35,"current"],[113,42,107,42],[113,45,107,45,"setInterval"],[113,56,107,56],[113,57,107,57],[113,69,107,63],[114,14,108,14,"seek"],[114,18,108,18],[114,19,108,19,"SEEK_STEP"],[114,28,108,28],[114,29,108,29],[115,12,109,12],[115,13,109,13],[115,15,109,15],[115,18,109,18],[115,19,109,19],[116,10,110,10],[117,10,111,10],[118,8,112,8],[118,13,112,13],[118,19,112,19],[119,10,113,10,"setShowControls"],[119,25,113,25],[119,26,113,26],[119,30,113,30],[119,31,113,31],[120,10,114,10],[121,6,115,6],[122,4,116,4],[122,5,116,5],[122,7,117,4],[122,8,117,5,"showControls"],[122,20,117,17],[122,22,117,19,"showEpisodeModal"],[122,38,117,35],[122,40,117,37,"setShowControls"],[122,55,117,52],[122,57,117,54,"resetTimer"],[122,67,117,64],[122,69,117,66,"togglePlayPause"],[122,84,117,81],[122,86,117,83,"seek"],[122,90,117,87],[122,91,118,2],[122,92,118,3],[123,4,120,2,"useTVEventHandler"],[123,21,120,19],[123,22,120,20,"handleTVEvent"],[123,35,120,33],[123,36,120,34],[125,4,122,2],[126,4,123,2],[126,8,123,8,"onScreenPress"],[126,21,123,21],[126,24,123,24],[126,33,123,24,"onScreenPress"],[126,34,123,24],[126,36,123,30],[127,6,124,4],[128,6,125,4],[128,10,125,10,"newShowControls"],[128,25,125,25],[128,28,125,28],[128,29,125,29,"showControls"],[128,41,125,41],[129,6,126,4,"setShowControls"],[129,21,126,19],[129,22,126,20,"newShowControls"],[129,37,126,35],[129,38,126,36],[131,6,128,4],[132,6,129,4],[132,10,129,8,"newShowControls"],[132,25,129,23],[132,27,129,25],[133,8,130,6,"resetTimer"],[133,18,130,16],[133,19,130,17],[133,20,130,18],[134,6,131,4],[135,4,132,2],[135,5,132,3],[136,4,134,2],[136,11,134,9],[137,6,134,11,"onScreenPress"],[138,4,134,25],[138,5,134,26],[139,2,135,0],[139,3,135,1],[140,2,135,2,"exports"],[140,9,135,2],[140,10,135,2,"useTVRemoteHandler"],[140,28,135,2],[140,31,135,2,"useTVRemoteHandler"],[140,49,135,2],[141,2,135,2,"_s"],[141,4,135,2],[141,5,16,13,"useTVRemoteHandler"],[141,23,16,31],[142,4,16,31],[142,12,17,85,"usePlayerStore"],[142,32,17,99],[142,34,120,2,"useTVEventHandler"],[142,51,120,19],[143,2,120,19],[144,0,120,19]],"functionMap":{"names":["<global>","useTVRemoteHandler","resetTimer","setTimeout$argument_0","useEffect$argument_0","<anonymous>","handleTVEvent","setInterval$argument_0","onScreenPress"],"mappings":"AAA;kCCe;iCCO;uCCM;KDE;GDC;YGG;WCW;KDI;GHC;YGG;WCC;KDI;GHC;IKI;yDCgC;aDE;yDCS;aDE;KLO;wBOO;GPS;CDG"}},"type":"js/module"}]}