{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":141,"column":0,"index":3498}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":55,"index":55}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":56},"end":{"line":2,"column":49,"index":105}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}},{"name":"../stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":50,"index":156}}],"key":"IqIRCjYc+BYOz73vlGmXzcU79vg="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTVRemoteHandler = void 0;\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[3], \"../stores/playerStore\"));\n  var _s = $RefreshSig$();\n  var SEEK_STEP = 20 * 1000; // 快进/快退的时间步长（毫秒）\n\n  // 定时器延迟时间（毫秒）\n  var CONTROLS_TIMEOUT = 5000;\n\n  // 定义遥控器事件类型\n\n  /**\n   * 管理播放器控件的显示/隐藏、遥控器事件和自动隐藏定时器。\n   * @returns onScreenPress - 一个函数，用于处理屏幕点击事件，以显示控件并重置定时器。\n   */\n  var useTVRemoteHandler = function () {\n    _s();\n    var _usePlayerStore = (0, _playerStore.default)(),\n      showControls = _usePlayerStore.showControls,\n      setShowControls = _usePlayerStore.setShowControls,\n      showEpisodeModal = _usePlayerStore.showEpisodeModal,\n      togglePlayPause = _usePlayerStore.togglePlayPause,\n      seek = _usePlayerStore.seek;\n    var controlsTimer = (0, _react.useRef)(null);\n    var fastForwardIntervalRef = (0, _react.useRef)(null);\n\n    // 重置或启动隐藏控件的定时器\n    var resetTimer = (0, _react.useCallback)(function () {\n      // 清除之前的定时器\n      if (controlsTimer.current) {\n        clearTimeout(controlsTimer.current);\n      }\n      // 设置新的定时器\n      controlsTimer.current = setTimeout(function () {\n        setShowControls(false);\n      }, CONTROLS_TIMEOUT);\n    }, [setShowControls]);\n\n    // 当控件显示时，启动定时器\n    (0, _react.useEffect)(function () {\n      if (showControls) {\n        resetTimer();\n      } else {\n        // 如果控件被隐藏，清除定时器\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      }\n\n      // 组件卸载时清除定时器\n      return function () {\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      };\n    }, [showControls, resetTimer]);\n\n    // 组件卸载时清除快进定时器\n    (0, _react.useEffect)(function () {\n      return function () {\n        if (fastForwardIntervalRef.current) {\n          clearInterval(fastForwardIntervalRef.current);\n        }\n      };\n    }, []);\n\n    // 处理遥控器事件\n    var handleTVEvent = (0, _react.useCallback)(function (event) {\n      if (showEpisodeModal) {\n        return;\n      }\n      if (event.eventType === \"longRight\" || event.eventType === \"longLeft\") {\n        if (event.eventKeyAction === 1) {\n          if (fastForwardIntervalRef.current) {\n            clearInterval(fastForwardIntervalRef.current);\n            fastForwardIntervalRef.current = null;\n          }\n        }\n      }\n      resetTimer();\n      if (showControls) {\n        // 如果控制条已显示，则不处理后台的快进/快退等操作\n        // 避免与控制条上的按钮焦点冲突\n        return;\n      }\n      switch (event.eventType) {\n        case \"select\":\n          togglePlayPause();\n          setShowControls(true);\n          break;\n        case \"left\":\n          seek(-SEEK_STEP); // 快退15秒\n          break;\n        case \"longLeft\":\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(-SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"right\":\n          seek(SEEK_STEP);\n          break;\n        case \"longRight\":\n          // 长按开始: 启动连续快进\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"down\":\n          setShowControls(true);\n          break;\n      }\n    }, [showControls, showEpisodeModal, setShowControls, resetTimer, togglePlayPause, seek]);\n\n    // 使用类型断言确保兼容性\n    (0, _reactNative.useTVEventHandler)(handleTVEvent);\n\n    // 处理屏幕点击事件\n    var onScreenPress = function () {\n      // 切换控件的显示状态\n      var newShowControls = !showControls;\n      setShowControls(newShowControls);\n\n      // 如果控件变为显示状态，则重置定时器\n      if (newShowControls) {\n        resetTimer();\n      }\n    };\n    return {\n      onScreenPress\n    };\n  };\n  exports.useTVRemoteHandler = useTVRemoteHandler;\n  _s(useTVRemoteHandler, \"tjCH28Lh3R+v2E6Pz9CA7u88X9M=\", false, function () {\n    return [_playerStore.default, _reactNative.useTVEventHandler];\n  });\n});","lineCount":146,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"require"],[7,22,1,0],[7,23,1,0,"_dependencyMap"],[7,37,1,0],[8,2,2,0],[8,6,2,0,"_reactNative"],[8,18,2,0],[8,21,2,0,"require"],[8,28,2,0],[8,29,2,0,"_dependencyMap"],[8,43,2,0],[9,2,3,0],[9,6,3,0,"_playerStore"],[9,18,3,0],[9,21,3,0,"_interopRequireDefault"],[9,43,3,0],[9,44,3,0,"require"],[9,51,3,0],[9,52,3,0,"_dependencyMap"],[9,66,3,0],[10,2,3,50],[10,6,3,50,"_s"],[10,8,3,50],[10,11,3,50,"$RefreshSig$"],[10,23,3,50],[11,2,5,0],[11,6,5,6,"SEEK_STEP"],[11,15,5,15],[11,18,5,18],[11,20,5,20],[11,23,5,23],[11,27,5,27],[11,28,5,28],[11,29,5,29],[13,2,7,0],[14,2,8,0],[14,6,8,6,"CONTROLS_TIMEOUT"],[14,22,8,22],[14,25,8,25],[14,29,8,29],[16,2,10,0],[18,2,16,0],[19,0,17,0],[20,0,18,0],[21,0,19,0],[22,2,20,7],[22,6,20,13,"useTVRemoteHandler"],[22,24,20,31],[22,27,20,34],[22,36,20,34,"useTVRemoteHandler"],[22,37,20,34],[22,39,20,40],[23,4,20,40,"_s"],[23,6,20,40],[24,4,21,2],[24,8,21,2,"_usePlayerStore"],[24,23,21,2],[24,26,21,85],[24,30,21,85,"usePlayerStore"],[24,50,21,99],[24,52,21,100],[24,53,21,101],[25,6,21,10,"showControls"],[25,18,21,22],[25,21,21,22,"_usePlayerStore"],[25,36,21,22],[25,37,21,10,"showControls"],[25,49,21,22],[26,6,21,24,"setShowControls"],[26,21,21,39],[26,24,21,39,"_usePlayerStore"],[26,39,21,39],[26,40,21,24,"setShowControls"],[26,55,21,39],[27,6,21,41,"showEpisodeModal"],[27,22,21,57],[27,25,21,57,"_usePlayerStore"],[27,40,21,57],[27,41,21,41,"showEpisodeModal"],[27,57,21,57],[28,6,21,59,"togglePlayPause"],[28,21,21,74],[28,24,21,74,"_usePlayerStore"],[28,39,21,74],[28,40,21,59,"togglePlayPause"],[28,55,21,74],[29,6,21,76,"seek"],[29,10,21,80],[29,13,21,80,"_usePlayerStore"],[29,28,21,80],[29,29,21,76,"seek"],[29,33,21,80],[30,4,23,2],[30,8,23,8,"controlsTimer"],[30,21,23,21],[30,24,23,24],[30,28,23,24,"useRef"],[30,41,23,30],[30,43,23,69],[30,47,23,73],[30,48,23,74],[31,4,24,2],[31,8,24,8,"fastForwardIntervalRef"],[31,30,24,30],[31,33,24,33],[31,37,24,33,"useRef"],[31,50,24,39],[31,52,24,79],[31,56,24,83],[31,57,24,84],[33,4,26,2],[34,4,27,2],[34,8,27,8,"resetTimer"],[34,18,27,18],[34,21,27,21],[34,25,27,21,"useCallback"],[34,43,27,32],[34,45,27,33],[34,57,27,39],[35,6,28,4],[36,6,29,4],[36,10,29,8,"controlsTimer"],[36,23,29,21],[36,24,29,22,"current"],[36,31,29,29],[36,33,29,31],[37,8,30,6,"clearTimeout"],[37,20,30,18],[37,21,30,19,"controlsTimer"],[37,34,30,32],[37,35,30,33,"current"],[37,42,30,40],[37,43,30,41],[38,6,31,4],[39,6,32,4],[40,6,33,4,"controlsTimer"],[40,19,33,17],[40,20,33,18,"current"],[40,27,33,25],[40,30,33,28,"setTimeout"],[40,40,33,38],[40,41,33,39],[40,53,33,45],[41,8,34,6,"setShowControls"],[41,23,34,21],[41,24,34,22],[41,29,34,27],[41,30,34,28],[42,6,35,4],[42,7,35,5],[42,9,35,7,"CONTROLS_TIMEOUT"],[42,25,35,23],[42,26,35,24],[43,4,36,2],[43,5,36,3],[43,7,36,5],[43,8,36,6,"setShowControls"],[43,23,36,21],[43,24,36,22],[43,25,36,23],[45,4,38,2],[46,4,39,2],[46,8,39,2,"useEffect"],[46,24,39,11],[46,26,39,12],[46,38,39,18],[47,6,40,4],[47,10,40,8,"showControls"],[47,22,40,20],[47,24,40,22],[48,8,41,6,"resetTimer"],[48,18,41,16],[48,19,41,17],[48,20,41,18],[49,6,42,4],[49,7,42,5],[49,13,42,11],[50,8,43,6],[51,8,44,6],[51,12,44,10,"controlsTimer"],[51,25,44,23],[51,26,44,24,"current"],[51,33,44,31],[51,35,44,33],[52,10,45,8,"clearTimeout"],[52,22,45,20],[52,23,45,21,"controlsTimer"],[52,36,45,34],[52,37,45,35,"current"],[52,44,45,42],[52,45,45,43],[53,8,46,6],[54,6,47,4],[56,6,49,4],[57,6,50,4],[57,13,50,11],[57,25,50,17],[58,8,51,6],[58,12,51,10,"controlsTimer"],[58,25,51,23],[58,26,51,24,"current"],[58,33,51,31],[58,35,51,33],[59,10,52,8,"clearTimeout"],[59,22,52,20],[59,23,52,21,"controlsTimer"],[59,36,52,34],[59,37,52,35,"current"],[59,44,52,42],[59,45,52,43],[60,8,53,6],[61,6,54,4],[61,7,54,5],[62,4,55,2],[62,5,55,3],[62,7,55,5],[62,8,55,6,"showControls"],[62,20,55,18],[62,22,55,20,"resetTimer"],[62,32,55,30],[62,33,55,31],[62,34,55,32],[64,4,57,2],[65,4,58,2],[65,8,58,2,"useEffect"],[65,24,58,11],[65,26,58,12],[65,38,58,18],[66,6,59,4],[66,13,59,11],[66,25,59,17],[67,8,60,6],[67,12,60,10,"fastForwardIntervalRef"],[67,34,60,32],[67,35,60,33,"current"],[67,42,60,40],[67,44,60,42],[68,10,61,8,"clearInterval"],[68,23,61,21],[68,24,61,22,"fastForwardIntervalRef"],[68,46,61,44],[68,47,61,45,"current"],[68,54,61,52],[68,55,61,53],[69,8,62,6],[70,6,63,4],[70,7,63,5],[71,4,64,2],[71,5,64,3],[71,7,64,5],[71,9,64,7],[71,10,64,8],[73,4,66,2],[74,4,67,2],[74,8,67,8,"handleTVEvent"],[74,21,67,21],[74,24,67,24],[74,28,67,24,"useCallback"],[74,46,67,35],[74,48,68,4],[74,58,68,5,"event"],[74,63,68,23],[74,65,68,28],[75,6,69,6],[75,10,69,10,"showEpisodeModal"],[75,26,69,26],[75,28,69,28],[76,8,70,8],[77,6,71,6],[78,6,73,6],[78,10,73,10,"event"],[78,15,73,15],[78,16,73,16,"eventType"],[78,25,73,25],[78,30,73,30],[78,41,73,41],[78,45,73,45,"event"],[78,50,73,50],[78,51,73,51,"eventType"],[78,60,73,60],[78,65,73,65],[78,75,73,75],[78,77,73,77],[79,8,74,8],[79,12,74,12,"event"],[79,17,74,17],[79,18,74,18,"eventKeyAction"],[79,32,74,32],[79,37,74,37],[79,38,74,38],[79,40,74,40],[80,10,75,10],[80,14,75,14,"fastForwardIntervalRef"],[80,36,75,36],[80,37,75,37,"current"],[80,44,75,44],[80,46,75,46],[81,12,76,12,"clearInterval"],[81,25,76,25],[81,26,76,26,"fastForwardIntervalRef"],[81,48,76,48],[81,49,76,49,"current"],[81,56,76,56],[81,57,76,57],[82,12,77,12,"fastForwardIntervalRef"],[82,34,77,34],[82,35,77,35,"current"],[82,42,77,42],[82,45,77,45],[82,49,77,49],[83,10,78,10],[84,8,79,8],[85,6,80,6],[86,6,82,6,"resetTimer"],[86,16,82,16],[86,17,82,17],[86,18,82,18],[87,6,84,6],[87,10,84,10,"showControls"],[87,22,84,22],[87,24,84,24],[88,8,85,8],[89,8,86,8],[90,8,87,8],[91,6,88,6],[92,6,90,6],[92,14,90,14,"event"],[92,19,90,19],[92,20,90,20,"eventType"],[92,29,90,29],[93,8,91,8],[93,13,91,13],[93,21,91,21],[94,10,92,10,"togglePlayPause"],[94,25,92,25],[94,26,92,26],[94,27,92,27],[95,10,93,10,"setShowControls"],[95,25,93,25],[95,26,93,26],[95,30,93,30],[95,31,93,31],[96,10,94,10],[97,8,95,8],[97,13,95,13],[97,19,95,19],[98,10,96,10,"seek"],[98,14,96,14],[98,15,96,15],[98,16,96,16,"SEEK_STEP"],[98,25,96,25],[98,26,96,26],[98,27,96,27],[98,28,96,28],[99,10,97,10],[100,8,98,8],[100,13,98,13],[100,23,98,23],[101,10,99,10],[101,14,99,14],[101,15,99,15,"fastForwardIntervalRef"],[101,37,99,37],[101,38,99,38,"current"],[101,45,99,45],[101,49,99,49,"event"],[101,54,99,54],[101,55,99,55,"eventKeyAction"],[101,69,99,69],[101,74,99,74],[101,75,99,75],[101,77,99,77],[102,12,100,12,"fastForwardIntervalRef"],[102,34,100,34],[102,35,100,35,"current"],[102,42,100,42],[102,45,100,45,"setInterval"],[102,56,100,56],[102,57,100,57],[102,69,100,63],[103,14,101,14,"seek"],[103,18,101,18],[103,19,101,19],[103,20,101,20,"SEEK_STEP"],[103,29,101,29],[103,30,101,30],[104,12,102,12],[104,13,102,13],[104,15,102,15],[104,18,102,18],[104,19,102,19],[105,10,103,10],[106,10,104,10],[107,8,105,8],[107,13,105,13],[107,20,105,20],[108,10,106,10,"seek"],[108,14,106,14],[108,15,106,15,"SEEK_STEP"],[108,24,106,24],[108,25,106,25],[109,10,107,10],[110,8,108,8],[110,13,108,13],[110,24,108,24],[111,10,109,10],[112,10,110,10],[112,14,110,14],[112,15,110,15,"fastForwardIntervalRef"],[112,37,110,37],[112,38,110,38,"current"],[112,45,110,45],[112,49,110,49,"event"],[112,54,110,54],[112,55,110,55,"eventKeyAction"],[112,69,110,69],[112,74,110,74],[112,75,110,75],[112,77,110,77],[113,12,111,12,"fastForwardIntervalRef"],[113,34,111,34],[113,35,111,35,"current"],[113,42,111,42],[113,45,111,45,"setInterval"],[113,56,111,56],[113,57,111,57],[113,69,111,63],[114,14,112,14,"seek"],[114,18,112,18],[114,19,112,19,"SEEK_STEP"],[114,28,112,28],[114,29,112,29],[115,12,113,12],[115,13,113,13],[115,15,113,15],[115,18,113,18],[115,19,113,19],[116,10,114,10],[117,10,115,10],[118,8,116,8],[118,13,116,13],[118,19,116,19],[119,10,117,10,"setShowControls"],[119,25,117,25],[119,26,117,26],[119,30,117,30],[119,31,117,31],[120,10,118,10],[121,6,119,6],[122,4,120,4],[122,5,120,5],[122,7,121,4],[122,8,121,5,"showControls"],[122,20,121,17],[122,22,121,19,"showEpisodeModal"],[122,38,121,35],[122,40,121,37,"setShowControls"],[122,55,121,52],[122,57,121,54,"resetTimer"],[122,67,121,64],[122,69,121,66,"togglePlayPause"],[122,84,121,81],[122,86,121,83,"seek"],[122,90,121,87],[122,91,122,2],[122,92,122,3],[124,4,124,2],[125,4,125,2],[125,8,125,2,"useTVEventHandler"],[125,38,125,19],[125,40,125,20,"handleTVEvent"],[125,53,125,40],[125,54,125,41],[127,4,127,2],[128,4,128,2],[128,8,128,8,"onScreenPress"],[128,21,128,21],[128,24,128,24],[128,33,128,24,"onScreenPress"],[128,34,128,24],[128,36,128,30],[129,6,129,4],[130,6,130,4],[130,10,130,10,"newShowControls"],[130,25,130,25],[130,28,130,28],[130,29,130,29,"showControls"],[130,41,130,41],[131,6,131,4,"setShowControls"],[131,21,131,19],[131,22,131,20,"newShowControls"],[131,37,131,35],[131,38,131,36],[133,6,133,4],[134,6,134,4],[134,10,134,8,"newShowControls"],[134,25,134,23],[134,27,134,25],[135,8,135,6,"resetTimer"],[135,18,135,16],[135,19,135,17],[135,20,135,18],[136,6,136,4],[137,4,137,2],[137,5,137,3],[138,4,139,2],[138,11,139,9],[139,6,139,11,"onScreenPress"],[140,4,139,25],[140,5,139,26],[141,2,140,0],[141,3,140,1],[142,2,140,2,"exports"],[142,9,140,2],[142,10,140,2,"useTVRemoteHandler"],[142,28,140,2],[142,31,140,2,"useTVRemoteHandler"],[142,49,140,2],[143,2,140,2,"_s"],[143,4,140,2],[143,5,20,13,"useTVRemoteHandler"],[143,23,20,31],[144,4,20,31],[144,12,21,85,"usePlayerStore"],[144,32,21,99],[144,34,125,2,"useTVEventHandler"],[144,64,125,19],[145,2,125,19],[146,0,125,19]],"functionMap":{"names":["<global>","useTVRemoteHandler","resetTimer","setTimeout$argument_0","useEffect$argument_0","<anonymous>","handleTVEvent","setInterval$argument_0","onScreenPress"],"mappings":"AAA;kCCmB;iCCO;uCCM;KDE;GDC;YGG;WCW;KDI;GHC;YGG;WCC;KDI;GHC;IKI;yDCgC;aDE;yDCS;aDE;KLO;wBOQ;GPS;CDG"}},"type":"js/module"}]}