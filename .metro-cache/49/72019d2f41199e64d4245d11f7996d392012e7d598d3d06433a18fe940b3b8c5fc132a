{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":206,"column":33,"index":7796}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":0,"index":225},"end":{"line":13,"column":65,"index":290}}],"key":"cO+kR170JcyEW83FKera/I0tgxg="}},{"name":"@babel/runtime/helpers/createForOfIteratorHelperLoose","data":{"asyncType":null,"locs":[{"start":{"line":14,"column":0,"index":291},"end":{"line":14,"column":100,"index":391}}],"key":"jCLZUNQX7lPTz9OJifTXW6NeT0o="}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"locs":[{"start":{"line":15,"column":0,"index":392},"end":{"line":15,"column":43,"index":435}}],"key":"avnjoAx2FQYjx6eZ7ALk+OuZk68="}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var s=t(r(d[1])),n=t(r(d[2])),l=t(r(d[3]));function h(t,s,n,l,h,u){if(c(n,l,h))return!0;var v=o(n,l,h);return 100*(t?v/h:v/u)>=s}function o(t,s,n){var l=Math.min(s,n)-Math.max(t,0);return Math.max(0,l)}function c(t,s,n){return t>=0&&s<=n&&s>t}e.default=class{constructor(t){void 0===t&&(t={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=t}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(t,s,n,o,c){var u=t.getItemCount(t.data),v=this._config,f=v.itemVisiblePercentThreshold,_=v.viewAreaCoveragePercentThreshold,w=null!=_,I=w?_:f;(0,l.default)(null!=I&&null!=f!=(null!=_),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var b=[];if(0===u)return b;var p=-1,y=c||{first:0,last:u-1},T=y.first,V=y.last;if(V>=u)return[];for(var M=T;M<=V;M++){var C=o(M,t);if(C){var P=C.offset-s,A=P+C.length;if(P<n&&A>0)p=M,h(w,I,P,A,n,C.length)&&b.push(M);else if(p>=0)break}}return b}onUpdate(t,s,n,l,h,o,c){var u=t.getItemCount(t.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==u&&l(0,t)){var v=[];if(u&&(v=this.computeViewableItems(t,s,n,l,c)),this._viewableIndices.length!==v.length||!this._viewableIndices.every((t,s)=>t===v[s]))if(this._viewableIndices=v,this._config.minimumViewTime){var f=setTimeout(()=>{this._timers.delete(f),this._onUpdateSync(t,v,o,h)},this._config.minimumViewTime);this._timers.add(f)}else this._onUpdateSync(t,v,o,h)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(t,l,h,o){l=l.filter(t=>this._viewableIndices.includes(t));for(var c,u=this._viewableItems,v=new Map(l.map(s=>{var n=o(s,!0,t);return[n.key,n]})),f=[],_=(0,n.default)(v);!(c=_()).done;){var w=c.value,I=w[0],b=w[1];u.has(I)||f.push(b)}for(var p,y=(0,n.default)(u);!(p=y()).done;){var T=p.value,V=T[0],M=T[1];v.has(V)||f.push((0,s.default)((0,s.default)({},M),{},{isViewable:!1}))}f.length>0&&(this._viewableItems=v,h({viewableItems:Array.from(v.values()),changed:f,viewabilityConfig:this._config}))}}});","lineCount":1,"map":[[1,28,11,0],[1,41,11,13],[1,45,11,13,"_interopRequireDefault"],[1,47,11,13,"r"],[1,49,11,13,"d"],[1,51,11,13],[1,55,11,13,"Object"],[1,62,11,13,"defineProperty"],[1,77,11,13,"e"],[1,79,11,13],[1,93,11,13,"value"],[1,100,11,13],[1,104,11,13,"e"],[1,106,11,13,"default"],[1,119,11,13,"undefined"],[1,121,13,0],[1,125,13,0,"_objectSpread2"],[1,127,13,0,"_interopRequireDefault"],[1,129,13,0,"r"],[1,131,13,0,"d"],[1,133,13,0],[1,138,14,0,"_createForOfIteratorHelperLoose2"],[1,140,14,0,"_interopRequireDefault"],[1,142,14,0,"r"],[1,144,14,0,"d"],[1,146,14,0],[1,151,15,0,"_invariant"],[1,153,15,0,"_interopRequireDefault"],[1,155,15,0,"r"],[1,157,15,0,"d"],[1,159,15,0],[1,164,190,0],[1,173,190,9,"_isViewable"],[1,175,190,21,"viewAreaMode"],[1,177,190,35,"viewablePercentThreshold"],[1,179,190,61,"top"],[1,181,190,66,"bottom"],[1,183,190,74,"viewportHeight"],[1,185,190,90,"itemLength"],[1,188,191,2],[1,191,191,6,"_isEntirelyVisible"],[1,193,191,25,"top"],[1,195,191,30,"bottom"],[1,197,191,38,"viewportHeight"],[1,200,192,4],[1,207,192,11],[1,209,194,4],[1,213,194,8,"pixels"],[1,215,194,17,"_getPixelsVisible"],[1,217,194,35,"top"],[1,219,194,40,"bottom"],[1,221,194,48,"viewportHeight"],[1,224,196,4],[1,231,195,18],[1,236,195,25,"viewAreaMode"],[1,238,195,40,"pixels"],[1,240,195,49,"viewportHeight"],[1,242,195,66,"pixels"],[1,244,195,75,"itemLength"],[1,248,196,22,"viewablePercentThreshold"],[1,249,198,0],[1,250,199,0],[1,259,199,9,"_getPixelsVisible"],[1,261,199,27,"top"],[1,263,199,32,"bottom"],[1,265,199,40,"viewportHeight"],[1,268,200,2],[1,272,200,6,"visibleHeight"],[1,274,200,22,"Math"],[1,279,200,27,"min"],[1,283,200,31,"bottom"],[1,285,200,39,"viewportHeight"],[1,288,200,57,"Math"],[1,293,200,62,"max"],[1,297,200,66,"top"],[1,299,200,71],[1,302,201,2],[1,309,201,9,"Math"],[1,314,201,14,"max"],[1,318,201,18],[1,320,201,21,"visibleHeight"],[1,322,202,0],[1,323,203,0],[1,332,203,9,"_isEntirelyVisible"],[1,334,203,28,"top"],[1,336,203,33,"bottom"],[1,338,203,41,"viewportHeight"],[1,341,204,2],[1,348,204,9,"top"],[1,351,204,16],[1,354,204,21,"bottom"],[1,357,204,31,"viewportHeight"],[1,360,204,49,"bottom"],[1,362,204,58,"top"],[1,363,205,0],[1,364,205,1,"e"],[1,366,205,1,"default"],[1,374,28,0],[1,380,29,2,"constructor"],[1,392,29,14,"config"],[1,400,30,14,"undefined"],[1,404,30,8,"config"],[1,408,31,6,"config"],[1,410,31,15],[1,411,32,8,"viewAreaCoveragePercentThreshold"],[1,444,32,42],[1,448,35,4,"this"],[1,453,35,9,"_hasInteracted"],[1,469,35,26],[1,471,36,4,"this"],[1,476,36,9,"_timers"],[1,484,36,19],[1,488,36,23,"Set"],[1,492,37,4,"this"],[1,497,37,9,"_viewableIndices"],[1,514,37,28],[1,517,38,4,"this"],[1,522,38,9,"_viewableItems"],[1,537,38,26],[1,541,38,30,"Map"],[1,545,39,4,"this"],[1,550,39,9,"_config"],[1,558,39,19,"config"],[1,559,40,2],[1,560,45,2,"dispose"],[1,570,49,4,"this"],[1,575,49,9,"_timers"],[1,583,49,17,"forEach"],[1,591,49,25,"clearTimeout"],[1,604,50,2],[1,605,55,2,"computeViewableItems"],[1,626,55,23,"props"],[1,628,55,30,"scrollOffset"],[1,630,55,44,"viewportHeight"],[1,632,55,60,"getFrameMetrics"],[1,634,57,2,"renderRange"],[1,637,58,4],[1,641,58,8,"itemCount"],[1,643,58,20,"props"],[1,645,58,26,"getItemCount"],[1,658,58,39,"props"],[1,660,58,45,"data"],[1,666,59,8,"_this$_config"],[1,668,59,24,"this"],[1,673,59,29,"_config"],[1,681,60,6,"itemVisiblePercentThreshold"],[1,683,60,36,"_this$_config"],[1,685,60,50,"itemVisiblePercentThreshold"],[1,713,61,6,"viewAreaCoveragePercentThreshold"],[1,715,61,41,"_this$_config"],[1,717,61,55,"viewAreaCoveragePercentThreshold"],[1,750,62,8,"viewAreaMode"],[1,752,62,59],[1,758,62,23,"viewAreaCoveragePercentThreshold"],[1,760,63,8,"viewablePercentThreshold"],[1,762,63,35,"viewAreaMode"],[1,764,63,50,"viewAreaCoveragePercentThreshold"],[1,766,63,85,"itemVisiblePercentThreshold"],[1,769,64,4],[1,771,64,4,"invariant"],[1,782,64,42],[1,788,64,14,"viewablePercentThreshold"],[1,791,64,81],[1,797,64,50,"itemVisiblePercentThreshold"],[1,801,64,127],[1,807,64,91,"viewAreaCoveragePercentThreshold"],[1,810,64,134],[1,901,65,4],[1,905,65,8,"viewableIndices"],[1,907,65,26],[1,910,66,4],[1,913,66,22],[1,917,66,8,"itemCount"],[1,919,67,6],[1,926,67,13,"viewableIndices"],[1,928,69,4],[1,932,69,8,"firstVisible"],[1,935,69,20],[1,937,70,8,"_ref"],[1,939,70,15,"renderRange"],[1,942,70,30],[1,943,71,8,"first"],[1,949,71,15],[1,951,72,8,"last"],[1,956,72,14,"itemCount"],[1,958,72,26],[1,961,74,6,"first"],[1,963,74,14,"_ref"],[1,965,74,19,"first"],[1,971,75,6,"last"],[1,973,75,13,"_ref"],[1,975,75,18,"last"],[1,980,76,4],[1,983,76,8,"last"],[1,986,76,16,"itemCount"],[1,988,81,6],[1,994,81,13],[1,997,83,4],[1,1001,83,9],[1,1005,83,13,"idx"],[1,1007,83,19,"first"],[1,1009,83,26,"idx"],[1,1012,83,33,"last"],[1,1014,83,39,"idx"],[1,1018,83,46],[1,1019,84,6],[1,1023,84,10,"metrics"],[1,1025,84,20,"getFrameMetrics"],[1,1027,84,36,"idx"],[1,1029,84,41,"props"],[1,1032,85,6],[1,1035,85,11,"metrics"],[1,1037,85,6],[1,1038,88,6],[1,1042,88,10,"top"],[1,1044,88,16,"metrics"],[1,1046,88,24,"offset"],[1,1053,88,33,"scrollOffset"],[1,1055,89,10,"bottom"],[1,1057,89,19,"top"],[1,1059,89,25,"metrics"],[1,1061,89,33,"length"],[1,1068,90,6],[1,1071,90,10,"top"],[1,1073,90,16,"viewportHeight"],[1,1076,90,34,"bottom"],[1,1078,90,43],[1,1080,91,8,"firstVisible"],[1,1082,91,23,"idx"],[1,1084,92,12,"_isViewable"],[1,1086,92,24,"viewAreaMode"],[1,1088,92,38,"viewablePercentThreshold"],[1,1090,92,64,"top"],[1,1092,92,69,"bottom"],[1,1094,92,77,"viewportHeight"],[1,1096,92,93,"metrics"],[1,1098,92,101,"length"],[1,1107,93,10,"viewableIndices"],[1,1109,93,26,"push"],[1,1114,93,31,"idx"],[1,1122,95,13],[1,1125,95,17,"firstVisible"],[1,1128,95,33],[1,1130,96,8],[1,1135,87,6],[1,1136,98,4],[1,1137,99,4],[1,1144,99,11,"viewableIndices"],[1,1145,100,2],[1,1146,106,2,"onUpdate"],[1,1155,106,11,"props"],[1,1157,106,18,"scrollOffset"],[1,1159,106,32,"viewportHeight"],[1,1161,106,48,"getFrameMetrics"],[1,1163,106,65,"createViewToken"],[1,1165,106,82,"onViewableItemsChanged"],[1,1167,108,2,"renderRange"],[1,1170,109,4],[1,1174,109,8,"itemCount"],[1,1176,109,20,"props"],[1,1178,109,26,"getItemCount"],[1,1191,109,39,"props"],[1,1193,109,45,"data"],[1,1199,110,4],[1,1204,110,8,"this"],[1,1209,110,13,"_config"],[1,1217,110,21,"waitForInteraction"],[1,1237,110,44,"this"],[1,1242,110,49,"_hasInteracted"],[1,1259,110,81],[1,1263,110,67,"itemCount"],[1,1266,110,87,"getFrameMetrics"],[1,1268,110,103],[1,1270,110,106,"props"],[1,1273,110,4],[1,1274,113,4],[1,1278,113,8,"viewableIndices"],[1,1280,113,26],[1,1283,117,4],[1,1286,114,8,"itemCount"],[1,1290,115,6,"viewableIndices"],[1,1292,115,24,"this"],[1,1297,115,29,"computeViewableItems"],[1,1318,115,50,"props"],[1,1320,115,57,"scrollOffset"],[1,1322,115,71,"viewportHeight"],[1,1324,115,87,"getFrameMetrics"],[1,1326,115,104,"renderRange"],[1,1330,117,8,"this"],[1,1335,117,13,"_viewableIndices"],[1,1352,117,30,"length"],[1,1361,117,41,"viewableIndices"],[1,1363,117,57,"length"],[1,1372,117,67,"this"],[1,1377,117,72,"_viewableIndices"],[1,1394,117,89,"every"],[1,1400,117,95],[1,1401,117,96,"v"],[1,1403,117,99,"ii"],[1,1407,117,106,"v"],[1,1411,117,112,"viewableIndices"],[1,1413,117,128,"ii"],[1,1417,123,4],[1,1420,122,4,"this"],[1,1425,122,9,"_viewableIndices"],[1,1442,122,28,"viewableIndices"],[1,1444,123,8,"this"],[1,1449,123,13,"_config"],[1,1457,123,21,"minimumViewTime"],[1,1473,123,38],[1,1474,124,6],[1,1478,124,10,"handle"],[1,1480,124,19,"setTimeout"],[1,1491,124,30],[1,1496,128,8,"this"],[1,1501,128,13,"_timers"],[1,1509,128,21,"delete"],[1,1516,128,28,"handle"],[1,1519,129,8,"this"],[1,1524,129,13,"_onUpdateSync"],[1,1538,129,27,"props"],[1,1540,129,34,"viewableIndices"],[1,1542,129,51,"onViewableItemsChanged"],[1,1544,129,75,"createViewToken"],[1,1548,130,9,"this"],[1,1553,130,14,"_config"],[1,1561,130,22,"minimumViewTime"],[1,1578,134,6,"this"],[1,1583,134,11,"_timers"],[1,1591,134,19,"add"],[1,1595,134,23,"handle"],[1,1597,135,4],[1,1603,136,6,"this"],[1,1608,136,11,"_onUpdateSync"],[1,1622,136,25,"props"],[1,1624,136,32,"viewableIndices"],[1,1626,136,49,"onViewableItemsChanged"],[1,1628,136,73,"createViewToken"],[1,1630,112,4],[1,1631,138,2],[1,1632,143,2,"resetViewableIndices"],[1,1655,144,4,"this"],[1,1660,144,9,"_viewableIndices"],[1,1677,144,28],[1,1679,145,2],[1,1680,150,2,"recordInteraction"],[1,1700,151,4,"this"],[1,1705,151,9,"_hasInteracted"],[1,1721,151,26],[1,1722,152,2],[1,1723,153,2,"_onUpdateSync"],[1,1737,153,16,"props"],[1,1739,153,23,"viewableIndicesToCheck"],[1,1741,153,47,"onViewableItemsChanged"],[1,1743,153,71,"createViewToken"],[1,1746,155,4,"viewableIndicesToCheck"],[1,1748,155,29,"viewableIndicesToCheck"],[1,1750,155,52,"filter"],[1,1757,155,59,"ii"],[1,1760,155,65,"this"],[1,1765,155,70,"_viewableIndices"],[1,1782,155,87,"includes"],[1,1791,155,96,"ii"],[1,1795,162,4],[1,1799,156,4],[1,1803,162,69,"_step"],[1,1805,156,8,"prevItems"],[1,1807,156,20,"this"],[1,1812,156,25,"_viewableItems"],[1,1827,157,8,"nextItems"],[1,1829,157,20],[1,1833,157,24,"Map"],[1,1837,157,28,"viewableIndicesToCheck"],[1,1839,157,51,"map"],[1,1843,157,55,"ii"],[1,1847,158,6],[1,1851,158,10,"viewable"],[1,1853,158,21,"createViewToken"],[1,1855,158,37,"ii"],[1,1858,158,41],[1,1860,158,47,"props"],[1,1863,159,6],[1,1869,159,13],[1,1870,159,14,"viewable"],[1,1872,159,23,"key"],[1,1876,159,28,"viewable"],[1,1882,161,8,"changed"],[1,1884,161,18],[1,1887,162,13,"_iterator"],[1,1890,162,25],[1,1892,162,25,"_createForOfIteratorHelperLoose"],[1,1903,162,57,"nextItems"],[1,1908,162,78,"_step"],[1,1910,162,86,"_iterator"],[1,1915,162,99,"done"],[1,1921,162,106],[1,1922,163,6],[1,1926,163,10,"_step$value"],[1,1928,163,24,"_step"],[1,1930,163,30,"value"],[1,1936,164,8,"key"],[1,1938,164,14,"_step$value"],[1,1940,164,26],[1,1943,165,8,"viewable"],[1,1945,165,19,"_step$value"],[1,1947,165,31],[1,1950,166,11,"prevItems"],[1,1952,166,21,"has"],[1,1956,166,25,"key"],[1,1960,167,8,"changed"],[1,1962,167,16,"push"],[1,1967,167,21,"viewable"],[1,1969,169,4],[1,1970,170,4],[1,1974,170,9],[1,1978,170,70,"_step2"],[1,1980,170,13,"_iterator2"],[1,1983,170,26],[1,1985,170,26,"_createForOfIteratorHelperLoose"],[1,1996,170,58,"prevItems"],[1,2001,170,80,"_step2"],[1,2003,170,89,"_iterator2"],[1,2008,170,103,"done"],[1,2014,170,110],[1,2015,171,6],[1,2019,171,10,"_step2$value"],[1,2021,171,25,"_step2"],[1,2023,171,32,"value"],[1,2029,172,8,"_key"],[1,2031,172,15,"_step2$value"],[1,2033,172,28],[1,2036,173,8,"_viewable"],[1,2038,173,20,"_step2$value"],[1,2040,173,33],[1,2043,174,11,"nextItems"],[1,2045,174,21,"has"],[1,2049,174,25,"_key"],[1,2053,175,8,"changed"],[1,2055,175,16,"push"],[1,2061,175,21],[1,2063,175,21,"_objectSpread"],[1,2075,175,35],[1,2077,175,35,"_objectSpread"],[1,2088,175,49],[1,2089,175,50],[1,2091,175,53,"_viewable"],[1,2094,175,65],[1,2095,175,66],[1,2097,175,69],[1,2098,176,10,"isViewable"],[1,2110,176,22],[1,2114,179,4],[1,2115,180,8,"changed"],[1,2117,180,16,"length"],[1,2124,180,25],[1,2128,181,6,"this"],[1,2133,181,11,"_viewableItems"],[1,2148,181,28,"nextItems"],[1,2150,182,6,"onViewableItemsChanged"],[1,2152,182,29],[1,2153,183,8,"viewableItems"],[1,2167,183,23,"Array"],[1,2173,183,29,"from"],[1,2178,183,34,"nextItems"],[1,2180,183,44,"values"],[1,2190,184,8,"changed"],[1,2200,185,8,"viewabilityConfig"],[1,2218,185,27,"this"],[1,2223,185,32,"_config"],[1,2233,188,2],[1,2235,206,32]],"functionMap":{"names":["<global>","ViewabilityHelper","ViewabilityHelper#constructor","ViewabilityHelper#dispose","ViewabilityHelper#computeViewableItems","ViewabilityHelper#onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","ViewabilityHelper#resetViewableIndices","ViewabilityHelper#recordInteraction","ViewabilityHelper#_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC2B;ECC;GDW;EEK;GFK;EGK;GH6C;EIM;+FCW,oCD;8BEO;OFM;GJQ;EOK;GPE;EQK;GRE;ESC;2DCE,wCD;uDEE;KFG;GT4B;CDC;AaC;CbQ;AcC;CdG;AeC;CfE"}},"type":"js/module"}]}