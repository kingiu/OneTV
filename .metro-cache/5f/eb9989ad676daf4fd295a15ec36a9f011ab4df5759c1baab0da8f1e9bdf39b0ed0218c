{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":110,"column":0,"index":3450}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react-native-web/dist/exports/Image","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":110,"column":0,"index":3450}}],"key":"K9tB8byQ3IJYLlsKS48cXJDZils="}},{"name":"react-native-web/dist/exports/NativeModules","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":110,"column":0,"index":3450}}],"key":"QtZH+h2xCdR+0ckw8MxkXfVQIEQ="}},{"name":"./Socket","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":110},"end":{"line":5,"column":30,"index":140}}],"key":"E7yyUAWcYao+k1CPaFPmBaoLQcE="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _Image = _interopRequireDefault(require(_dependencyMap[1], \"react-native-web/dist/exports/Image\"));\n  var _NativeModules = _interopRequireDefault(require(_dependencyMap[2], \"react-native-web/dist/exports/NativeModules\"));\n  var _Socket = _interopRequireDefault(require(_dependencyMap[3], \"./Socket\"));\n  const Sockets = _NativeModules.default.TcpSockets;\n  /**\n   * @typedef {object} TLSSocketOptions\n   * @property {any} [ca]\n   * @property {any} [key]\n   * @property {any} [cert]\n   * @property {string} [androidKeyStore]\n   * @property {string} [certAlias]\n   * @property {string} [keyAlias]\n   * @property {string[]} [resolvedKeys]\n   *\n   * @extends {Socket}\n   */\n  class TLSSocket extends _Socket.default {\n    /**\n     * @param {Socket} socket Any instance of `Socket`.\n     * @param {TLSSocketOptions} [options] Options for the TLS socket.\n     */\n    constructor(socket) {\n      let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      super();\n      /** @private */\n      this._options = {\n        ...options\n      };\n      TLSSocket.resolveAssetIfNeeded(this._options, 'ca');\n      TLSSocket.resolveAssetIfNeeded(this._options, 'key');\n      TLSSocket.resolveAssetIfNeeded(this._options, 'cert');\n\n      /** @private */\n      this._socket = socket;\n      // @ts-ignore\n      this._setId(this._socket._id);\n      this._startTLS();\n      if (socket.pending || socket.connecting) socket.once('connect', () => this._initialize());else this._initialize();\n    }\n\n    /**\n     * @private\n     */\n    _initialize() {\n      // Avoid calling twice destroy() if an error occurs\n      this._socket._errorListener?.remove();\n      this.on('error', error => this._socket.emit('error', error));\n      this._setConnected({\n        // @ts-ignore\n        localAddress: this._socket.localAddress,\n        // @ts-ignore\n        localPort: this._socket.localPort,\n        // @ts-ignore\n        remoteAddress: this._socket.remoteAddress,\n        // @ts-ignore\n        remotePort: this._socket.remotePort,\n        // @ts-ignore\n        remoteFamily: this._socket.remoteFamily\n      });\n    }\n\n    /**\n     * @private\n     */\n    _startTLS() {\n      Sockets.startTLS(this._id, this._options);\n    }\n\n    /**\n     * Checks if a certificate identity exists in the keychain\n     * @param {object} options Object containing the identity aliases\n     * @param {string} [options.androidKeyStore] The android keystore type\n     * @param {string} [options.certAlias] The certificate alias\n     * @param {string} [options.keyAlias] The key alias\n     * @returns {Promise<boolean>} Promise resolving to true if identity exists\n     */\n    static hasIdentity() {\n      let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Sockets.hasIdentity({\n        androidKeyStore: options.androidKeyStore,\n        certAlias: options.certAlias,\n        keyAlias: options.keyAlias\n      });\n    }\n    getCertificate() {\n      return Sockets.getCertificate(this._id);\n    }\n    getPeerCertificate() {\n      return Sockets.getPeerCertificate(this._id);\n    }\n\n    /**\n     * @private\n     * Resolves the asset source if necessary and registers the resolved key.\n     * @param {TLSSocketOptions} options The options object containing the source to be resolved.\n     * @param {'ca' | 'key' | 'cert'} key The key name being resolved.\n     */\n    static resolveAssetIfNeeded(options, key) {\n      const source = options[key];\n      if (source && typeof source !== 'string') {\n        if (!options.resolvedKeys) {\n          options.resolvedKeys = [];\n        }\n        options.resolvedKeys.push(key);\n        options[key] = _Image.default.resolveAssetSource(source).uri;\n      }\n    }\n  }\n  exports.default = TLSSocket;\n});","lineCount":118,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"default"],[8,17,1,13],[9,2,1,13],[9,6,1,13,"_Image"],[9,12,1,13],[9,15,1,13,"_interopRequireDefault"],[9,37,1,13],[9,38,1,13,"require"],[9,45,1,13],[9,46,1,13,"_dependencyMap"],[9,60,1,13],[10,2,1,13],[10,6,1,13,"_NativeModules"],[10,20,1,13],[10,23,1,13,"_interopRequireDefault"],[10,45,1,13],[10,46,1,13,"require"],[10,53,1,13],[10,54,1,13,"_dependencyMap"],[10,68,1,13],[11,2,5,0],[11,6,5,0,"_Socket"],[11,13,5,0],[11,16,5,0,"_interopRequireDefault"],[11,38,5,0],[11,39,5,0,"require"],[11,46,5,0],[11,47,5,0,"_dependencyMap"],[11,61,5,0],[12,2,4,0],[12,8,4,6,"Sockets"],[12,15,4,13],[12,18,4,16,"NativeModules"],[12,40,4,29],[12,41,4,30,"TcpSockets"],[12,51,4,40],[13,2,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,0,14,0],[21,0,15,0],[22,0,16,0],[23,0,17,0],[24,0,18,0],[25,2,19,15],[25,8,19,21,"TLSSocket"],[25,17,19,30],[25,26,19,39,"Socket"],[25,41,19,45],[25,42,19,46],[26,4,20,4],[27,0,21,0],[28,0,22,0],[29,0,23,0],[30,4,24,4,"constructor"],[30,15,24,15,"constructor"],[30,16,24,16,"socket"],[30,22,24,22],[30,24,24,38],[31,6,24,38],[31,10,24,24,"options"],[31,17,24,31],[31,20,24,31,"arguments"],[31,29,24,31],[31,30,24,31,"length"],[31,36,24,31],[31,44,24,31,"arguments"],[31,53,24,31],[31,61,24,31,"undefined"],[31,70,24,31],[31,73,24,31,"arguments"],[31,82,24,31],[31,88,24,34],[31,89,24,35],[31,90,24,36],[32,6,25,8],[32,11,25,13],[32,12,25,14],[32,13,25,15],[33,6,26,8],[34,6,27,8],[34,10,27,12],[34,11,27,13,"_options"],[34,19,27,21],[34,22,27,24],[35,8,27,26],[35,11,27,29,"options"],[36,6,27,37],[36,7,27,38],[37,6,28,8,"TLSSocket"],[37,15,28,17],[37,16,28,18,"resolveAssetIfNeeded"],[37,36,28,38],[37,37,28,39],[37,41,28,43],[37,42,28,44,"_options"],[37,50,28,52],[37,52,28,54],[37,56,28,58],[37,57,28,59],[38,6,29,8,"TLSSocket"],[38,15,29,17],[38,16,29,18,"resolveAssetIfNeeded"],[38,36,29,38],[38,37,29,39],[38,41,29,43],[38,42,29,44,"_options"],[38,50,29,52],[38,52,29,54],[38,57,29,59],[38,58,29,60],[39,6,30,8,"TLSSocket"],[39,15,30,17],[39,16,30,18,"resolveAssetIfNeeded"],[39,36,30,38],[39,37,30,39],[39,41,30,43],[39,42,30,44,"_options"],[39,50,30,52],[39,52,30,54],[39,58,30,60],[39,59,30,61],[41,6,32,8],[42,6,33,8],[42,10,33,12],[42,11,33,13,"_socket"],[42,18,33,20],[42,21,33,23,"socket"],[42,27,33,29],[43,6,34,8],[44,6,35,8],[44,10,35,12],[44,11,35,13,"_setId"],[44,17,35,19],[44,18,35,20],[44,22,35,24],[44,23,35,25,"_socket"],[44,30,35,32],[44,31,35,33,"_id"],[44,34,35,36],[44,35,35,37],[45,6,36,8],[45,10,36,12],[45,11,36,13,"_startTLS"],[45,20,36,22],[45,21,36,23],[45,22,36,24],[46,6,37,8],[46,10,37,12,"socket"],[46,16,37,18],[46,17,37,19,"pending"],[46,24,37,26],[46,28,37,30,"socket"],[46,34,37,36],[46,35,37,37,"connecting"],[46,45,37,47],[46,47,37,49,"socket"],[46,53,37,55],[46,54,37,56,"once"],[46,58,37,60],[46,59,37,61],[46,68,37,70],[46,70,37,72],[46,76,37,78],[46,80,37,82],[46,81,37,83,"_initialize"],[46,92,37,94],[46,93,37,95],[46,94,37,96],[46,95,37,97],[46,96,37,98],[46,101,38,13],[46,105,38,17],[46,106,38,18,"_initialize"],[46,117,38,29],[46,118,38,30],[46,119,38,31],[47,4,39,4],[49,4,41,4],[50,0,42,0],[51,0,43,0],[52,4,44,4,"_initialize"],[52,15,44,15,"_initialize"],[52,16,44,15],[52,18,44,18],[53,6,45,8],[54,6,46,8],[54,10,46,12],[54,11,46,13,"_socket"],[54,18,46,20],[54,19,46,21,"_errorListener"],[54,33,46,35],[54,35,46,37,"remove"],[54,41,46,43],[54,42,46,44],[54,43,46,45],[55,6,47,8],[55,10,47,12],[55,11,47,13,"on"],[55,13,47,15],[55,14,47,16],[55,21,47,23],[55,23,47,26,"error"],[55,28,47,31],[55,32,47,36],[55,36,47,40],[55,37,47,41,"_socket"],[55,44,47,48],[55,45,47,49,"emit"],[55,49,47,53],[55,50,47,54],[55,57,47,61],[55,59,47,63,"error"],[55,64,47,68],[55,65,47,69],[55,66,47,70],[56,6,48,8],[56,10,48,12],[56,11,48,13,"_setConnected"],[56,24,48,26],[56,25,48,27],[57,8,49,12],[58,8,50,12,"localAddress"],[58,20,50,24],[58,22,50,26],[58,26,50,30],[58,27,50,31,"_socket"],[58,34,50,38],[58,35,50,39,"localAddress"],[58,47,50,51],[59,8,51,12],[60,8,52,12,"localPort"],[60,17,52,21],[60,19,52,23],[60,23,52,27],[60,24,52,28,"_socket"],[60,31,52,35],[60,32,52,36,"localPort"],[60,41,52,45],[61,8,53,12],[62,8,54,12,"remoteAddress"],[62,21,54,25],[62,23,54,27],[62,27,54,31],[62,28,54,32,"_socket"],[62,35,54,39],[62,36,54,40,"remoteAddress"],[62,49,54,53],[63,8,55,12],[64,8,56,12,"remotePort"],[64,18,56,22],[64,20,56,24],[64,24,56,28],[64,25,56,29,"_socket"],[64,32,56,36],[64,33,56,37,"remotePort"],[64,43,56,47],[65,8,57,12],[66,8,58,12,"remoteFamily"],[66,20,58,24],[66,22,58,26],[66,26,58,30],[66,27,58,31,"_socket"],[66,34,58,38],[66,35,58,39,"remoteFamily"],[67,6,59,8],[67,7,59,9],[67,8,59,10],[68,4,60,4],[70,4,62,4],[71,0,63,0],[72,0,64,0],[73,4,65,4,"_startTLS"],[73,13,65,13,"_startTLS"],[73,14,65,13],[73,16,65,16],[74,6,66,8,"Sockets"],[74,13,66,15],[74,14,66,16,"startTLS"],[74,22,66,24],[74,23,66,25],[74,27,66,29],[74,28,66,30,"_id"],[74,31,66,33],[74,33,66,35],[74,37,66,39],[74,38,66,40,"_options"],[74,46,66,48],[74,47,66,49],[75,4,67,4],[77,4,69,4],[78,0,70,0],[79,0,71,0],[80,0,72,0],[81,0,73,0],[82,0,74,0],[83,0,75,0],[84,0,76,0],[85,4,77,4],[85,11,77,11,"hasIdentity"],[85,22,77,22,"hasIdentity"],[85,23,77,22],[85,25,77,37],[86,6,77,37],[86,10,77,23,"options"],[86,17,77,30],[86,20,77,30,"arguments"],[86,29,77,30],[86,30,77,30,"length"],[86,36,77,30],[86,44,77,30,"arguments"],[86,53,77,30],[86,61,77,30,"undefined"],[86,70,77,30],[86,73,77,30,"arguments"],[86,82,77,30],[86,88,77,33],[86,89,77,34],[86,90,77,35],[87,6,78,8],[87,13,78,15,"Sockets"],[87,20,78,22],[87,21,78,23,"hasIdentity"],[87,32,78,34],[87,33,78,35],[88,8,79,12,"androidKeyStore"],[88,23,79,27],[88,25,79,29,"options"],[88,32,79,36],[88,33,79,37,"androidKeyStore"],[88,48,79,52],[89,8,80,12,"certAlias"],[89,17,80,21],[89,19,80,23,"options"],[89,26,80,30],[89,27,80,31,"certAlias"],[89,36,80,40],[90,8,81,12,"keyAlias"],[90,16,81,20],[90,18,81,22,"options"],[90,25,81,29],[90,26,81,30,"keyAlias"],[91,6,82,8],[91,7,82,9],[91,8,82,10],[92,4,83,4],[93,4,85,4,"getCertificate"],[93,18,85,18,"getCertificate"],[93,19,85,18],[93,21,85,21],[94,6,86,8],[94,13,86,15,"Sockets"],[94,20,86,22],[94,21,86,23,"getCertificate"],[94,35,86,37],[94,36,86,38],[94,40,86,42],[94,41,86,43,"_id"],[94,44,86,46],[94,45,86,47],[95,4,87,4],[96,4,89,4,"getPeerCertificate"],[96,22,89,22,"getPeerCertificate"],[96,23,89,22],[96,25,89,25],[97,6,90,8],[97,13,90,15,"Sockets"],[97,20,90,22],[97,21,90,23,"getPeerCertificate"],[97,39,90,41],[97,40,90,42],[97,44,90,46],[97,45,90,47,"_id"],[97,48,90,50],[97,49,90,51],[98,4,91,4],[100,4,93,4],[101,0,94,0],[102,0,95,0],[103,0,96,0],[104,0,97,0],[105,0,98,0],[106,4,99,4],[106,11,99,11,"resolveAssetIfNeeded"],[106,31,99,31,"resolveAssetIfNeeded"],[106,32,99,32,"options"],[106,39,99,39],[106,41,99,41,"key"],[106,44,99,44],[106,46,99,46],[107,6,100,8],[107,12,100,14,"source"],[107,18,100,20],[107,21,100,23,"options"],[107,28,100,30],[107,29,100,31,"key"],[107,32,100,34],[107,33,100,35],[108,6,101,8],[108,10,101,12,"source"],[108,16,101,18],[108,20,101,22],[108,27,101,29,"source"],[108,33,101,35],[108,38,101,40],[108,46,101,48],[108,48,101,50],[109,8,102,12],[109,12,102,16],[109,13,102,17,"options"],[109,20,102,24],[109,21,102,25,"resolvedKeys"],[109,33,102,37],[109,35,102,39],[110,10,103,16,"options"],[110,17,103,23],[110,18,103,24,"resolvedKeys"],[110,30,103,36],[110,33,103,39],[110,35,103,41],[111,8,104,12],[112,8,105,12,"options"],[112,15,105,19],[112,16,105,20,"resolvedKeys"],[112,28,105,32],[112,29,105,33,"push"],[112,33,105,37],[112,34,105,38,"key"],[112,37,105,41],[112,38,105,42],[113,8,106,12,"options"],[113,15,106,19],[113,16,106,20,"key"],[113,19,106,23],[113,20,106,24],[113,23,106,27,"Image"],[113,37,106,32],[113,38,106,33,"resolveAssetSource"],[113,56,106,51],[113,57,106,52,"source"],[113,63,106,58],[113,64,106,59],[113,65,106,60,"uri"],[113,68,106,63],[114,6,107,8],[115,4,108,4],[116,2,109,0],[117,2,109,1,"exports"],[117,9,109,1],[117,10,109,1,"default"],[117,17,109,1],[117,20,109,1,"TLSSocket"],[117,29,109,1],[118,0,109,1]],"functionMap":{"names":["<global>","TLSSocket","constructor","socket.once$argument_1","_initialize","on$argument_1","_startTLS","hasIdentity","getCertificate","getPeerCertificate","resolveAssetIfNeeded"],"mappings":"AAA;eCkB;ICK;wECa,wBD;KDE;IGK;yBCG,4CD;KHa;IKK;KLE;IMU;KNM;IOE;KPE;IQE;KRE;ISQ;KTS;CDC"}},"type":"js/module"}]}