{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":128,"column":0,"index":4067}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"zustand","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"xFAZpEovr+Y5/UCynUzO0ntFekY="}},{"name":"../services/storage","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":54,"index":88}}],"key":"RzdP/NBx83P9yNdisxxYiU7DTLg="}},{"name":"../services/api","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":89},"end":{"line":3,"column":52,"index":141}}],"key":"9k4jq6FYa7kulu8bjoa7L/z8gFU="}},{"name":"../services/storageConfig","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":142},"end":{"line":4,"column":58,"index":200}}],"key":"+YStSzamEJ6vW4YYaHvGxmWHQRg="}},{"name":"../utils/Logger","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":201},"end":{"line":5,"column":37,"index":238}}],"key":"rD5UrWJd899SO1d///YpsfF5nbE="}},{"name":"./remoteControlStore","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0,"index":239},"end":{"line":6,"column":61,"index":300}}],"key":"gHwbd6J6WVw/TvZSRBYBJPce6BI="}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,\"__esModule\",{value:!0}),e.useSettingsStore=void 0;var o=r(d[1]),s=r(d[2]),l=r(d[3]),n=r(d[4]),c=t(r(d[5])),u=r(d[6]);const S=c.default.withTag('SettingsStore');e.useSettingsStore=(0,o.create)((t,o)=>({apiBaseUrl:\"\",m3uUrl:\"\",liveStreamSources:[],remoteInputEnabled:!1,isModalVisible:!1,serverConfig:null,isLoadingServerConfig:!1,videoSource:{enabledAll:!0,sources:{}},loadSettings:async()=>{const n=await s.SettingsManager.get();t({apiBaseUrl:n.apiBaseUrl,m3uUrl:n.m3uUrl,remoteInputEnabled:n.remoteInputEnabled||!1,videoSource:n.videoSource||{enabledAll:!0,sources:{}}}),n.apiBaseUrl&&(l.api.setBaseUrl(n.apiBaseUrl),await o().fetchServerConfig())},fetchServerConfig:async()=>{t({isLoadingServerConfig:!0});try{const o=await l.api.getServerConfig();o&&(n.storageConfig.setStorageType(o.StorageType),t({serverConfig:o}))}catch(o){t({serverConfig:null}),S.error(\"Failed to fetch server config:\",o)}finally{t({isLoadingServerConfig:!1})}},setApiBaseUrl:o=>t({apiBaseUrl:o}),setM3uUrl:o=>t({m3uUrl:o}),setRemoteInputEnabled:o=>{t({remoteInputEnabled:o});const s=u.useRemoteControlStore.getState();o?s.startServer().catch(t=>{S.error(\"Failed to start remote control server:\",t)}):s.stopServer()},setVideoSource:o=>t({videoSource:o}),saveSettings:async()=>{const{apiBaseUrl:n,m3uUrl:c,remoteInputEnabled:u,videoSource:S}=o();let p=n.trim();if(p.endsWith(\"/\")&&(p=p.slice(0,-1)),!/^https?:\\/\\//i.test(p)){const t=p.split(\"/\")[0],o=/^((\\d{1,3}\\.){3}\\d{1,3})(:\\d+)?$/.test(t),s=/:\\d+/.test(t);p=o||s?\"http://\"+p:\"https://\"+p}await s.SettingsManager.save({apiBaseUrl:p,m3uUrl:c,remoteInputEnabled:u,videoSource:S}),l.api.setBaseUrl(p),t({isModalVisible:!1,apiBaseUrl:p}),await o().fetchServerConfig()},showModal:()=>t({isModalVisible:!0}),hideModal:()=>t({isModalVisible:!1})}))});","lineCount":1,"map":[[1,117,1,0],[1,121,1,0,"_zustand"],[1,123,1,0,"r"],[1,125,1,0,"d"],[1,127,1,0],[1,131,2,0,"_storage"],[1,133,2,0,"r"],[1,135,2,0,"d"],[1,137,2,0],[1,141,3,0,"_api"],[1,143,3,0,"r"],[1,145,3,0,"d"],[1,147,3,0],[1,151,4,0,"_storageConfig"],[1,153,4,0,"r"],[1,155,4,0,"d"],[1,157,4,0],[1,161,5,0,"_Logger"],[1,163,5,0,"_interopRequireDefault"],[1,165,5,0,"r"],[1,167,5,0,"d"],[1,169,5,0],[1,174,6,0,"_remoteControlStore"],[1,176,6,0,"r"],[1,178,6,0,"d"],[1,180,6,0],[1,184,8,0],[1,190,8,6,"logger"],[1,192,8,15,"Logger"],[1,202,8,22,"withTag"],[1,210,8,30],[1,227,34,29,"e"],[1,229,34,29,"useSettingsStore"],[1,247,34,32],[1,249,34,32,"create"],[1,259,34,54],[1,260,34,55,"set"],[1,262,34,60,"get"],[1,267,34,63],[1,268,35,2,"apiBaseUrl"],[1,279,35,14],[1,282,36,2,"m3uUrl"],[1,289,36,10],[1,292,37,2,"liveStreamSources"],[1,310,37,21],[1,313,38,2,"remoteInputEnabled"],[1,333,38,22],[1,335,39,2,"isModalVisible"],[1,351,39,18],[1,353,40,2,"serverConfig"],[1,366,40,16],[1,371,41,2,"isLoadingServerConfig"],[1,394,41,25],[1,396,42,2,"videoSource"],[1,408,42,15],[1,409,43,4,"enabledAll"],[1,421,43,16],[1,423,44,4,"sources"],[1,431,44,13],[1,432,44,14],[1,435,46,2,"loadSettings"],[1,448,46,16,"async"],[1,458,47,4],[1,464,47,10,"settings"],[1,472,47,27,"SettingsManager"],[1,490,47,43,"get"],[1,496,48,4,"set"],[1,498,48,8],[1,499,49,6,"apiBaseUrl"],[1,510,49,18,"settings"],[1,512,49,27,"apiBaseUrl"],[1,523,50,6,"m3uUrl"],[1,530,50,14,"settings"],[1,532,50,23,"m3uUrl"],[1,539,51,6,"remoteInputEnabled"],[1,558,51,26,"settings"],[1,560,51,35,"remoteInputEnabled"],[1,581,51,57],[1,583,52,6,"videoSource"],[1,595,52,19,"settings"],[1,597,52,28,"videoSource"],[1,610,52,43],[1,611,53,8,"enabledAll"],[1,623,53,20],[1,625,54,8,"sources"],[1,633,54,17],[1,634,54,18],[1,639,57,8,"settings"],[1,641,57,17,"apiBaseUrl"],[1,654,58,6,"api"],[1,660,58,10,"setBaseUrl"],[1,671,58,21,"settings"],[1,673,58,30,"apiBaseUrl"],[1,691,59,12,"get"],[1,695,59,18,"fetchServerConfig"],[1,717,62,2,"fetchServerConfig"],[1,735,62,21,"async"],[1,745,63,4,"set"],[1,747,63,8],[1,748,63,10,"isLoadingServerConfig"],[1,771,63,33],[1,775,64,4],[1,779,65,6],[1,785,65,12,"config"],[1,793,65,27,"api"],[1,799,65,31,"getServerConfig"],[1,817,66,10,"config"],[1,821,67,8,"storageConfig"],[1,837,67,22,"setStorageType"],[1,852,67,37,"config"],[1,854,67,44,"StorageType"],[1,867,68,8,"set"],[1,869,68,12],[1,870,68,14,"serverConfig"],[1,883,68,28,"config"],[1,887,70,4],[1,888,70,6],[1,894,70,13,"error"],[1,897,71,6,"set"],[1,899,71,10],[1,900,71,12,"serverConfig"],[1,913,71,26],[1,920,72,6,"logger"],[1,922,72,13,"error"],[1,928,72,19],[1,961,72,53,"error"],[1,963,73,4],[1,964,73,5],[1,972,74,6,"set"],[1,974,74,10],[1,975,74,12,"isLoadingServerConfig"],[1,998,74,35],[1,1001,75,4],[1,1004,77,2,"setApiBaseUrl"],[1,1018,77,18,"url"],[1,1021,77,26,"set"],[1,1023,77,30],[1,1024,77,32,"apiBaseUrl"],[1,1035,77,44,"url"],[1,1039,78,2,"setM3uUrl"],[1,1049,78,14,"url"],[1,1052,78,22,"set"],[1,1054,78,26],[1,1055,78,28,"m3uUrl"],[1,1062,78,36,"url"],[1,1066,79,2,"setRemoteInputEnabled"],[1,1088,79,26,"enabled"],[1,1092,80,4,"set"],[1,1094,80,8],[1,1095,80,10,"remoteInputEnabled"],[1,1114,80,30,"enabled"],[1,1118,82,4],[1,1124,82,10,"remoteControlActions"],[1,1126,82,33,"useRemoteControlStore"],[1,1150,82,55,"getState"],[1,1161,83,8,"enabled"],[1,1163,84,6,"remoteControlActions"],[1,1165,84,27,"startServer"],[1,1179,84,41,"catch"],[1,1185,84,47,"error"],[1,1189,85,8,"logger"],[1,1191,85,15,"error"],[1,1197,85,21],[1,1238,85,63,"error"],[1,1243,88,6,"remoteControlActions"],[1,1245,88,27,"stopServer"],[1,1259,91,2,"setVideoSource"],[1,1274,91,19,"config"],[1,1277,91,30,"set"],[1,1279,91,34],[1,1280,91,36,"videoSource"],[1,1292,91,49,"config"],[1,1296,92,2,"saveSettings"],[1,1309,92,16,"async"],[1,1319,93,4],[1,1325,93,10,"apiBaseUrl"],[1,1336,93,12,"apiBaseUrl"],[1,1338,93,22,"m3uUrl"],[1,1345,93,24,"m3uUrl"],[1,1347,93,30,"remoteInputEnabled"],[1,1366,93,32,"remoteInputEnabled"],[1,1368,93,50,"videoSource"],[1,1380,93,52,"videoSource"],[1,1383,93,68,"get"],[1,1387,95,4],[1,1391,95,8,"processedApiBaseUrl"],[1,1393,95,30,"apiBaseUrl"],[1,1395,95,41,"trim"],[1,1402,100,4],[1,1405,96,8,"processedApiBaseUrl"],[1,1407,96,28,"endsWith"],[1,1416,96,37],[1,1423,97,6,"processedApiBaseUrl"],[1,1425,97,28,"processedApiBaseUrl"],[1,1427,97,48,"slice"],[1,1433,97,54],[1,1436,97,55],[1,1441,100,9],[1,1457,100,25,"test"],[1,1462,100,30,"processedApiBaseUrl"],[1,1465,100,52],[1,1466,101,6],[1,1472,101,12,"hostPart"],[1,1474,101,23,"processedApiBaseUrl"],[1,1476,101,43,"split"],[1,1482,101,49],[1,1487,101,54],[1,1490,103,12,"isIpAddress"],[1,1492,103,26],[1,1527,103,61,"test"],[1,1532,103,66,"hostPart"],[1,1535,105,12,"hasPort"],[1,1537,105,22],[1,1544,105,29,"test"],[1,1549,105,34,"hostPart"],[1,1552,108,8,"processedApiBaseUrl"],[1,1554,107,10,"isIpAddress"],[1,1557,107,25,"hasPort"],[1,1559,108,30],[1,1569,108,42,"processedApiBaseUrl"],[1,1571,110,30],[1,1582,110,43,"processedApiBaseUrl"],[1,1583,112,4],[1,1590,114,10,"SettingsManager"],[1,1608,114,26,"save"],[1,1613,114,31],[1,1614,115,6,"apiBaseUrl"],[1,1625,115,18,"processedApiBaseUrl"],[1,1627,116,6,"m3uUrl"],[1,1636,117,6,"remoteInputEnabled"],[1,1657,118,6,"videoSource"],[1,1673,120,4,"api"],[1,1679,120,8,"setBaseUrl"],[1,1690,120,19,"processedApiBaseUrl"],[1,1693,122,4,"set"],[1,1695,122,8],[1,1696,122,10,"isModalVisible"],[1,1712,122,26],[1,1714,122,33,"apiBaseUrl"],[1,1725,122,45,"processedApiBaseUrl"],[1,1735,123,10,"get"],[1,1739,123,16,"fetchServerConfig"],[1,1760,125,2,"showModal"],[1,1770,125,13,"showModal"],[1,1774,125,19,"set"],[1,1776,125,23],[1,1777,125,25,"isModalVisible"],[1,1793,125,41],[1,1797,126,2,"hideModal"],[1,1807,126,13,"hideModal"],[1,1811,126,19,"set"],[1,1813,126,23],[1,1814,126,25,"isModalVisible"],[1,1830,126,41],[1,1836,127,4]],"functionMap":{"names":["<global>","create$argument_0","loadSettings","fetchServerConfig","setApiBaseUrl","setM3uUrl","setRemoteInputEnabled","remoteControlActions.startServer._catch$argument_0","setVideoSource","saveSettings","showModal","hideModal"],"mappings":"AAA;sDCiC;gBCY;GDe;qBEC;GFc;iBGC,iCH;aIC,6BJ;yBKC;+CCK;ODE;GLI;kBOC,wCP;gBQC;GRgC;aSC,mCT;aUC,oCV;EDC"}},"type":"js/module"}]}