{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":134,"column":0,"index":3360}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":55,"index":55}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"react-native","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":56},"end":{"line":2,"column":58,"index":114}}],"key":"XEo4Z+Aarw9Y7I7ZLBt66vGLAVQ="}},{"name":"@/stores/playerStore","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":50,"index":165}}],"key":"jza9oGwrWwCRqRJcTBeVqZHqd+Y="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0]);\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useTVRemoteHandler = undefined;\n  var _react = require(_dependencyMap[1]);\n  var _reactNative = require(_dependencyMap[2]);\n  var _playerStore = _interopRequireDefault(require(_dependencyMap[3]));\n  var SEEK_STEP = 20000; // 快进/快退的时间步长（毫秒）\n\n  // 定时器延迟时间（毫秒）\n  var CONTROLS_TIMEOUT = 5000;\n\n  /**\n   * 管理播放器控件的显示/隐藏、遥控器事件和自动隐藏定时器。\n   * @returns onScreenPress - 一个函数，用于处理屏幕点击事件，以显示控件并重置定时器。\n   */\n  var useTVRemoteHandler = function () {\n    var _usePlayerStore = (0, _playerStore.default)(),\n      showControls = _usePlayerStore.showControls,\n      setShowControls = _usePlayerStore.setShowControls,\n      showEpisodeModal = _usePlayerStore.showEpisodeModal,\n      togglePlayPause = _usePlayerStore.togglePlayPause,\n      seek = _usePlayerStore.seek;\n    var controlsTimer = (0, _react.useRef)(null);\n    var fastForwardIntervalRef = (0, _react.useRef)(null);\n\n    // 重置或启动隐藏控件的定时器\n    var resetTimer = (0, _react.useCallback)(function () {\n      // 清除之前的定时器\n      if (controlsTimer.current) {\n        clearTimeout(controlsTimer.current);\n      }\n      // 设置新的定时器\n      controlsTimer.current = setTimeout(function () {\n        setShowControls(false);\n      }, CONTROLS_TIMEOUT);\n    }, [setShowControls]);\n\n    // 当控件显示时，启动定时器\n    (0, _react.useEffect)(function () {\n      if (showControls) {\n        resetTimer();\n      } else {\n        // 如果控件被隐藏，清除定时器\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      }\n\n      // 组件卸载时清除定时器\n      return function () {\n        if (controlsTimer.current) {\n          clearTimeout(controlsTimer.current);\n        }\n      };\n    }, [showControls, resetTimer]);\n\n    // 组件卸载时清除快进定时器\n    (0, _react.useEffect)(function () {\n      return function () {\n        if (fastForwardIntervalRef.current) {\n          clearInterval(fastForwardIntervalRef.current);\n        }\n      };\n    }, []);\n\n    // 处理遥控器事件\n    var handleTVEvent = (0, _react.useCallback)(function (event) {\n      if (showEpisodeModal) {\n        return;\n      }\n      if (event.eventType === \"longRight\" || event.eventType === \"longLeft\") {\n        if (event.eventKeyAction === 1) {\n          if (fastForwardIntervalRef.current) {\n            clearInterval(fastForwardIntervalRef.current);\n            fastForwardIntervalRef.current = null;\n          }\n        }\n      }\n      resetTimer();\n      if (showControls) {\n        // 如果控制条已显示，则不处理后台的快进/快退等操作\n        // 避免与控制条上的按钮焦点冲突\n        return;\n      }\n      switch (event.eventType) {\n        case \"select\":\n          togglePlayPause();\n          setShowControls(true);\n          break;\n        case \"left\":\n          seek(-20000); // 快退15秒\n          break;\n        case \"longLeft\":\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(-20000);\n            }, 200);\n          }\n          break;\n        case \"right\":\n          seek(SEEK_STEP);\n          break;\n        case \"longRight\":\n          // 长按开始: 启动连续快进\n          if (!fastForwardIntervalRef.current && event.eventKeyAction === 0) {\n            fastForwardIntervalRef.current = setInterval(function () {\n              seek(SEEK_STEP);\n            }, 200);\n          }\n          break;\n        case \"down\":\n          setShowControls(true);\n          break;\n      }\n    }, [showControls, showEpisodeModal, setShowControls, resetTimer, togglePlayPause, seek]);\n    (0, _reactNative.useTVEventHandler)(handleTVEvent);\n\n    // 处理屏幕点击事件\n    var onScreenPress = function () {\n      // 切换控件的显示状态\n      var newShowControls = !showControls;\n      setShowControls(newShowControls);\n\n      // 如果控件变为显示状态，则重置定时器\n      if (newShowControls) {\n        resetTimer();\n      }\n    };\n    return {\n      onScreenPress\n    };\n  };\n  exports.useTVRemoteHandler = useTVRemoteHandler;\n});","lineCount":137,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"require"],[7,22,1,0],[7,23,1,0,"_dependencyMap"],[7,37,1,0],[8,2,2,0],[8,6,2,0,"_reactNative"],[8,18,2,0],[8,21,2,0,"require"],[8,28,2,0],[8,29,2,0,"_dependencyMap"],[8,43,2,0],[9,2,3,0],[9,6,3,0,"_playerStore"],[9,18,3,0],[9,21,3,0,"_interopRequireDefault"],[9,43,3,0],[9,44,3,0,"require"],[9,51,3,0],[9,52,3,0,"_dependencyMap"],[9,66,3,0],[10,2,5,0],[10,6,5,6,"SEEK_STEP"],[10,15,5,15],[10,23,5,27],[10,24,5,28],[10,25,5,29],[12,2,7,0],[13,2,8,0],[13,6,8,6,"CONTROLS_TIMEOUT"],[13,22,8,22],[13,25,8,25],[13,29,8,29],[15,2,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,2,14,7],[19,6,14,13,"useTVRemoteHandler"],[19,24,14,31],[19,27,14,34],[19,36,14,34,"useTVRemoteHandler"],[19,37,14,34],[19,39,14,40],[20,4,15,2],[20,8,15,2,"_usePlayerStore"],[20,23,15,2],[20,26,15,85],[20,30,15,85,"usePlayerStore"],[20,50,15,99],[20,52,15,100],[20,53,15,101],[21,6,15,10,"showControls"],[21,18,15,22],[21,21,15,22,"_usePlayerStore"],[21,36,15,22],[21,37,15,10,"showControls"],[21,49,15,22],[22,6,15,24,"setShowControls"],[22,21,15,39],[22,24,15,39,"_usePlayerStore"],[22,39,15,39],[22,40,15,24,"setShowControls"],[22,55,15,39],[23,6,15,41,"showEpisodeModal"],[23,22,15,57],[23,25,15,57,"_usePlayerStore"],[23,40,15,57],[23,41,15,41,"showEpisodeModal"],[23,57,15,57],[24,6,15,59,"togglePlayPause"],[24,21,15,74],[24,24,15,74,"_usePlayerStore"],[24,39,15,74],[24,40,15,59,"togglePlayPause"],[24,55,15,74],[25,6,15,76,"seek"],[25,10,15,80],[25,13,15,80,"_usePlayerStore"],[25,28,15,80],[25,29,15,76,"seek"],[25,33,15,80],[26,4,17,2],[26,8,17,8,"controlsTimer"],[26,21,17,21],[26,24,17,24],[26,28,17,24,"useRef"],[26,41,17,30],[26,43,17,54],[26,47,17,58],[26,48,17,59],[27,4,18,2],[27,8,18,8,"fastForwardIntervalRef"],[27,30,18,30],[27,33,18,33],[27,37,18,33,"useRef"],[27,50,18,39],[27,52,18,63],[27,56,18,67],[27,57,18,68],[29,4,20,2],[30,4,21,2],[30,8,21,8,"resetTimer"],[30,18,21,18],[30,21,21,21],[30,25,21,21,"useCallback"],[30,43,21,32],[30,45,21,33],[30,57,21,39],[31,6,22,4],[32,6,23,4],[32,10,23,8,"controlsTimer"],[32,23,23,21],[32,24,23,22,"current"],[32,31,23,29],[32,33,23,31],[33,8,24,6,"clearTimeout"],[33,20,24,18],[33,21,24,19,"controlsTimer"],[33,34,24,32],[33,35,24,33,"current"],[33,42,24,40],[33,43,24,41],[34,6,25,4],[35,6,26,4],[36,6,27,4,"controlsTimer"],[36,19,27,17],[36,20,27,18,"current"],[36,27,27,25],[36,30,27,28,"setTimeout"],[36,40,27,38],[36,41,27,39],[36,53,27,45],[37,8,28,6,"setShowControls"],[37,23,28,21],[37,24,28,22],[37,29,28,27],[37,30,28,28],[38,6,29,4],[38,7,29,5],[38,9,29,7,"CONTROLS_TIMEOUT"],[38,25,29,23],[38,26,29,24],[39,4,30,2],[39,5,30,3],[39,7,30,5],[39,8,30,6,"setShowControls"],[39,23,30,21],[39,24,30,22],[39,25,30,23],[41,4,32,2],[42,4,33,2],[42,8,33,2,"useEffect"],[42,24,33,11],[42,26,33,12],[42,38,33,18],[43,6,34,4],[43,10,34,8,"showControls"],[43,22,34,20],[43,24,34,22],[44,8,35,6,"resetTimer"],[44,18,35,16],[44,19,35,17],[44,20,35,18],[45,6,36,4],[45,7,36,5],[45,13,36,11],[46,8,37,6],[47,8,38,6],[47,12,38,10,"controlsTimer"],[47,25,38,23],[47,26,38,24,"current"],[47,33,38,31],[47,35,38,33],[48,10,39,8,"clearTimeout"],[48,22,39,20],[48,23,39,21,"controlsTimer"],[48,36,39,34],[48,37,39,35,"current"],[48,44,39,42],[48,45,39,43],[49,8,40,6],[50,6,41,4],[52,6,43,4],[53,6,44,4],[53,13,44,11],[53,25,44,17],[54,8,45,6],[54,12,45,10,"controlsTimer"],[54,25,45,23],[54,26,45,24,"current"],[54,33,45,31],[54,35,45,33],[55,10,46,8,"clearTimeout"],[55,22,46,20],[55,23,46,21,"controlsTimer"],[55,36,46,34],[55,37,46,35,"current"],[55,44,46,42],[55,45,46,43],[56,8,47,6],[57,6,48,4],[57,7,48,5],[58,4,49,2],[58,5,49,3],[58,7,49,5],[58,8,49,6,"showControls"],[58,20,49,18],[58,22,49,20,"resetTimer"],[58,32,49,30],[58,33,49,31],[58,34,49,32],[60,4,51,2],[61,4,52,2],[61,8,52,2,"useEffect"],[61,24,52,11],[61,26,52,12],[61,38,52,18],[62,6,53,4],[62,13,53,11],[62,25,53,17],[63,8,54,6],[63,12,54,10,"fastForwardIntervalRef"],[63,34,54,32],[63,35,54,33,"current"],[63,42,54,40],[63,44,54,42],[64,10,55,8,"clearInterval"],[64,23,55,21],[64,24,55,22,"fastForwardIntervalRef"],[64,46,55,44],[64,47,55,45,"current"],[64,54,55,52],[64,55,55,53],[65,8,56,6],[66,6,57,4],[66,7,57,5],[67,4,58,2],[67,5,58,3],[67,7,58,5],[67,9,58,7],[67,10,58,8],[69,4,60,2],[70,4,61,2],[70,8,61,8,"handleTVEvent"],[70,21,61,21],[70,24,61,24],[70,28,61,24,"useCallback"],[70,46,61,35],[70,48,62,4],[70,58,62,5,"event"],[70,63,62,19],[70,65,62,24],[71,6,63,6],[71,10,63,10,"showEpisodeModal"],[71,26,63,26],[71,28,63,28],[72,8,64,8],[73,6,65,6],[74,6,67,6],[74,10,67,10,"event"],[74,15,67,15],[74,16,67,16,"eventType"],[74,25,67,25],[74,30,67,30],[74,41,67,41],[74,45,67,45,"event"],[74,50,67,50],[74,51,67,51,"eventType"],[74,60,67,60],[74,65,67,65],[74,75,67,75],[74,77,67,77],[75,8,68,8],[75,12,68,12,"event"],[75,17,68,17],[75,18,68,18,"eventKeyAction"],[75,32,68,32],[75,37,68,37],[75,38,68,38],[75,40,68,40],[76,10,69,10],[76,14,69,14,"fastForwardIntervalRef"],[76,36,69,36],[76,37,69,37,"current"],[76,44,69,44],[76,46,69,46],[77,12,70,12,"clearInterval"],[77,25,70,25],[77,26,70,26,"fastForwardIntervalRef"],[77,48,70,48],[77,49,70,49,"current"],[77,56,70,56],[77,57,70,57],[78,12,71,12,"fastForwardIntervalRef"],[78,34,71,34],[78,35,71,35,"current"],[78,42,71,42],[78,45,71,45],[78,49,71,49],[79,10,72,10],[80,8,73,8],[81,6,74,6],[82,6,76,6,"resetTimer"],[82,16,76,16],[82,17,76,17],[82,18,76,18],[83,6,78,6],[83,10,78,10,"showControls"],[83,22,78,22],[83,24,78,24],[84,8,79,8],[85,8,80,8],[86,8,81,8],[87,6,82,6],[88,6,84,6],[88,14,84,14,"event"],[88,19,84,19],[88,20,84,20,"eventType"],[88,29,84,29],[89,8,85,8],[89,13,85,13],[89,21,85,21],[90,10,86,10,"togglePlayPause"],[90,25,86,25],[90,26,86,26],[90,27,86,27],[91,10,87,10,"setShowControls"],[91,25,87,25],[91,26,87,26],[91,30,87,30],[91,31,87,31],[92,10,88,10],[93,8,89,8],[93,13,89,13],[93,19,89,19],[94,10,90,10,"seek"],[94,14,90,14],[94,21,90,25],[94,22,90,26],[94,23,90,27],[94,24,90,28],[95,10,91,10],[96,8,92,8],[96,13,92,13],[96,23,92,23],[97,10,93,10],[97,14,93,14],[97,15,93,15,"fastForwardIntervalRef"],[97,37,93,37],[97,38,93,38,"current"],[97,45,93,45],[97,49,93,49,"event"],[97,54,93,54],[97,55,93,55,"eventKeyAction"],[97,69,93,69],[97,74,93,74],[97,75,93,75],[97,77,93,77],[98,12,94,12,"fastForwardIntervalRef"],[98,34,94,34],[98,35,94,35,"current"],[98,42,94,42],[98,45,94,45,"setInterval"],[98,56,94,56],[98,57,94,57],[98,69,94,63],[99,14,95,14,"seek"],[99,18,95,18],[99,25,95,29],[99,26,95,30],[100,12,96,12],[100,13,96,13],[100,15,96,15],[100,18,96,18],[100,19,96,19],[101,10,97,10],[102,10,98,10],[103,8,99,8],[103,13,99,13],[103,20,99,20],[104,10,100,10,"seek"],[104,14,100,14],[104,15,100,15,"SEEK_STEP"],[104,24,100,24],[104,25,100,25],[105,10,101,10],[106,8,102,8],[106,13,102,13],[106,24,102,24],[107,10,103,10],[108,10,104,10],[108,14,104,14],[108,15,104,15,"fastForwardIntervalRef"],[108,37,104,37],[108,38,104,38,"current"],[108,45,104,45],[108,49,104,49,"event"],[108,54,104,54],[108,55,104,55,"eventKeyAction"],[108,69,104,69],[108,74,104,74],[108,75,104,75],[108,77,104,77],[109,12,105,12,"fastForwardIntervalRef"],[109,34,105,34],[109,35,105,35,"current"],[109,42,105,42],[109,45,105,45,"setInterval"],[109,56,105,56],[109,57,105,57],[109,69,105,63],[110,14,106,14,"seek"],[110,18,106,18],[110,19,106,19,"SEEK_STEP"],[110,28,106,28],[110,29,106,29],[111,12,107,12],[111,13,107,13],[111,15,107,15],[111,18,107,18],[111,19,107,19],[112,10,108,10],[113,10,109,10],[114,8,110,8],[114,13,110,13],[114,19,110,19],[115,10,111,10,"setShowControls"],[115,25,111,25],[115,26,111,26],[115,30,111,30],[115,31,111,31],[116,10,112,10],[117,6,113,6],[118,4,114,4],[118,5,114,5],[118,7,115,4],[118,8,115,5,"showControls"],[118,20,115,17],[118,22,115,19,"showEpisodeModal"],[118,38,115,35],[118,40,115,37,"setShowControls"],[118,55,115,52],[118,57,115,54,"resetTimer"],[118,67,115,64],[118,69,115,66,"togglePlayPause"],[118,84,115,81],[118,86,115,83,"seek"],[118,90,115,87],[118,91,116,2],[118,92,116,3],[119,4,118,2],[119,8,118,2,"useTVEventHandler"],[119,38,118,19],[119,40,118,20,"handleTVEvent"],[119,53,118,33],[119,54,118,34],[121,4,120,2],[122,4,121,2],[122,8,121,8,"onScreenPress"],[122,21,121,21],[122,24,121,24],[122,33,121,24,"onScreenPress"],[122,34,121,24],[122,36,121,30],[123,6,122,4],[124,6,123,4],[124,10,123,10,"newShowControls"],[124,25,123,25],[124,28,123,28],[124,29,123,29,"showControls"],[124,41,123,41],[125,6,124,4,"setShowControls"],[125,21,124,19],[125,22,124,20,"newShowControls"],[125,37,124,35],[125,38,124,36],[127,6,126,4],[128,6,127,4],[128,10,127,8,"newShowControls"],[128,25,127,23],[128,27,127,25],[129,8,128,6,"resetTimer"],[129,18,128,16],[129,19,128,17],[129,20,128,18],[130,6,129,4],[131,4,130,2],[131,5,130,3],[132,4,132,2],[132,11,132,9],[133,6,132,11,"onScreenPress"],[134,4,132,25],[134,5,132,26],[135,2,133,0],[135,3,133,1],[136,2,133,2,"exports"],[136,9,133,2],[136,10,133,2,"useTVRemoteHandler"],[136,28,133,2],[136,31,133,2,"useTVRemoteHandler"],[136,49,133,2],[137,0,133,2]],"functionMap":{"names":["<global>","useTVRemoteHandler","resetTimer","setTimeout$argument_0","useEffect$argument_0","<anonymous>","handleTVEvent","setInterval$argument_0","onScreenPress"],"mappings":"AAA;kCCa;iCCO;uCCM;KDE;GDC;YGG;WCW;KDI;GHC;YGG;WCC;KDI;GHC;IKI;yDCgC;aDE;yDCS;aDE;KLO;wBOO;GPS;CDG"}},"type":"js/module"}]}