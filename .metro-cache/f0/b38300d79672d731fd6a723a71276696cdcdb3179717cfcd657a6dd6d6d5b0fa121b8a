{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":94,"column":39,"index":3881}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":66,"index":98}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./useOnPreventRemove","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":79,"index":178}}],"key":"bjcmesK2D9GMO5sMa7zUpDYJFA8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnAction;\n  var React = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _NavigationBuilderContext = _interopRequireDefault(require(_dependencyMap[2], \"./NavigationBuilderContext\"));\n  var _useOnPreventRemove = _interopRequireWildcard(require(_dependencyMap[3], \"./useOnPreventRemove\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  /**\n   * Hook to handle actions for a navigator, including state updates and bubbling.\n   *\n   * Bubbling an action is achieved in 2 ways:\n   * 1. To bubble action to parent, we expose the action handler in context and then access the parent context\n   * 2. To bubble action to child, child adds event listeners subscribing to actions from parent\n   *\n   * When the action handler handles as action, it returns `true`, otherwise `false`.\n   */\n  function useOnAction(_ref) {\n    let {\n      router,\n      getState,\n      setState,\n      key,\n      actionListeners,\n      beforeRemoveListeners,\n      routerConfigOptions,\n      emitter\n    } = _ref;\n    const {\n      onAction: onActionParent,\n      onRouteFocus: onRouteFocusParent,\n      addListener: addListenerParent,\n      onDispatchAction\n    } = React.useContext(_NavigationBuilderContext.default);\n    const routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(() => {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    const onAction = React.useCallback(function (action) {\n      let visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      const state = getState();\n\n      // Since actions can bubble both up and down, they could come to the same navigator again\n      // We keep track of navigators which have already tried to handle the action and return if it's already visited\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n      visitedNavigators.add(state.key);\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        let result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n\n        // If a target is specified and set to current navigator, the action shouldn't bubble\n        // So instead of `null`, we use the state object for such cases to signal that action was handled\n        result = result === null && action.target === state.key ? state : result;\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n          if (state !== result) {\n            const isPrevented = (0, _useOnPreventRemove.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n            if (isPrevented) {\n              return true;\n            }\n            setState(result);\n          }\n          if (onRouteFocusParent !== undefined) {\n            // Some actions such as `NAVIGATE` also want to bring the navigated route to focus in the whole tree\n            // This means we need to focus all of the parent navigators of this navigator as well\n            const shouldFocus = router.shouldActionChangeFocus(action);\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n          return true;\n        }\n      }\n      if (onActionParent !== undefined) {\n        // Bubble action to the parent if the current navigator didn't handle it\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      // If the action wasn't handled by current navigator or a parent navigator, let children handle it\n      for (let i = actionListeners.length - 1; i >= 0; i--) {\n        const listener = actionListeners[i];\n        if (listener(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemove.default)({\n      getState,\n      emitter,\n      beforeRemoveListeners\n    });\n    React.useEffect(() => addListenerParent === null || addListenerParent === void 0 ? void 0 : addListenerParent('action', onAction), [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":101,"map":[[7,2,1,0],[7,6,1,0,"React"],[7,11,1,0],[7,14,1,0,"_interopRequireWildcard"],[7,37,1,0],[7,38,1,0,"require"],[7,45,1,0],[7,46,1,0,"_dependencyMap"],[7,60,1,0],[8,2,2,0],[8,6,2,0,"_NavigationBuilderContext"],[8,31,2,0],[8,34,2,0,"_interopRequireDefault"],[8,56,2,0],[8,57,2,0,"require"],[8,64,2,0],[8,65,2,0,"_dependencyMap"],[8,79,2,0],[9,2,3,0],[9,6,3,0,"_useOnPreventRemove"],[9,25,3,0],[9,28,3,0,"_interopRequireWildcard"],[9,51,3,0],[9,52,3,0,"require"],[9,59,3,0],[9,60,3,0,"_dependencyMap"],[9,74,3,0],[10,2,3,79],[10,11,3,79,"_interopRequireWildcard"],[10,35,3,79,"e"],[10,36,3,79],[10,38,3,79,"t"],[10,39,3,79],[10,68,3,79,"WeakMap"],[10,75,3,79],[10,81,3,79,"r"],[10,82,3,79],[10,89,3,79,"WeakMap"],[10,96,3,79],[10,100,3,79,"n"],[10,101,3,79],[10,108,3,79,"WeakMap"],[10,115,3,79],[10,127,3,79,"_interopRequireWildcard"],[10,150,3,79],[10,162,3,79,"_interopRequireWildcard"],[10,163,3,79,"e"],[10,164,3,79],[10,166,3,79,"t"],[10,167,3,79],[10,176,3,79,"t"],[10,177,3,79],[10,181,3,79,"e"],[10,182,3,79],[10,186,3,79,"e"],[10,187,3,79],[10,188,3,79,"__esModule"],[10,198,3,79],[10,207,3,79,"e"],[10,208,3,79],[10,214,3,79,"o"],[10,215,3,79],[10,217,3,79,"i"],[10,218,3,79],[10,220,3,79,"f"],[10,221,3,79],[10,226,3,79,"__proto__"],[10,235,3,79],[10,243,3,79,"default"],[10,250,3,79],[10,252,3,79,"e"],[10,253,3,79],[10,270,3,79,"e"],[10,271,3,79],[10,294,3,79,"e"],[10,295,3,79],[10,320,3,79,"e"],[10,321,3,79],[10,330,3,79,"f"],[10,331,3,79],[10,337,3,79,"o"],[10,338,3,79],[10,341,3,79,"t"],[10,342,3,79],[10,345,3,79,"n"],[10,346,3,79],[10,349,3,79,"r"],[10,350,3,79],[10,358,3,79,"o"],[10,359,3,79],[10,360,3,79,"has"],[10,363,3,79],[10,364,3,79,"e"],[10,365,3,79],[10,375,3,79,"o"],[10,376,3,79],[10,377,3,79,"get"],[10,380,3,79],[10,381,3,79,"e"],[10,382,3,79],[10,385,3,79,"o"],[10,386,3,79],[10,387,3,79,"set"],[10,390,3,79],[10,391,3,79,"e"],[10,392,3,79],[10,394,3,79,"f"],[10,395,3,79],[10,411,3,79,"t"],[10,412,3,79],[10,416,3,79,"e"],[10,417,3,79],[10,433,3,79,"t"],[10,434,3,79],[10,441,3,79,"hasOwnProperty"],[10,455,3,79],[10,456,3,79,"call"],[10,460,3,79],[10,461,3,79,"e"],[10,462,3,79],[10,464,3,79,"t"],[10,465,3,79],[10,472,3,79,"i"],[10,473,3,79],[10,477,3,79,"o"],[10,478,3,79],[10,481,3,79,"Object"],[10,487,3,79],[10,488,3,79,"defineProperty"],[10,502,3,79],[10,507,3,79,"Object"],[10,513,3,79],[10,514,3,79,"getOwnPropertyDescriptor"],[10,538,3,79],[10,539,3,79,"e"],[10,540,3,79],[10,542,3,79,"t"],[10,543,3,79],[10,550,3,79,"i"],[10,551,3,79],[10,552,3,79,"get"],[10,555,3,79],[10,559,3,79,"i"],[10,560,3,79],[10,561,3,79,"set"],[10,564,3,79],[10,568,3,79,"o"],[10,569,3,79],[10,570,3,79,"f"],[10,571,3,79],[10,573,3,79,"t"],[10,574,3,79],[10,576,3,79,"i"],[10,577,3,79],[10,581,3,79,"f"],[10,582,3,79],[10,583,3,79,"t"],[10,584,3,79],[10,588,3,79,"e"],[10,589,3,79],[10,590,3,79,"t"],[10,591,3,79],[10,602,3,79,"f"],[10,603,3,79],[10,608,3,79,"e"],[10,609,3,79],[10,611,3,79,"t"],[10,612,3,79],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,2,13,15],[20,11,13,24,"useOnAction"],[20,22,13,35,"useOnAction"],[20,23,13,36,"_ref"],[20,27,13,40],[20,29,13,42],[21,4,14,2],[21,8,14,6],[22,6,15,4,"router"],[22,12,15,10],[23,6,16,4,"getState"],[23,14,16,12],[24,6,17,4,"setState"],[24,14,17,12],[25,6,18,4,"key"],[25,9,18,7],[26,6,19,4,"actionListeners"],[26,21,19,19],[27,6,20,4,"beforeRemoveListeners"],[27,27,20,25],[28,6,21,4,"routerConfigOptions"],[28,25,21,23],[29,6,22,4,"emitter"],[30,4,23,2],[30,5,23,3],[30,8,23,6,"_ref"],[30,12,23,10],[31,4,24,2],[31,10,24,8],[32,6,25,4,"onAction"],[32,14,25,12],[32,16,25,14,"onActionParent"],[32,30,25,28],[33,6,26,4,"onRouteFocus"],[33,18,26,16],[33,20,26,18,"onRouteFocusParent"],[33,38,26,36],[34,6,27,4,"addListener"],[34,17,27,15],[34,19,27,17,"addListenerParent"],[34,36,27,34],[35,6,28,4,"onDispatchAction"],[36,4,29,2],[36,5,29,3],[36,8,29,6,"React"],[36,13,29,11],[36,14,29,12,"useContext"],[36,24,29,22],[36,25,29,23,"NavigationBuilderContext"],[36,58,29,47],[36,59,29,48],[37,4,30,2],[37,10,30,8,"routerConfigOptionsRef"],[37,32,30,30],[37,35,30,33,"React"],[37,40,30,38],[37,41,30,39,"useRef"],[37,47,30,45],[37,48,30,46,"routerConfigOptions"],[37,67,30,65],[37,68,30,66],[38,4,31,2,"React"],[38,9,31,7],[38,10,31,8,"useEffect"],[38,19,31,17],[38,20,31,18],[38,26,31,24],[39,6,32,4,"routerConfigOptionsRef"],[39,28,32,26],[39,29,32,27,"current"],[39,36,32,34],[39,39,32,37,"routerConfigOptions"],[39,58,32,56],[40,4,33,2],[40,5,33,3],[40,6,33,4],[41,4,34,2],[41,10,34,8,"onAction"],[41,18,34,16],[41,21,34,19,"React"],[41,26,34,24],[41,27,34,25,"useCallback"],[41,38,34,36],[41,39,34,37],[41,49,34,47,"action"],[41,55,34,53],[41,57,34,55],[42,6,35,4],[42,10,35,8,"visitedNavigators"],[42,27,35,25],[42,30,35,28,"arguments"],[42,39,35,37],[42,40,35,38,"length"],[42,46,35,44],[42,49,35,47],[42,50,35,48],[42,54,35,52,"arguments"],[42,63,35,61],[42,64,35,62],[42,65,35,63],[42,66,35,64],[42,71,35,69,"undefined"],[42,80,35,78],[42,83,35,81,"arguments"],[42,92,35,90],[42,93,35,91],[42,94,35,92],[42,95,35,93],[42,98,35,96],[42,102,35,100,"Set"],[42,105,35,103],[42,106,35,104],[42,107,35,105],[43,6,36,4],[43,12,36,10,"state"],[43,17,36,15],[43,20,36,18,"getState"],[43,28,36,26],[43,29,36,27],[43,30,36,28],[45,6,38,4],[46,6,39,4],[47,6,40,4],[47,10,40,8,"visitedNavigators"],[47,27,40,25],[47,28,40,26,"has"],[47,31,40,29],[47,32,40,30,"state"],[47,37,40,35],[47,38,40,36,"key"],[47,41,40,39],[47,42,40,40],[47,44,40,42],[48,8,41,6],[48,15,41,13],[48,20,41,18],[49,6,42,4],[50,6,43,4,"visitedNavigators"],[50,23,43,21],[50,24,43,22,"add"],[50,27,43,25],[50,28,43,26,"state"],[50,33,43,31],[50,34,43,32,"key"],[50,37,43,35],[50,38,43,36],[51,6,44,4],[51,10,44,8],[51,17,44,15,"action"],[51,23,44,21],[51,24,44,22,"target"],[51,30,44,28],[51,35,44,33],[51,43,44,41],[51,47,44,45,"action"],[51,53,44,51],[51,54,44,52,"target"],[51,60,44,58],[51,65,44,63,"state"],[51,70,44,68],[51,71,44,69,"key"],[51,74,44,72],[51,76,44,74],[52,8,45,6],[52,12,45,10,"result"],[52,18,45,16],[52,21,45,19,"router"],[52,27,45,25],[52,28,45,26,"getStateForAction"],[52,45,45,43],[52,46,45,44,"state"],[52,51,45,49],[52,53,45,51,"action"],[52,59,45,57],[52,61,45,59,"routerConfigOptionsRef"],[52,83,45,81],[52,84,45,82,"current"],[52,91,45,89],[52,92,45,90],[54,8,47,6],[55,8,48,6],[56,8,49,6,"result"],[56,14,49,12],[56,17,49,15,"result"],[56,23,49,21],[56,28,49,26],[56,32,49,30],[56,36,49,34,"action"],[56,42,49,40],[56,43,49,41,"target"],[56,49,49,47],[56,54,49,52,"state"],[56,59,49,57],[56,60,49,58,"key"],[56,63,49,61],[56,66,49,64,"state"],[56,71,49,69],[56,74,49,72,"result"],[56,80,49,78],[57,8,50,6],[57,12,50,10,"result"],[57,18,50,16],[57,23,50,21],[57,27,50,25],[57,29,50,27],[58,10,51,8,"onDispatchAction"],[58,26,51,24],[58,27,51,25,"action"],[58,33,51,31],[58,35,51,33,"state"],[58,40,51,38],[58,45,51,43,"result"],[58,51,51,49],[58,52,51,50],[59,10,52,8],[59,14,52,12,"state"],[59,19,52,17],[59,24,52,22,"result"],[59,30,52,28],[59,32,52,30],[60,12,53,10],[60,18,53,16,"isPrevented"],[60,29,53,27],[60,32,53,30],[60,36,53,30,"shouldPreventRemove"],[60,75,53,49],[60,77,53,50,"emitter"],[60,84,53,57],[60,86,53,59,"beforeRemoveListeners"],[60,107,53,80],[60,109,53,82,"state"],[60,114,53,87],[60,115,53,88,"routes"],[60,121,53,94],[60,123,53,96,"result"],[60,129,53,102],[60,130,53,103,"routes"],[60,136,53,109],[60,138,53,111,"action"],[60,144,53,117],[60,145,53,118],[61,12,54,10],[61,16,54,14,"isPrevented"],[61,27,54,25],[61,29,54,27],[62,14,55,12],[62,21,55,19],[62,25,55,23],[63,12,56,10],[64,12,57,10,"setState"],[64,20,57,18],[64,21,57,19,"result"],[64,27,57,25],[64,28,57,26],[65,10,58,8],[66,10,59,8],[66,14,59,12,"onRouteFocusParent"],[66,32,59,30],[66,37,59,35,"undefined"],[66,46,59,44],[66,48,59,46],[67,12,60,10],[68,12,61,10],[69,12,62,10],[69,18,62,16,"shouldFocus"],[69,29,62,27],[69,32,62,30,"router"],[69,38,62,36],[69,39,62,37,"shouldActionChangeFocus"],[69,62,62,60],[69,63,62,61,"action"],[69,69,62,67],[69,70,62,68],[70,12,63,10],[70,16,63,14,"shouldFocus"],[70,27,63,25],[70,31,63,29,"key"],[70,34,63,32],[70,39,63,37,"undefined"],[70,48,63,46],[70,50,63,48],[71,14,64,12,"onRouteFocusParent"],[71,32,64,30],[71,33,64,31,"key"],[71,36,64,34],[71,37,64,35],[72,12,65,10],[73,10,66,8],[74,10,67,8],[74,17,67,15],[74,21,67,19],[75,8,68,6],[76,6,69,4],[77,6,70,4],[77,10,70,8,"onActionParent"],[77,24,70,22],[77,29,70,27,"undefined"],[77,38,70,36],[77,40,70,38],[78,8,71,6],[79,8,72,6],[79,12,72,10,"onActionParent"],[79,26,72,24],[79,27,72,25,"action"],[79,33,72,31],[79,35,72,33,"visitedNavigators"],[79,52,72,50],[79,53,72,51],[79,55,72,53],[80,10,73,8],[80,17,73,15],[80,21,73,19],[81,8,74,6],[82,6,75,4],[84,6,77,4],[85,6,78,4],[85,11,78,9],[85,15,78,13,"i"],[85,16,78,14],[85,19,78,17,"actionListeners"],[85,34,78,32],[85,35,78,33,"length"],[85,41,78,39],[85,44,78,42],[85,45,78,43],[85,47,78,45,"i"],[85,48,78,46],[85,52,78,50],[85,53,78,51],[85,55,78,53,"i"],[85,56,78,54],[85,58,78,56],[85,60,78,58],[86,8,79,6],[86,14,79,12,"listener"],[86,22,79,20],[86,25,79,23,"actionListeners"],[86,40,79,38],[86,41,79,39,"i"],[86,42,79,40],[86,43,79,41],[87,8,80,6],[87,12,80,10,"listener"],[87,20,80,18],[87,21,80,19,"action"],[87,27,80,25],[87,29,80,27,"visitedNavigators"],[87,46,80,44],[87,47,80,45],[87,49,80,47],[88,10,81,8],[88,17,81,15],[88,21,81,19],[89,8,82,6],[90,6,83,4],[91,6,84,4],[91,13,84,11],[91,18,84,16],[92,4,85,2],[92,5,85,3],[92,7,85,5],[92,8,85,6,"actionListeners"],[92,23,85,21],[92,25,85,23,"beforeRemoveListeners"],[92,46,85,44],[92,48,85,46,"emitter"],[92,55,85,53],[92,57,85,55,"getState"],[92,65,85,63],[92,67,85,65,"key"],[92,70,85,68],[92,72,85,70,"onActionParent"],[92,86,85,84],[92,88,85,86,"onDispatchAction"],[92,104,85,102],[92,106,85,104,"onRouteFocusParent"],[92,124,85,122],[92,126,85,124,"router"],[92,132,85,130],[92,134,85,132,"setState"],[92,142,85,140],[92,143,85,141],[92,144,85,142],[93,4,86,2],[93,8,86,2,"useOnPreventRemove"],[93,35,86,20],[93,37,86,21],[94,6,87,4,"getState"],[94,14,87,12],[95,6,88,4,"emitter"],[95,13,88,11],[96,6,89,4,"beforeRemoveListeners"],[97,4,90,2],[97,5,90,3],[97,6,90,4],[98,4,91,2,"React"],[98,9,91,7],[98,10,91,8,"useEffect"],[98,19,91,17],[98,20,91,18],[98,26,91,24,"addListenerParent"],[98,43,91,41],[98,48,91,46],[98,52,91,50],[98,56,91,54,"addListenerParent"],[98,73,91,71],[98,78,91,76],[98,83,91,81],[98,84,91,82],[98,87,91,85],[98,92,91,90],[98,93,91,91],[98,96,91,94,"addListenerParent"],[98,113,91,111],[98,114,91,112],[98,122,91,120],[98,124,91,122,"onAction"],[98,132,91,130],[98,133,91,131],[98,135,91,133],[98,136,91,134,"addListenerParent"],[98,153,91,151],[98,155,91,153,"onAction"],[98,163,91,161],[98,164,91,162],[98,165,91,163],[99,4,92,2],[99,11,92,9,"onAction"],[99,19,92,17],[100,2,93,0],[101,0,93,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","onAction"],"mappings":"AAA;eCY;kBCkB;GDE;qCEC;GFmD;kBCM,iHD;CDE"}},"type":"js/module"}]}