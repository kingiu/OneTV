{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":249,"column":0,"index":8191}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"expo-file-system","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":47,"index":67}}],"key":"hLKjxf8HXpC+YuvlkrDiKyo98+o="}},{"name":"expo-intent-launcher","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":68},"end":{"line":3,"column":55,"index":123}}],"key":"Lh9fS0cnMfVKWLzSpRdzBtwEGo8="}},{"name":"react-native-toast-message","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":166},"end":{"line":5,"column":47,"index":213}}],"key":"mvLfpRqMmyOUTnGhKaiVkXHegIo="}},{"name":"../package.json","data":{"asyncType":null,"locs":[{"start":{"line":6,"column":0,"index":214},"end":{"line":6,"column":60,"index":274}}],"key":"Xvped93wd5yHYZ0oEIckn5waKSQ="}},{"name":"../constants/UpdateConfig","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":0,"index":275},"end":{"line":7,"column":58,"index":333}}],"key":"JPrxNKL0oykGw2SVaR8i5oa/Dpc="}},{"name":"@/utils/Logger","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":0,"index":334},"end":{"line":8,"column":36,"index":370}}],"key":"dpbJvsqVW0VVfFOl8dlhEC6KfVk="}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":249,"column":0,"index":8191}}],"key":"jM/HC84YZkM9kLoiCo0Bpf0Xr+w="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var FileSystem = _interopRequireWildcard(require(_dependencyMap[1], \"expo-file-system\"));\n  var IntentLauncher = _interopRequireWildcard(require(_dependencyMap[2], \"expo-intent-launcher\"));\n  var _reactNativeToastMessage = _interopRequireDefault(require(_dependencyMap[3], \"react-native-toast-message\"));\n  var _package = require(_dependencyMap[4], \"../package.json\");\n  var _UpdateConfig = require(_dependencyMap[5], \"../constants/UpdateConfig\");\n  var _Logger = _interopRequireDefault(require(_dependencyMap[6], \"@/utils/Logger\"));\n  var _Platform = _interopRequireDefault(require(_dependencyMap[7], \"react-native-web/dist/exports/Platform\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  // UpdateService.ts\n\n  // import * as Device from 'expo-device';\n\n  const logger = _Logger.default.withTag('UpdateService');\n  /**\n   * 只在 Android 平台使用的常量（iOS 不会走到下载/安装流程）\n   */\n  const ANDROID_MIME_TYPE = 'application/vnd.android.package-archive';\n  class UpdateService {\n    static getInstance() {\n      if (!UpdateService.instance) {\n        UpdateService.instance = new UpdateService();\n      }\n      return UpdateService.instance;\n    }\n\n    /** --------------------------------------------------------------\n     *  1️⃣ 远程版本检查（保持不变，只是把 fetch 包装成 async/await）\n     * --------------------------------------------------------------- */\n    async checkVersion() {\n      const maxRetries = 3;\n      for (let attempt = 1; attempt <= maxRetries; attempt++) {\n        try {\n          const controller = new AbortController();\n          const timeoutId = setTimeout(() => controller.abort(), 10_000);\n          const response = await fetch(_UpdateConfig.UPDATE_CONFIG.GITHUB_RAW_URL, {\n            signal: controller.signal\n          });\n          clearTimeout(timeoutId);\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          const remotePackage = await response.json();\n          const remoteVersion = remotePackage.version;\n          return {\n            version: remoteVersion,\n            downloadUrl: _UpdateConfig.UPDATE_CONFIG.getDownloadUrl(remoteVersion)\n          };\n        } catch (e) {\n          logger.warn(`checkVersion attempt ${attempt}/${maxRetries}`, e);\n          if (attempt === maxRetries) {\n            _reactNativeToastMessage.default.show({\n              type: 'error',\n              text1: '检查更新失败',\n              text2: '无法获取版本信息，请检查网络'\n            });\n            throw e;\n          }\n          // 指数退避\n          await new Promise(r => setTimeout(r, 2_000 * attempt));\n        }\n      }\n      // 这句永远走不到，仅为 TypeScript 报错\n      throw new Error('Unexpected');\n    }\n\n    /** --------------------------------------------------------------\n     *  2️⃣ 清理旧的 APK 文件（使用 expo-file-system 的 API）\n     * --------------------------------------------------------------- */\n    async cleanOldApkFiles() {\n      try {\n        const dirUri = FileSystem.documentDirectory; // e.g. file:///data/user/0/.../files/\n        if (!dirUri) {\n          throw new Error('Document directory is not available');\n        }\n        const listing = await FileSystem.readDirectoryAsync(dirUri);\n        const apkFiles = listing.filter(name => name.startsWith('OrionTV_v') && name.endsWith('.apk'));\n        if (apkFiles.length <= 2) return;\n        const sorted = apkFiles.sort((a, b) => {\n          const numA = parseInt(a.replace(/[^0-9]/g, ''), 10);\n          const numB = parseInt(b.replace(/[^0-9]/g, ''), 10);\n          return numB - numA; // 倒序（最新在前）\n        });\n        const stale = sorted.slice(2); // 保留最新的两个\n        for (const file of stale) {\n          const path = `${dirUri}${file}`;\n          try {\n            await FileSystem.deleteAsync(path, {\n              idempotent: true\n            });\n            logger.debug(`Deleted old APK: ${file}`);\n          } catch (e) {\n            logger.warn(`Failed to delete ${file}`, e);\n          }\n        }\n      } catch (e) {\n        logger.warn('cleanOldApkFiles error', e);\n      }\n    }\n\n    /** --------------------------------------------------------------\n     *  3️⃣ 下载 APK（使用 expo-file-system 的下载 API）\n     * --------------------------------------------------------------- */\n    async downloadApk(url, onProgress) {\n      const maxRetries = 3;\n      await this.cleanOldApkFiles();\n      for (let attempt = 1; attempt <= maxRetries; attempt++) {\n        try {\n          const timestamp = Date.now();\n          const fileName = `OrionTV_v${timestamp}.apk`;\n          const fileUri = `${FileSystem.documentDirectory}${fileName}`;\n\n          // expo-file-system 把下载进度回调参数统一为 `{totalBytesWritten, totalBytesExpectedToWrite}`\n          const downloadResumable = FileSystem.createDownloadResumable(url, fileUri, {\n            // Android 需要在 AndroidManifest 中声明 INTERNET、WRITE_EXTERNAL_STORAGE (API 33+ 使用 MANAGE_EXTERNAL_STORAGE)\n            // 这里不使用系统下载管理器，因为我们想自己控制进度回调。\n          }, progress => {\n            if (onProgress && progress.totalBytesExpectedToWrite) {\n              const percent = Math.floor(progress.totalBytesWritten / progress.totalBytesExpectedToWrite * 100);\n              onProgress(percent);\n            }\n          });\n          const result = await downloadResumable.downloadAsync();\n          if (result && result.uri) {\n            logger.debug(`APK downloaded to ${result.uri}`);\n            return result.uri;\n          } else {\n            throw new Error('Download failed: No URI available');\n          }\n        } catch (e) {\n          logger.warn(`downloadApk attempt ${attempt}/${maxRetries}`, e);\n          if (attempt === maxRetries) {\n            _reactNativeToastMessage.default.show({\n              type: 'error',\n              text1: '下载失败',\n              text2: 'APK 下载出现错误，请检查网络'\n            });\n            throw e;\n          }\n          // 指数退避\n          await new Promise(r => setTimeout(r, 3_000 * attempt));\n        }\n      }\n      // 同上，理论不会到这里\n      throw new Error('Download failed');\n    }\n\n    /** --------------------------------------------------------------\n     *  4️⃣ 安装 APK（只在 Android 可用，使用 expo-intent-launcher）\n     * --------------------------------------------------------------- */\n    async installApk(fileUri) {\n      // ① 先确认文件存在\n      const exists = await FileSystem.getInfoAsync(fileUri);\n      if (!exists.exists) {\n        throw new Error(`APK not found at ${fileUri}`);\n      }\n\n      // ② 把 file:// 转成 content://，Expo‑FileSystem 已经实现了 FileProvider\n      const contentUri = await FileSystem.getContentUriAsync(fileUri);\n\n      // ③ 只在 Android 里执行\n      if (_Platform.default.OS === 'android') {\n        try {\n          // FLAG_ACTIVITY_NEW_TASK = 0x10000000 (1)\n          // FLAG_GRANT_READ_URI_PERMISSION = 0x00000010\n          const flags = 1 | 0x00000010; // 1 | 16\n\n          await IntentLauncher.startActivityAsync('android.intent.action.VIEW', {\n            data: contentUri,\n            // 必须是 content://\n            type: ANDROID_MIME_TYPE,\n            // application/vnd.android.package-archive\n            flags\n          });\n        } catch (e) {\n          // 统一错误提示\n          if (e.message?.includes('Activity not found')) {\n            _reactNativeToastMessage.default.show({\n              type: 'error',\n              text1: '安装失败',\n              text2: '系统没有找到可以打开 APK 的应用，请检查系统设置'\n            });\n          } else if (e.message?.includes('permission')) {\n            _reactNativeToastMessage.default.show({\n              type: 'error',\n              text1: '安装失败',\n              text2: '请在设置里允许“未知来源”安装'\n            });\n          } else {\n            _reactNativeToastMessage.default.show({\n              type: 'error',\n              text1: '安装失败',\n              text2: '未知错误，请稍后重试'\n            });\n          }\n          throw e;\n        }\n      } else {\n        // iOS 设备不支持直接安装 APK\n        _reactNativeToastMessage.default.show({\n          type: 'error',\n          text1: '安装失败',\n          text2: 'iOS 设备无法直接安装 APK'\n        });\n        throw new Error('APK install not supported on iOS');\n      }\n    }\n\n    /** --------------------------------------------------------------\n     *  5️⃣ 版本比对工具（保持原来的实现）\n     * --------------------------------------------------------------- */\n    compareVersions(v1, v2) {\n      const p1 = v1.split('.').map(Number);\n      const p2 = v2.split('.').map(Number);\n      for (let i = 0; i < Math.max(p1.length, p2.length); i++) {\n        const n1 = p1[i] ?? 0;\n        const n2 = p2[i] ?? 0;\n        if (n1 > n2) return 1;\n        if (n1 < n2) return -1;\n      }\n      return 0;\n    }\n    getCurrentVersion() {\n      return _package.version;\n    }\n    isUpdateAvailable(remoteVersion) {\n      return this.compareVersions(remoteVersion, _package.version) > 0;\n    }\n  }\n\n  /* 单例导出 */\n  var _default = exports.default = UpdateService.getInstance();\n});","lineCount":238,"map":[[7,2,2,0],[7,6,2,0,"FileSystem"],[7,16,2,0],[7,19,2,0,"_interopRequireWildcard"],[7,42,2,0],[7,43,2,0,"require"],[7,50,2,0],[7,51,2,0,"_dependencyMap"],[7,65,2,0],[8,2,3,0],[8,6,3,0,"IntentLauncher"],[8,20,3,0],[8,23,3,0,"_interopRequireWildcard"],[8,46,3,0],[8,47,3,0,"require"],[8,54,3,0],[8,55,3,0,"_dependencyMap"],[8,69,3,0],[9,2,5,0],[9,6,5,0,"_reactNativeToastMessage"],[9,30,5,0],[9,33,5,0,"_interopRequireDefault"],[9,55,5,0],[9,56,5,0,"require"],[9,63,5,0],[9,64,5,0,"_dependencyMap"],[9,78,5,0],[10,2,6,0],[10,6,6,0,"_package"],[10,14,6,0],[10,17,6,0,"require"],[10,24,6,0],[10,25,6,0,"_dependencyMap"],[10,39,6,0],[11,2,7,0],[11,6,7,0,"_UpdateConfig"],[11,19,7,0],[11,22,7,0,"require"],[11,29,7,0],[11,30,7,0,"_dependencyMap"],[11,44,7,0],[12,2,8,0],[12,6,8,0,"_Logger"],[12,13,8,0],[12,16,8,0,"_interopRequireDefault"],[12,38,8,0],[12,39,8,0,"require"],[12,46,8,0],[12,47,8,0,"_dependencyMap"],[12,61,8,0],[13,2,8,36],[13,6,8,36,"_Platform"],[13,15,8,36],[13,18,8,36,"_interopRequireDefault"],[13,40,8,36],[13,41,8,36,"require"],[13,48,8,36],[13,49,8,36,"_dependencyMap"],[13,63,8,36],[14,2,8,36],[14,11,8,36,"_interopRequireWildcard"],[14,35,8,36,"e"],[14,36,8,36],[14,38,8,36,"t"],[14,39,8,36],[14,68,8,36,"WeakMap"],[14,75,8,36],[14,81,8,36,"r"],[14,82,8,36],[14,89,8,36,"WeakMap"],[14,96,8,36],[14,100,8,36,"n"],[14,101,8,36],[14,108,8,36,"WeakMap"],[14,115,8,36],[14,127,8,36,"_interopRequireWildcard"],[14,150,8,36],[14,162,8,36,"_interopRequireWildcard"],[14,163,8,36,"e"],[14,164,8,36],[14,166,8,36,"t"],[14,167,8,36],[14,176,8,36,"t"],[14,177,8,36],[14,181,8,36,"e"],[14,182,8,36],[14,186,8,36,"e"],[14,187,8,36],[14,188,8,36,"__esModule"],[14,198,8,36],[14,207,8,36,"e"],[14,208,8,36],[14,214,8,36,"o"],[14,215,8,36],[14,217,8,36,"i"],[14,218,8,36],[14,220,8,36,"f"],[14,221,8,36],[14,226,8,36,"__proto__"],[14,235,8,36],[14,243,8,36,"default"],[14,250,8,36],[14,252,8,36,"e"],[14,253,8,36],[14,270,8,36,"e"],[14,271,8,36],[14,294,8,36,"e"],[14,295,8,36],[14,320,8,36,"e"],[14,321,8,36],[14,330,8,36,"f"],[14,331,8,36],[14,337,8,36,"o"],[14,338,8,36],[14,341,8,36,"t"],[14,342,8,36],[14,345,8,36,"n"],[14,346,8,36],[14,349,8,36,"r"],[14,350,8,36],[14,358,8,36,"o"],[14,359,8,36],[14,360,8,36,"has"],[14,363,8,36],[14,364,8,36,"e"],[14,365,8,36],[14,375,8,36,"o"],[14,376,8,36],[14,377,8,36,"get"],[14,380,8,36],[14,381,8,36,"e"],[14,382,8,36],[14,385,8,36,"o"],[14,386,8,36],[14,387,8,36,"set"],[14,390,8,36],[14,391,8,36,"e"],[14,392,8,36],[14,394,8,36,"f"],[14,395,8,36],[14,411,8,36,"t"],[14,412,8,36],[14,416,8,36,"e"],[14,417,8,36],[14,433,8,36,"t"],[14,434,8,36],[14,441,8,36,"hasOwnProperty"],[14,455,8,36],[14,456,8,36,"call"],[14,460,8,36],[14,461,8,36,"e"],[14,462,8,36],[14,464,8,36,"t"],[14,465,8,36],[14,472,8,36,"i"],[14,473,8,36],[14,477,8,36,"o"],[14,478,8,36],[14,481,8,36,"Object"],[14,487,8,36],[14,488,8,36,"defineProperty"],[14,502,8,36],[14,507,8,36,"Object"],[14,513,8,36],[14,514,8,36,"getOwnPropertyDescriptor"],[14,538,8,36],[14,539,8,36,"e"],[14,540,8,36],[14,542,8,36,"t"],[14,543,8,36],[14,550,8,36,"i"],[14,551,8,36],[14,552,8,36,"get"],[14,555,8,36],[14,559,8,36,"i"],[14,560,8,36],[14,561,8,36,"set"],[14,564,8,36],[14,568,8,36,"o"],[14,569,8,36],[14,570,8,36,"f"],[14,571,8,36],[14,573,8,36,"t"],[14,574,8,36],[14,576,8,36,"i"],[14,577,8,36],[14,581,8,36,"f"],[14,582,8,36],[14,583,8,36,"t"],[14,584,8,36],[14,588,8,36,"e"],[14,589,8,36],[14,590,8,36,"t"],[14,591,8,36],[14,602,8,36,"f"],[14,603,8,36],[14,608,8,36,"e"],[14,609,8,36],[14,611,8,36,"t"],[14,612,8,36],[15,2,1,0],[17,2,4,0],[19,2,11,0],[19,8,11,6,"logger"],[19,14,11,12],[19,17,11,15,"Logger"],[19,32,11,21],[19,33,11,22,"withTag"],[19,40,11,29],[19,41,11,30],[19,56,11,45],[19,57,11,46],[20,2,18,0],[21,0,19,0],[22,0,20,0],[23,2,21,0],[23,8,21,6,"ANDROID_MIME_TYPE"],[23,25,21,23],[23,28,21,26],[23,69,21,67],[24,2,23,0],[24,8,23,6,"UpdateService"],[24,21,23,19],[24,22,23,20],[25,4,25,2],[25,11,25,9,"getInstance"],[25,22,25,20,"getInstance"],[25,23,25,20],[25,25,25,38],[26,6,26,4],[26,10,26,8],[26,11,26,9,"UpdateService"],[26,24,26,22],[26,25,26,23,"instance"],[26,33,26,31],[26,35,26,33],[27,8,27,6,"UpdateService"],[27,21,27,19],[27,22,27,20,"instance"],[27,30,27,28],[27,33,27,31],[27,37,27,35,"UpdateService"],[27,50,27,48],[27,51,27,49],[27,52,27,50],[28,6,28,4],[29,6,29,4],[29,13,29,11,"UpdateService"],[29,26,29,24],[29,27,29,25,"instance"],[29,35,29,33],[30,4,30,2],[32,4,32,2],[33,0,33,0],[34,0,34,0],[35,4,35,2],[35,10,35,8,"checkVersion"],[35,22,35,20,"checkVersion"],[35,23,35,20],[35,25,35,45],[36,6,36,4],[36,12,36,10,"maxRetries"],[36,22,36,20],[36,25,36,23],[36,26,36,24],[37,6,37,4],[37,11,37,9],[37,15,37,13,"attempt"],[37,22,37,20],[37,25,37,23],[37,26,37,24],[37,28,37,26,"attempt"],[37,35,37,33],[37,39,37,37,"maxRetries"],[37,49,37,47],[37,51,37,49,"attempt"],[37,58,37,56],[37,60,37,58],[37,62,37,60],[38,8,38,6],[38,12,38,10],[39,10,39,8],[39,16,39,14,"controller"],[39,26,39,24],[39,29,39,27],[39,33,39,31,"AbortController"],[39,48,39,46],[39,49,39,47],[39,50,39,48],[40,10,40,8],[40,16,40,14,"timeoutId"],[40,25,40,23],[40,28,40,26,"setTimeout"],[40,38,40,36],[40,39,40,37],[40,45,40,43,"controller"],[40,55,40,53],[40,56,40,54,"abort"],[40,61,40,59],[40,62,40,60],[40,63,40,61],[40,65,40,63],[40,71,40,69],[40,72,40,70],[41,10,41,8],[41,16,41,14,"response"],[41,24,41,22],[41,27,41,25],[41,33,41,31,"fetch"],[41,38,41,36],[41,39,41,37,"UPDATE_CONFIG"],[41,66,41,50],[41,67,41,51,"GITHUB_RAW_URL"],[41,81,41,65],[41,83,41,67],[42,12,42,10,"signal"],[42,18,42,16],[42,20,42,18,"controller"],[42,30,42,28],[42,31,42,29,"signal"],[43,10,43,8],[43,11,43,9],[43,12,43,10],[44,10,44,8,"clearTimeout"],[44,22,44,20],[44,23,44,21,"timeoutId"],[44,32,44,30],[44,33,44,31],[45,10,45,8],[45,14,45,12],[45,15,45,13,"response"],[45,23,45,21],[45,24,45,22,"ok"],[45,26,45,24],[45,28,45,26],[46,12,46,10],[46,18,46,16],[46,22,46,20,"Error"],[46,27,46,25],[46,28,46,26],[46,36,46,34,"response"],[46,44,46,42],[46,45,46,43,"status"],[46,51,46,49],[46,53,46,51],[46,54,46,52],[47,10,47,8],[48,10,48,8],[48,16,48,14,"remotePackage"],[48,29,48,27],[48,32,48,30],[48,38,48,36,"response"],[48,46,48,44],[48,47,48,45,"json"],[48,51,48,49],[48,52,48,50],[48,53,48,51],[49,10,49,8],[49,16,49,14,"remoteVersion"],[49,29,49,27],[49,32,49,30,"remotePackage"],[49,45,49,43],[49,46,49,44,"version"],[49,53,49,61],[50,10,50,8],[50,17,50,15],[51,12,51,10,"version"],[51,19,51,17],[51,21,51,19,"remoteVersion"],[51,34,51,32],[52,12,52,10,"downloadUrl"],[52,23,52,21],[52,25,52,23,"UPDATE_CONFIG"],[52,52,52,36],[52,53,52,37,"getDownloadUrl"],[52,67,52,51],[52,68,52,52,"remoteVersion"],[52,81,52,65],[53,10,53,8],[53,11,53,9],[54,8,54,6],[54,9,54,7],[54,10,54,8],[54,17,54,15,"e"],[54,18,54,16],[54,20,54,18],[55,10,55,8,"logger"],[55,16,55,14],[55,17,55,15,"warn"],[55,21,55,19],[55,22,55,20],[55,46,55,44,"attempt"],[55,53,55,51],[55,57,55,55,"maxRetries"],[55,67,55,65],[55,69,55,67],[55,71,55,69,"e"],[55,72,55,70],[55,73,55,71],[56,10,56,8],[56,14,56,12,"attempt"],[56,21,56,19],[56,26,56,24,"maxRetries"],[56,36,56,34],[56,38,56,36],[57,12,57,10,"Toast"],[57,44,57,15],[57,45,57,16,"show"],[57,49,57,20],[57,50,57,21],[58,14,58,12,"type"],[58,18,58,16],[58,20,58,18],[58,27,58,25],[59,14,59,12,"text1"],[59,19,59,17],[59,21,59,19],[59,29,59,27],[60,14,60,12,"text2"],[60,19,60,17],[60,21,60,19],[61,12,61,10],[61,13,61,11],[61,14,61,12],[62,12,62,10],[62,18,62,16,"e"],[62,19,62,17],[63,10,63,8],[64,10,64,8],[65,10,65,8],[65,16,65,14],[65,20,65,18,"Promise"],[65,27,65,25],[65,28,65,26,"r"],[65,29,65,27],[65,33,65,31,"setTimeout"],[65,43,65,41],[65,44,65,42,"r"],[65,45,65,43],[65,47,65,45],[65,52,65,50],[65,55,65,53,"attempt"],[65,62,65,60],[65,63,65,61],[65,64,65,62],[66,8,66,6],[67,6,67,4],[68,6,68,4],[69,6,69,4],[69,12,69,10],[69,16,69,14,"Error"],[69,21,69,19],[69,22,69,20],[69,34,69,32],[69,35,69,33],[70,4,70,2],[72,4,72,2],[73,0,73,0],[74,0,74,0],[75,4,75,2],[75,10,75,16,"cleanOldApkFiles"],[75,26,75,32,"cleanOldApkFiles"],[75,27,75,32],[75,29,75,50],[76,6,76,4],[76,10,76,8],[77,8,77,6],[77,14,77,12,"dirUri"],[77,20,77,18],[77,23,77,21,"FileSystem"],[77,33,77,31],[77,34,77,32,"documentDirectory"],[77,51,77,49],[77,52,77,50],[77,53,77,51],[78,8,78,6],[78,12,78,10],[78,13,78,11,"dirUri"],[78,19,78,17],[78,21,78,19],[79,10,79,8],[79,16,79,14],[79,20,79,18,"Error"],[79,25,79,23],[79,26,79,24],[79,63,79,61],[79,64,79,62],[80,8,80,6],[81,8,81,6],[81,14,81,12,"listing"],[81,21,81,19],[81,24,81,22],[81,30,81,28,"FileSystem"],[81,40,81,38],[81,41,81,39,"readDirectoryAsync"],[81,59,81,57],[81,60,81,58,"dirUri"],[81,66,81,64],[81,67,81,65],[82,8,82,6],[82,14,82,12,"apkFiles"],[82,22,82,20],[82,25,82,23,"listing"],[82,32,82,30],[82,33,82,31,"filter"],[82,39,82,37],[82,40,82,38,"name"],[82,44,82,42],[82,48,82,46,"name"],[82,52,82,50],[82,53,82,51,"startsWith"],[82,63,82,61],[82,64,82,62],[82,75,82,73],[82,76,82,74],[82,80,82,78,"name"],[82,84,82,82],[82,85,82,83,"endsWith"],[82,93,82,91],[82,94,82,92],[82,100,82,98],[82,101,82,99],[82,102,82,100],[83,8,84,6],[83,12,84,10,"apkFiles"],[83,20,84,18],[83,21,84,19,"length"],[83,27,84,25],[83,31,84,29],[83,32,84,30],[83,34,84,32],[84,8,86,6],[84,14,86,12,"sorted"],[84,20,86,18],[84,23,86,21,"apkFiles"],[84,31,86,29],[84,32,86,30,"sort"],[84,36,86,34],[84,37,86,35],[84,38,86,36,"a"],[84,39,86,37],[84,41,86,39,"b"],[84,42,86,40],[84,47,86,45],[85,10,87,8],[85,16,87,14,"numA"],[85,20,87,18],[85,23,87,21,"parseInt"],[85,31,87,29],[85,32,87,30,"a"],[85,33,87,31],[85,34,87,32,"replace"],[85,41,87,39],[85,42,87,40],[85,51,87,49],[85,53,87,51],[85,55,87,53],[85,56,87,54],[85,58,87,56],[85,60,87,58],[85,61,87,59],[86,10,88,8],[86,16,88,14,"numB"],[86,20,88,18],[86,23,88,21,"parseInt"],[86,31,88,29],[86,32,88,30,"b"],[86,33,88,31],[86,34,88,32,"replace"],[86,41,88,39],[86,42,88,40],[86,51,88,49],[86,53,88,51],[86,55,88,53],[86,56,88,54],[86,58,88,56],[86,60,88,58],[86,61,88,59],[87,10,89,8],[87,17,89,15,"numB"],[87,21,89,19],[87,24,89,22,"numA"],[87,28,89,26],[87,29,89,27],[87,30,89,28],[88,8,90,6],[88,9,90,7],[88,10,90,8],[89,8,92,6],[89,14,92,12,"stale"],[89,19,92,17],[89,22,92,20,"sorted"],[89,28,92,26],[89,29,92,27,"slice"],[89,34,92,32],[89,35,92,33],[89,36,92,34],[89,37,92,35],[89,38,92,36],[89,39,92,37],[90,8,93,6],[90,13,93,11],[90,19,93,17,"file"],[90,23,93,21],[90,27,93,25,"stale"],[90,32,93,30],[90,34,93,32],[91,10,94,8],[91,16,94,14,"path"],[91,20,94,18],[91,23,94,21],[91,26,94,24,"dirUri"],[91,32,94,30],[91,35,94,33,"file"],[91,39,94,37],[91,41,94,39],[92,10,95,8],[92,14,95,12],[93,12,96,10],[93,18,96,16,"FileSystem"],[93,28,96,26],[93,29,96,27,"deleteAsync"],[93,40,96,38],[93,41,96,39,"path"],[93,45,96,43],[93,47,96,45],[94,14,96,47,"idempotent"],[94,24,96,57],[94,26,96,59],[95,12,96,64],[95,13,96,65],[95,14,96,66],[96,12,97,10,"logger"],[96,18,97,16],[96,19,97,17,"debug"],[96,24,97,22],[96,25,97,23],[96,45,97,43,"file"],[96,49,97,47],[96,51,97,49],[96,52,97,50],[97,10,98,8],[97,11,98,9],[97,12,98,10],[97,19,98,17,"e"],[97,20,98,18],[97,22,98,20],[98,12,99,10,"logger"],[98,18,99,16],[98,19,99,17,"warn"],[98,23,99,21],[98,24,99,22],[98,44,99,42,"file"],[98,48,99,46],[98,50,99,48],[98,52,99,50,"e"],[98,53,99,51],[98,54,99,52],[99,10,100,8],[100,8,101,6],[101,6,102,4],[101,7,102,5],[101,8,102,6],[101,15,102,13,"e"],[101,16,102,14],[101,18,102,16],[102,8,103,6,"logger"],[102,14,103,12],[102,15,103,13,"warn"],[102,19,103,17],[102,20,103,18],[102,44,103,42],[102,46,103,44,"e"],[102,47,103,45],[102,48,103,46],[103,6,104,4],[104,4,105,2],[106,4,107,2],[107,0,108,0],[108,0,109,0],[109,4,110,2],[109,10,110,8,"downloadApk"],[109,21,110,19,"downloadApk"],[109,22,111,4,"url"],[109,25,111,15],[109,27,112,4,"onProgress"],[109,37,112,42],[109,39,113,21],[110,6,114,4],[110,12,114,10,"maxRetries"],[110,22,114,20],[110,25,114,23],[110,26,114,24],[111,6,115,4],[111,12,115,10],[111,16,115,14],[111,17,115,15,"cleanOldApkFiles"],[111,33,115,31],[111,34,115,32],[111,35,115,33],[112,6,117,4],[112,11,117,9],[112,15,117,13,"attempt"],[112,22,117,20],[112,25,117,23],[112,26,117,24],[112,28,117,26,"attempt"],[112,35,117,33],[112,39,117,37,"maxRetries"],[112,49,117,47],[112,51,117,49,"attempt"],[112,58,117,56],[112,60,117,58],[112,62,117,60],[113,8,118,6],[113,12,118,10],[114,10,119,8],[114,16,119,14,"timestamp"],[114,25,119,23],[114,28,119,26,"Date"],[114,32,119,30],[114,33,119,31,"now"],[114,36,119,34],[114,37,119,35],[114,38,119,36],[115,10,120,8],[115,16,120,14,"fileName"],[115,24,120,22],[115,27,120,25],[115,39,120,37,"timestamp"],[115,48,120,46],[115,54,120,52],[116,10,121,8],[116,16,121,14,"fileUri"],[116,23,121,21],[116,26,121,24],[116,29,121,27,"FileSystem"],[116,39,121,37],[116,40,121,38,"documentDirectory"],[116,57,121,55],[116,60,121,58,"fileName"],[116,68,121,66],[116,70,121,68],[118,10,123,8],[119,10,124,8],[119,16,124,14,"downloadResumable"],[119,33,124,31],[119,36,124,34,"FileSystem"],[119,46,124,44],[119,47,124,45,"createDownloadResumable"],[119,70,124,68],[119,71,125,10,"url"],[119,74,125,13],[119,76,126,10,"fileUri"],[119,83,126,17],[119,85,127,10],[120,12,128,12],[121,12,129,12],[122,10,129,12],[122,11,130,11],[122,13,131,10,"progress"],[122,21,131,18],[122,25,131,22],[123,12,132,12],[123,16,132,16,"onProgress"],[123,26,132,26],[123,30,132,30,"progress"],[123,38,132,38],[123,39,132,39,"totalBytesExpectedToWrite"],[123,64,132,64],[123,66,132,66],[124,14,133,14],[124,20,133,20,"percent"],[124,27,133,27],[124,30,133,30,"Math"],[124,34,133,34],[124,35,133,35,"floor"],[124,40,133,40],[124,41,134,17,"progress"],[124,49,134,25],[124,50,134,26,"totalBytesWritten"],[124,67,134,43],[124,70,134,46,"progress"],[124,78,134,54],[124,79,134,55,"totalBytesExpectedToWrite"],[124,104,134,80],[124,107,134,84],[124,110,135,14],[124,111,135,15],[125,14,136,14,"onProgress"],[125,24,136,24],[125,25,136,25,"percent"],[125,32,136,32],[125,33,136,33],[126,12,137,12],[127,10,138,10],[127,11,139,8],[127,12,139,9],[128,10,141,8],[128,16,141,14,"result"],[128,22,141,20],[128,25,141,23],[128,31,141,29,"downloadResumable"],[128,48,141,46],[128,49,141,47,"downloadAsync"],[128,62,141,60],[128,63,141,61],[128,64,141,62],[129,10,142,8],[129,14,142,12,"result"],[129,20,142,18],[129,24,142,22,"result"],[129,30,142,28],[129,31,142,29,"uri"],[129,34,142,32],[129,36,142,34],[130,12,143,10,"logger"],[130,18,143,16],[130,19,143,17,"debug"],[130,24,143,22],[130,25,143,23],[130,46,143,44,"result"],[130,52,143,50],[130,53,143,51,"uri"],[130,56,143,54],[130,58,143,56],[130,59,143,57],[131,12,144,10],[131,19,144,17,"result"],[131,25,144,23],[131,26,144,24,"uri"],[131,29,144,27],[132,10,145,8],[132,11,145,9],[132,17,145,15],[133,12,146,10],[133,18,146,16],[133,22,146,20,"Error"],[133,27,146,25],[133,28,146,26],[133,63,146,61],[133,64,146,62],[134,10,147,8],[135,8,148,6],[135,9,148,7],[135,10,148,8],[135,17,148,15,"e"],[135,18,148,16],[135,20,148,18],[136,10,149,8,"logger"],[136,16,149,14],[136,17,149,15,"warn"],[136,21,149,19],[136,22,149,20],[136,45,149,43,"attempt"],[136,52,149,50],[136,56,149,54,"maxRetries"],[136,66,149,64],[136,68,149,66],[136,70,149,68,"e"],[136,71,149,69],[136,72,149,70],[137,10,150,8],[137,14,150,12,"attempt"],[137,21,150,19],[137,26,150,24,"maxRetries"],[137,36,150,34],[137,38,150,36],[138,12,151,10,"Toast"],[138,44,151,15],[138,45,151,16,"show"],[138,49,151,20],[138,50,151,21],[139,14,152,12,"type"],[139,18,152,16],[139,20,152,18],[139,27,152,25],[140,14,153,12,"text1"],[140,19,153,17],[140,21,153,19],[140,27,153,25],[141,14,154,12,"text2"],[141,19,154,17],[141,21,154,19],[142,12,155,10],[142,13,155,11],[142,14,155,12],[143,12,156,10],[143,18,156,16,"e"],[143,19,156,17],[144,10,157,8],[145,10,158,8],[146,10,159,8],[146,16,159,14],[146,20,159,18,"Promise"],[146,27,159,25],[146,28,159,26,"r"],[146,29,159,27],[146,33,159,31,"setTimeout"],[146,43,159,41],[146,44,159,42,"r"],[146,45,159,43],[146,47,159,45],[146,52,159,50],[146,55,159,53,"attempt"],[146,62,159,60],[146,63,159,61],[146,64,159,62],[147,8,160,6],[148,6,161,4],[149,6,162,4],[150,6,163,4],[150,12,163,10],[150,16,163,14,"Error"],[150,21,163,19],[150,22,163,20],[150,39,163,37],[150,40,163,38],[151,4,164,2],[153,4,166,2],[154,0,167,0],[155,0,168,0],[156,4,169,2],[156,10,169,8,"installApk"],[156,20,169,18,"installApk"],[156,21,169,19,"fileUri"],[156,28,169,34],[156,30,169,51],[157,6,170,4],[158,6,171,4],[158,12,171,10,"exists"],[158,18,171,16],[158,21,171,19],[158,27,171,25,"FileSystem"],[158,37,171,35],[158,38,171,36,"getInfoAsync"],[158,50,171,48],[158,51,171,49,"fileUri"],[158,58,171,56],[158,59,171,57],[159,6,172,4],[159,10,172,8],[159,11,172,9,"exists"],[159,17,172,15],[159,18,172,16,"exists"],[159,24,172,22],[159,26,172,24],[160,8,173,6],[160,14,173,12],[160,18,173,16,"Error"],[160,23,173,21],[160,24,173,22],[160,44,173,42,"fileUri"],[160,51,173,49],[160,53,173,51],[160,54,173,52],[161,6,174,4],[163,6,176,4],[164,6,177,4],[164,12,177,10,"contentUri"],[164,22,177,20],[164,25,177,23],[164,31,177,29,"FileSystem"],[164,41,177,39],[164,42,177,40,"getContentUriAsync"],[164,60,177,58],[164,61,177,59,"fileUri"],[164,68,177,66],[164,69,177,67],[166,6,179,4],[167,6,180,4],[167,10,180,8,"Platform"],[167,27,180,16],[167,28,180,17,"OS"],[167,30,180,19],[167,35,180,24],[167,44,180,33],[167,46,180,35],[168,8,181,6],[168,12,181,10],[169,10,182,8],[170,10,183,8],[171,10,184,8],[171,16,184,14,"flags"],[171,21,184,19],[171,24,184,22],[171,25,184,23],[171,28,184,26],[171,38,184,36],[171,39,184,37],[171,40,184,40],[173,10,186,8],[173,16,186,14,"IntentLauncher"],[173,30,186,28],[173,31,186,29,"startActivityAsync"],[173,49,186,47],[173,50,186,48],[173,78,186,76],[173,80,186,78],[174,12,187,10,"data"],[174,16,187,14],[174,18,187,16,"contentUri"],[174,28,187,26],[175,12,187,37],[176,12,188,10,"type"],[176,16,188,14],[176,18,188,16,"ANDROID_MIME_TYPE"],[176,35,188,33],[177,12,188,37],[178,12,189,10,"flags"],[179,10,190,8],[179,11,190,9],[179,12,190,10],[180,8,191,6],[180,9,191,7],[180,10,191,8],[180,17,191,15,"e"],[180,18,191,21],[180,20,191,23],[181,10,192,8],[182,10,193,8],[182,14,193,12,"e"],[182,15,193,13],[182,16,193,14,"message"],[182,23,193,21],[182,25,193,23,"includes"],[182,33,193,31],[182,34,193,32],[182,54,193,52],[182,55,193,53],[182,57,193,55],[183,12,194,10,"Toast"],[183,44,194,15],[183,45,194,16,"show"],[183,49,194,20],[183,50,194,21],[184,14,195,12,"type"],[184,18,195,16],[184,20,195,18],[184,27,195,25],[185,14,196,12,"text1"],[185,19,196,17],[185,21,196,19],[185,27,196,25],[186,14,197,12,"text2"],[186,19,197,17],[186,21,197,19],[187,12,198,10],[187,13,198,11],[187,14,198,12],[188,10,199,8],[188,11,199,9],[188,17,199,15],[188,21,199,19,"e"],[188,22,199,20],[188,23,199,21,"message"],[188,30,199,28],[188,32,199,30,"includes"],[188,40,199,38],[188,41,199,39],[188,53,199,51],[188,54,199,52],[188,56,199,54],[189,12,200,10,"Toast"],[189,44,200,15],[189,45,200,16,"show"],[189,49,200,20],[189,50,200,21],[190,14,201,12,"type"],[190,18,201,16],[190,20,201,18],[190,27,201,25],[191,14,202,12,"text1"],[191,19,202,17],[191,21,202,19],[191,27,202,25],[192,14,203,12,"text2"],[192,19,203,17],[192,21,203,19],[193,12,204,10],[193,13,204,11],[193,14,204,12],[194,10,205,8],[194,11,205,9],[194,17,205,15],[195,12,206,10,"Toast"],[195,44,206,15],[195,45,206,16,"show"],[195,49,206,20],[195,50,206,21],[196,14,207,12,"type"],[196,18,207,16],[196,20,207,18],[196,27,207,25],[197,14,208,12,"text1"],[197,19,208,17],[197,21,208,19],[197,27,208,25],[198,14,209,12,"text2"],[198,19,209,17],[198,21,209,19],[199,12,210,10],[199,13,210,11],[199,14,210,12],[200,10,211,8],[201,10,212,8],[201,16,212,14,"e"],[201,17,212,15],[202,8,213,6],[203,6,214,4],[203,7,214,5],[203,13,214,11],[204,8,215,6],[205,8,216,6,"Toast"],[205,40,216,11],[205,41,216,12,"show"],[205,45,216,16],[205,46,216,17],[206,10,217,8,"type"],[206,14,217,12],[206,16,217,14],[206,23,217,21],[207,10,218,8,"text1"],[207,15,218,13],[207,17,218,15],[207,23,218,21],[208,10,219,8,"text2"],[208,15,219,13],[208,17,219,15],[209,8,220,6],[209,9,220,7],[209,10,220,8],[210,8,221,6],[210,14,221,12],[210,18,221,16,"Error"],[210,23,221,21],[210,24,221,22],[210,58,221,56],[210,59,221,57],[211,6,222,4],[212,4,223,2],[214,4,225,2],[215,0,226,0],[216,0,227,0],[217,4,228,2,"compareVersions"],[217,19,228,17,"compareVersions"],[217,20,228,18,"v1"],[217,22,228,28],[217,24,228,30,"v2"],[217,26,228,40],[217,28,228,50],[218,6,229,4],[218,12,229,10,"p1"],[218,14,229,12],[218,17,229,15,"v1"],[218,19,229,17],[218,20,229,18,"split"],[218,25,229,23],[218,26,229,24],[218,29,229,27],[218,30,229,28],[218,31,229,29,"map"],[218,34,229,32],[218,35,229,33,"Number"],[218,41,229,39],[218,42,229,40],[219,6,230,4],[219,12,230,10,"p2"],[219,14,230,12],[219,17,230,15,"v2"],[219,19,230,17],[219,20,230,18,"split"],[219,25,230,23],[219,26,230,24],[219,29,230,27],[219,30,230,28],[219,31,230,29,"map"],[219,34,230,32],[219,35,230,33,"Number"],[219,41,230,39],[219,42,230,40],[220,6,231,4],[220,11,231,9],[220,15,231,13,"i"],[220,16,231,14],[220,19,231,17],[220,20,231,18],[220,22,231,20,"i"],[220,23,231,21],[220,26,231,24,"Math"],[220,30,231,28],[220,31,231,29,"max"],[220,34,231,32],[220,35,231,33,"p1"],[220,37,231,35],[220,38,231,36,"length"],[220,44,231,42],[220,46,231,44,"p2"],[220,48,231,46],[220,49,231,47,"length"],[220,55,231,53],[220,56,231,54],[220,58,231,56,"i"],[220,59,231,57],[220,61,231,59],[220,63,231,61],[221,8,232,6],[221,14,232,12,"n1"],[221,16,232,14],[221,19,232,17,"p1"],[221,21,232,19],[221,22,232,20,"i"],[221,23,232,21],[221,24,232,22],[221,28,232,26],[221,29,232,27],[222,8,233,6],[222,14,233,12,"n2"],[222,16,233,14],[222,19,233,17,"p2"],[222,21,233,19],[222,22,233,20,"i"],[222,23,233,21],[222,24,233,22],[222,28,233,26],[222,29,233,27],[223,8,234,6],[223,12,234,10,"n1"],[223,14,234,12],[223,17,234,15,"n2"],[223,19,234,17],[223,21,234,19],[223,28,234,26],[223,29,234,27],[224,8,235,6],[224,12,235,10,"n1"],[224,14,235,12],[224,17,235,15,"n2"],[224,19,235,17],[224,21,235,19],[224,28,235,26],[224,29,235,27],[224,30,235,28],[225,6,236,4],[226,6,237,4],[226,13,237,11],[226,14,237,12],[227,4,238,2],[228,4,239,2,"getCurrentVersion"],[228,21,239,19,"getCurrentVersion"],[228,22,239,19],[228,24,239,30],[229,6,240,4],[229,13,240,11,"currentVersion"],[229,29,240,25],[230,4,241,2],[231,4,242,2,"isUpdateAvailable"],[231,21,242,19,"isUpdateAvailable"],[231,22,242,20,"remoteVersion"],[231,35,242,41],[231,37,242,52],[232,6,243,4],[232,13,243,11],[232,17,243,15],[232,18,243,16,"compareVersions"],[232,33,243,31],[232,34,243,32,"remoteVersion"],[232,47,243,45],[232,49,243,47,"currentVersion"],[232,65,243,61],[232,66,243,62],[232,69,243,65],[232,70,243,66],[233,4,244,2],[234,2,245,0],[236,2,247,0],[237,2,247,0],[237,6,247,0,"_default"],[237,14,247,0],[237,17,247,0,"exports"],[237,24,247,0],[237,25,247,0,"default"],[237,32,247,0],[237,35,248,15,"UpdateService"],[237,48,248,28],[237,49,248,29,"getInstance"],[237,60,248,40],[237,61,248,41],[237,62,248,42],[238,0,248,42]],"functionMap":{"names":["<global>","UpdateService","UpdateService.getInstance","UpdateService#checkVersion","setTimeout$argument_0","Promise$argument_0","UpdateService#cleanOldApkFiles","listing.filter$argument_0","apkFiles.sort$argument_0","UpdateService#downloadApk","FileSystem.createDownloadResumable$argument_3","UpdateService#installApk","UpdateService#compareVersions","UpdateService#getCurrentVersion","UpdateService#isUpdateAvailable"],"mappings":"AAA;ACsB;ECE;GDK;EEK;qCCK,wBD;0BEyB,mCF;GFK;EKK;sCCO,6DD;mCEI;OFI;GLe;EQK;UCqB;WDO;0BJqB,mCI;GRK;EUK;GVsD;EWK;GXU;EYC;GZE;EaC;GbE;CDC"}},"type":"js/module"}]}