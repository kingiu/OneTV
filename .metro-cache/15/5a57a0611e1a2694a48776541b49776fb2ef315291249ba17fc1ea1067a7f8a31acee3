{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":181,"column":0,"index":5880}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":181,"column":0,"index":5880}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":181,"column":0,"index":5880}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0]);\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = undefined;\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[1]));\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[2]));\n  /**\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * @format\n   */\n  var InternetReachability = exports.default = /*#__PURE__*/(0, _createClass2.default)(function InternetReachability(configuration, listener) {\n    var _this = this;\n    (0, _classCallCheck2.default)(this, InternetReachability);\n    this._isInternetReachable = undefined;\n    this._currentInternetReachabilityCheckHandler = null;\n    this._currentTimeoutHandle = null;\n    this._setIsInternetReachable = function (isInternetReachable) {\n      if (_this._isInternetReachable === isInternetReachable) {\n        return;\n      }\n      _this._isInternetReachable = isInternetReachable;\n      _this._listener(_this._isInternetReachable);\n    };\n    this._setExpectsConnection = function (expectsConnection) {\n      // Cancel any pending check\n      if (_this._currentInternetReachabilityCheckHandler !== null) {\n        _this._currentInternetReachabilityCheckHandler.cancel();\n        _this._currentInternetReachabilityCheckHandler = null;\n      }\n      // Cancel any pending timeout\n      if (_this._currentTimeoutHandle !== null) {\n        clearTimeout(_this._currentTimeoutHandle);\n        _this._currentTimeoutHandle = null;\n      }\n      if (expectsConnection && _this._configuration.reachabilityShouldRun()) {\n        // If we expect a connection, start the process for finding if we have one\n        // Set the state to \"null\" if it was previously false\n        if (!_this._isInternetReachable) {\n          _this._setIsInternetReachable(null);\n        }\n        // Start a network request to check for internet\n        _this._currentInternetReachabilityCheckHandler = _this._checkInternetReachability();\n      } else {\n        // If we don't expect a connection or don't run reachability check, just change the state to \"false\"\n        _this._setIsInternetReachable(false);\n      }\n    };\n    this._checkInternetReachability = function () {\n      var controller = new AbortController();\n      var responsePromise = fetch(_this._configuration.reachabilityUrl, {\n        headers: _this._configuration.reachabilityHeaders,\n        method: _this._configuration.reachabilityMethod,\n        cache: 'no-cache',\n        signal: controller.signal\n      });\n\n      // Create promise that will reject after the request timeout has been reached\n      var timeoutHandle;\n      var timeoutPromise = new Promise(function (_, reject) {\n        timeoutHandle = setTimeout(function () {\n          return reject('timedout');\n        }, _this._configuration.reachabilityRequestTimeout);\n      });\n\n      // Create promise that makes it possible to cancel a pending request through a reject\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      var cancel = function () {};\n      var cancelPromise = new Promise(function (_, reject) {\n        cancel = function () {\n          return reject('canceled');\n        };\n      });\n      var promise = Promise.race([responsePromise, timeoutPromise, cancelPromise]).then(function (response) {\n        return _this._configuration.reachabilityTest(response);\n      }).then(function (result) {\n        _this._setIsInternetReachable(result);\n        var nextTimeoutInterval = _this._isInternetReachable ? _this._configuration.reachabilityLongTimeout : _this._configuration.reachabilityShortTimeout;\n        _this._currentTimeoutHandle = setTimeout(_this._checkInternetReachability, nextTimeoutInterval);\n      }).catch(function (error) {\n        if ('canceled' === error) {\n          controller.abort();\n        } else {\n          if ('timedout' === error) {\n            controller.abort();\n          }\n          _this._setIsInternetReachable(false);\n          _this._currentTimeoutHandle = setTimeout(_this._checkInternetReachability, _this._configuration.reachabilityShortTimeout);\n        }\n      })\n      // Clear request timeout and propagate any errors\n      .then(function () {\n        clearTimeout(timeoutHandle);\n      }, function (error) {\n        clearTimeout(timeoutHandle);\n        throw error;\n      });\n      return {\n        promise,\n        cancel\n      };\n    };\n    this.update = function (state) {\n      if (typeof state.isInternetReachable === 'boolean' && _this._configuration.useNativeReachability) {\n        _this._setIsInternetReachable(state.isInternetReachable);\n      } else {\n        _this._setExpectsConnection(state.isConnected);\n      }\n    };\n    this.currentState = function () {\n      return _this._isInternetReachable;\n    };\n    this.tearDown = function () {\n      // Cancel any pending check\n      if (_this._currentInternetReachabilityCheckHandler !== null) {\n        _this._currentInternetReachabilityCheckHandler.cancel();\n        _this._currentInternetReachabilityCheckHandler = null;\n      }\n\n      // Cancel any pending timeout\n      if (_this._currentTimeoutHandle !== null) {\n        clearTimeout(_this._currentTimeoutHandle);\n        _this._currentTimeoutHandle = null;\n      }\n    };\n    this._configuration = configuration;\n    this._listener = listener;\n  });\n});","lineCount":134,"map":[[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,2,1,0],[17,6,18,21,"InternetReachability"],[17,26,18,41],[17,29,18,41,"exports"],[17,36,18,41],[17,37,18,41,"default"],[17,44,18,41],[17,64,18,41,"_createClass2"],[17,77,18,41],[17,78,18,41,"default"],[17,85,18,41],[17,87,25,2],[17,96,25,2,"InternetReachability"],[17,117,26,4,"configuration"],[17,130,26,45],[17,132,27,4,"listener"],[17,140,27,68],[17,142,28,4],[18,4,28,4],[18,8,28,4,"_this"],[18,13,28,4],[19,4,28,4],[19,8,28,4,"_classCallCheck2"],[19,24,28,4],[19,25,28,4,"default"],[19,32,28,4],[19,40,28,4,"InternetReachability"],[19,60,28,4],[20,4,28,4],[20,9,21,10,"_isInternetReachable"],[20,29,21,30],[20,32,21,61,"undefined"],[20,41,21,70],[21,4,21,70],[21,9,22,10,"_currentInternetReachabilityCheckHandler"],[21,49,22,50],[21,52,22,94],[21,56,22,98],[22,4,22,98],[22,9,23,10,"_currentTimeoutHandle"],[22,30,23,31],[22,33,23,72],[22,37,23,76],[23,4,23,76],[23,9,33,10,"_setIsInternetReachable"],[23,32,33,33],[23,35,33,36],[23,45,34,4,"isInternetReachable"],[23,64,34,39],[23,66,35,13],[24,6,36,4],[24,10,36,8,"_this"],[24,15,36,12],[24,16,36,13,"_isInternetReachable"],[24,36,36,33],[24,41,36,38,"isInternetReachable"],[24,60,36,57],[24,62,36,59],[25,8,37,6],[26,6,38,4],[27,6,40,4,"_this"],[27,11,40,8],[27,12,40,9,"_isInternetReachable"],[27,32,40,29],[27,35,40,32,"isInternetReachable"],[27,54,40,51],[28,6,41,4,"_this"],[28,11,41,8],[28,12,41,9,"_listener"],[28,21,41,18],[28,22,41,19,"_this"],[28,27,41,23],[28,28,41,24,"_isInternetReachable"],[28,48,41,44],[28,49,41,45],[29,4,42,2],[29,5,42,3],[30,4,42,3],[30,9,44,10,"_setExpectsConnection"],[30,30,44,31],[30,33,44,34],[30,43,44,35,"expectsConnection"],[30,60,44,68],[30,62,44,79],[31,6,45,4],[32,6,46,4],[32,10,46,8,"_this"],[32,15,46,12],[32,16,46,13,"_currentInternetReachabilityCheckHandler"],[32,56,46,53],[32,61,46,58],[32,65,46,62],[32,67,46,64],[33,8,47,6,"_this"],[33,13,47,10],[33,14,47,11,"_currentInternetReachabilityCheckHandler"],[33,54,47,51],[33,55,47,52,"cancel"],[33,61,47,58],[33,62,47,59],[33,63,47,60],[34,8,48,6,"_this"],[34,13,48,10],[34,14,48,11,"_currentInternetReachabilityCheckHandler"],[34,54,48,51],[34,57,48,54],[34,61,48,58],[35,6,49,4],[36,6,50,4],[37,6,51,4],[37,10,51,8,"_this"],[37,15,51,12],[37,16,51,13,"_currentTimeoutHandle"],[37,37,51,34],[37,42,51,39],[37,46,51,43],[37,48,51,45],[38,8,52,6,"clearTimeout"],[38,20,52,18],[38,21,52,19,"_this"],[38,26,52,23],[38,27,52,24,"_currentTimeoutHandle"],[38,48,52,45],[38,49,52,46],[39,8,53,6,"_this"],[39,13,53,10],[39,14,53,11,"_currentTimeoutHandle"],[39,35,53,32],[39,38,53,35],[39,42,53,39],[40,6,54,4],[41,6,56,4],[41,10,56,8,"expectsConnection"],[41,27,56,25],[41,31,56,29,"_this"],[41,36,56,33],[41,37,56,34,"_configuration"],[41,51,56,48],[41,52,56,49,"reachabilityShouldRun"],[41,73,56,70],[41,74,56,71],[41,75,56,72],[41,77,56,74],[42,8,57,6],[43,8,58,6],[44,8,59,6],[44,12,59,10],[44,13,59,11,"_this"],[44,18,59,15],[44,19,59,16,"_isInternetReachable"],[44,39,59,36],[44,41,59,38],[45,10,60,8,"_this"],[45,15,60,12],[45,16,60,13,"_setIsInternetReachable"],[45,39,60,36],[45,40,60,37],[45,44,60,41],[45,45,60,42],[46,8,61,6],[47,8,62,6],[48,8,63,6,"_this"],[48,13,63,10],[48,14,63,11,"_currentInternetReachabilityCheckHandler"],[48,54,63,51],[48,57,63,54,"_this"],[48,62,63,58],[48,63,63,59,"_checkInternetReachability"],[48,89,63,85],[48,90,63,86],[48,91,63,87],[49,6,64,4],[49,7,64,5],[49,13,64,11],[50,8,65,6],[51,8,66,6,"_this"],[51,13,66,10],[51,14,66,11,"_setIsInternetReachable"],[51,37,66,34],[51,38,66,35],[51,43,66,40],[51,44,66,41],[52,6,67,4],[53,4,68,2],[53,5,68,3],[54,4,68,3],[54,9,70,10,"_checkInternetReachability"],[54,35,70,36],[54,38,70,39],[54,50,70,79],[55,6,71,4],[55,10,71,10,"controller"],[55,20,71,20],[55,23,71,23],[55,27,71,27,"AbortController"],[55,42,71,42],[55,43,71,43],[55,44,71,44],[56,6,73,4],[56,10,73,10,"responsePromise"],[56,25,73,25],[56,28,73,28,"fetch"],[56,33,73,33],[56,34,73,34,"_this"],[56,39,73,38],[56,40,73,39,"_configuration"],[56,54,73,53],[56,55,73,54,"reachabilityUrl"],[56,70,73,69],[56,72,73,71],[57,8,74,6,"headers"],[57,15,74,13],[57,17,74,15,"_this"],[57,22,74,19],[57,23,74,20,"_configuration"],[57,37,74,34],[57,38,74,35,"reachabilityHeaders"],[57,57,74,54],[58,8,75,6,"method"],[58,14,75,12],[58,16,75,14,"_this"],[58,21,75,18],[58,22,75,19,"_configuration"],[58,36,75,33],[58,37,75,34,"reachabilityMethod"],[58,55,75,52],[59,8,76,6,"cache"],[59,13,76,11],[59,15,76,13],[59,25,76,23],[60,8,77,6,"signal"],[60,14,77,12],[60,16,77,14,"controller"],[60,26,77,24],[60,27,77,25,"signal"],[61,6,78,4],[61,7,78,5],[61,8,78,6],[63,6,80,4],[64,6,81,4],[64,10,81,8,"timeoutHandle"],[64,23,81,52],[65,6,82,4],[65,10,82,10,"timeoutPromise"],[65,24,82,24],[65,27,82,27],[65,31,82,31,"Promise"],[65,38,82,38],[65,39,82,49],[65,49,82,50,"_"],[65,50,82,51],[65,52,82,53,"reject"],[65,58,82,59],[65,60,82,70],[66,8,83,6,"timeoutHandle"],[66,21,83,19],[66,24,83,22,"setTimeout"],[66,34,83,32],[66,35,84,8],[67,10,84,8],[67,17,84,20,"reject"],[67,23,84,26],[67,24,84,27],[67,34,84,37],[67,35,84,38],[68,8,84,38],[68,11,85,8,"_this"],[68,16,85,12],[68,17,85,13,"_configuration"],[68,31,85,27],[68,32,85,28,"reachabilityRequestTimeout"],[68,58,86,6],[68,59,86,7],[69,6,87,4],[69,7,87,5],[69,8,87,6],[71,6,89,4],[72,6,90,4],[73,6,91,4],[73,10,91,8,"cancel"],[73,16,91,26],[73,19,91,29],[73,28,91,29,"cancel"],[73,29,91,29],[73,31,91,41],[73,32,91,42],[73,33,91,43],[74,6,92,4],[74,10,92,10,"cancelPromise"],[74,23,92,23],[74,26,92,26],[74,30,92,30,"Promise"],[74,37,92,37],[74,38,92,48],[74,48,92,49,"_"],[74,49,92,50],[74,51,92,52,"reject"],[74,57,92,58],[74,59,92,69],[75,8,93,6,"cancel"],[75,14,93,12],[75,17,93,15],[75,26,93,15,"cancel"],[75,27,93,15],[76,10,93,15],[76,17,93,27,"reject"],[76,23,93,33],[76,24,93,34],[76,34,93,44],[76,35,93,45],[77,8,93,45],[78,6,94,4],[78,7,94,5],[78,8,94,6],[79,6,96,4],[79,10,96,10,"promise"],[79,17,96,17],[79,20,96,20,"Promise"],[79,27,96,27],[79,28,96,28,"race"],[79,32,96,32],[79,33,96,33],[79,34,97,6,"responsePromise"],[79,49,97,21],[79,51,98,6,"timeoutPromise"],[79,65,98,20],[79,67,99,6,"cancelPromise"],[79,80,99,19],[79,81,100,5],[79,82,100,6],[79,83,101,7,"then"],[79,87,101,11],[79,88,102,8],[79,98,102,9,"response"],[79,106,102,17],[79,108,102,40],[80,8,103,10],[80,15,103,17,"_this"],[80,20,103,21],[80,21,103,22,"_configuration"],[80,35,103,36],[80,36,103,37,"reachabilityTest"],[80,52,103,53],[80,53,103,54,"response"],[80,61,103,62],[80,62,103,63],[81,6,104,8],[81,7,105,6],[81,8,105,7],[81,9,106,7,"then"],[81,13,106,11],[81,14,107,8],[81,24,107,9,"result"],[81,30,107,15],[81,32,107,26],[82,8,108,10,"_this"],[82,13,108,14],[82,14,108,15,"_setIsInternetReachable"],[82,37,108,38],[82,38,108,39,"result"],[82,44,108,45],[82,45,108,46],[83,8,109,10],[83,12,109,16,"nextTimeoutInterval"],[83,31,109,35],[83,34,109,38,"_this"],[83,39,109,42],[83,40,109,43,"_isInternetReachable"],[83,60,109,63],[83,63,110,14,"_this"],[83,68,110,18],[83,69,110,19,"_configuration"],[83,83,110,33],[83,84,110,34,"reachabilityLongTimeout"],[83,107,110,57],[83,110,111,14,"_this"],[83,115,111,18],[83,116,111,19,"_configuration"],[83,130,111,33],[83,131,111,34,"reachabilityShortTimeout"],[83,155,111,58],[84,8,112,10,"_this"],[84,13,112,14],[84,14,112,15,"_currentTimeoutHandle"],[84,35,112,36],[84,38,112,39,"setTimeout"],[84,48,112,49],[84,49,113,12,"_this"],[84,54,113,16],[84,55,113,17,"_checkInternetReachability"],[84,81,113,43],[84,83,114,12,"nextTimeoutInterval"],[84,102,115,10],[84,103,115,11],[85,6,116,8],[85,7,117,6],[85,8,117,7],[85,9,118,7,"catch"],[85,14,118,12],[85,15,119,8],[85,25,119,9,"error"],[85,30,119,47],[85,32,119,58],[86,8,120,10],[86,12,120,14],[86,22,120,24],[86,27,120,29,"error"],[86,32,120,34],[86,34,120,36],[87,10,121,12,"controller"],[87,20,121,22],[87,21,121,23,"abort"],[87,26,121,28],[87,27,121,29],[87,28,121,30],[88,8,122,10],[88,9,122,11],[88,15,122,17],[89,10,123,12],[89,14,123,16],[89,24,123,26],[89,29,123,31,"error"],[89,34,123,36],[89,36,123,38],[90,12,124,14,"controller"],[90,22,124,24],[90,23,124,25,"abort"],[90,28,124,30],[90,29,124,31],[90,30,124,32],[91,10,125,12],[92,10,127,12,"_this"],[92,15,127,16],[92,16,127,17,"_setIsInternetReachable"],[92,39,127,40],[92,40,127,41],[92,45,127,46],[92,46,127,47],[93,10,128,12,"_this"],[93,15,128,16],[93,16,128,17,"_currentTimeoutHandle"],[93,37,128,38],[93,40,128,41,"setTimeout"],[93,50,128,51],[93,51,129,14,"_this"],[93,56,129,18],[93,57,129,19,"_checkInternetReachability"],[93,83,129,45],[93,85,130,14,"_this"],[93,90,130,18],[93,91,130,19,"_configuration"],[93,105,130,33],[93,106,130,34,"reachabilityShortTimeout"],[93,130,131,12],[93,131,131,13],[94,8,132,10],[95,6,133,8],[95,7,134,6],[96,6,135,6],[97,6,135,6],[97,7,136,7,"then"],[97,11,136,11],[97,12,137,8],[97,24,137,20],[98,8,138,10,"clearTimeout"],[98,20,138,22],[98,21,138,23,"timeoutHandle"],[98,34,138,36],[98,35,138,37],[99,6,139,8],[99,7,139,9],[99,9,140,8],[99,19,140,9,"error"],[99,24,140,21],[99,26,140,32],[100,8,141,10,"clearTimeout"],[100,20,141,22],[100,21,141,23,"timeoutHandle"],[100,34,141,36],[100,35,141,37],[101,8,142,10],[101,14,142,16,"error"],[101,19,142,21],[102,6,143,8],[102,7,144,6],[102,8,144,7],[103,6,146,4],[103,13,146,11],[104,8,147,6,"promise"],[104,15,147,13],[105,8,148,6,"cancel"],[106,6,149,4],[106,7,149,5],[107,4,150,2],[107,5,150,3],[108,4,150,3],[108,9,152,9,"update"],[108,15,152,15],[108,18,152,18],[108,28,152,19,"state"],[108,33,152,63],[108,35,152,74],[109,6,153,4],[109,10,154,6],[109,17,154,13,"state"],[109,22,154,18],[109,23,154,19,"isInternetReachable"],[109,42,154,38],[109,47,154,43],[109,56,154,52],[109,60,155,6,"_this"],[109,65,155,10],[109,66,155,11,"_configuration"],[109,80,155,25],[109,81,155,26,"useNativeReachability"],[109,102,155,47],[109,104,156,6],[110,8,157,6,"_this"],[110,13,157,10],[110,14,157,11,"_setIsInternetReachable"],[110,37,157,34],[110,38,157,35,"state"],[110,43,157,40],[110,44,157,41,"isInternetReachable"],[110,63,157,60],[110,64,157,61],[111,6,158,4],[111,7,158,5],[111,13,158,11],[112,8,159,6,"_this"],[112,13,159,10],[112,14,159,11,"_setExpectsConnection"],[112,35,159,32],[112,36,159,33,"state"],[112,41,159,38],[112,42,159,39,"isConnected"],[112,53,159,50],[112,54,159,51],[113,6,160,4],[114,4,161,2],[114,5,161,3],[115,4,161,3],[115,9,163,9,"currentState"],[115,21,163,21],[115,24,163,24],[115,36,163,58],[116,6,164,4],[116,13,164,11,"_this"],[116,18,164,15],[116,19,164,16,"_isInternetReachable"],[116,39,164,36],[117,4,165,2],[117,5,165,3],[118,4,165,3],[118,9,167,9,"tearDown"],[118,17,167,17],[118,20,167,20],[118,32,167,32],[119,6,168,4],[120,6,169,4],[120,10,169,8,"_this"],[120,15,169,12],[120,16,169,13,"_currentInternetReachabilityCheckHandler"],[120,56,169,53],[120,61,169,58],[120,65,169,62],[120,67,169,64],[121,8,170,6,"_this"],[121,13,170,10],[121,14,170,11,"_currentInternetReachabilityCheckHandler"],[121,54,170,51],[121,55,170,52,"cancel"],[121,61,170,58],[121,62,170,59],[121,63,170,60],[122,8,171,6,"_this"],[122,13,171,10],[122,14,171,11,"_currentInternetReachabilityCheckHandler"],[122,54,171,51],[122,57,171,54],[122,61,171,58],[123,6,172,4],[125,6,174,4],[126,6,175,4],[126,10,175,8,"_this"],[126,15,175,12],[126,16,175,13,"_currentTimeoutHandle"],[126,37,175,34],[126,42,175,39],[126,46,175,43],[126,48,175,45],[127,8,176,6,"clearTimeout"],[127,20,176,18],[127,21,176,19,"_this"],[127,26,176,23],[127,27,176,24,"_currentTimeoutHandle"],[127,48,176,45],[127,49,176,46],[128,8,177,6,"_this"],[128,13,177,10],[128,14,177,11,"_currentTimeoutHandle"],[128,35,177,32],[128,38,177,35],[128,42,177,39],[129,6,178,4],[130,4,179,2],[130,5,179,3],[131,4,29,4],[131,8,29,8],[131,9,29,9,"_configuration"],[131,23,29,23],[131,26,29,26,"configuration"],[131,39,29,39],[132,4,30,4],[132,8,30,8],[132,9,30,9,"_listener"],[132,18,30,18],[132,21,30,21,"listener"],[132,29,30,29],[133,2,31,2],[133,3,31,3],[134,0,31,3]],"functionMap":{"names":["<global>","InternetReachability","InternetReachability#constructor","InternetReachability#_setIsInternetReachable","InternetReachability#_setExpectsConnection","InternetReachability#_checkInternetReachability","Promise$argument_0","setTimeout$argument_0","cancel","Promise.race.then$argument_0","Promise.race.then.then$argument_0","Promise.race.then.then._catch$argument_0","Promise.race..._catch.then$argument_0","Promise.race..._catch.then$argument_1","InternetReachability#update","InternetReachability#currentState","InternetReachability#tearDown"],"mappings":"AAA;eCiB;ECO;GDM;oCEE;GFS;kCGE;GHwB;uCIE;iDCY;QCE,8BD;KDG;6BGI,cH;gDCC;eEC,8BF;KDC;QIQ;SJE;QKG;SLS;QMG;SNc;QOI;SPE;QQC;SRG;GJO;kBaE;GbS;wBcE;GdE;oBeE;GfY;CDC"}},"type":"js/module"}]}